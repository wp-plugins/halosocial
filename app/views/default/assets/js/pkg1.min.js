function UIBuilderData(name,type,attributes){this._name=name,this._type=type,this._attributes=attributes,window.jQuery.extend(this,attributes);var $this=this;this.fetch=function(){if(this._type){for(var namespaces=this._type.split("."),func=UIBuilder.view,i=0;i<namespaces.length;i++){if("undefined"==typeof func[namespaces[i]])return"";func=func[namespaces[i]]}return func.apply(this,[this])}},this.getSize=function(){return"undefined"!=typeof $this.size?"col-md-"+$this.size:""},this.getValidationLabel=function(){return"undefined"!=typeof $this.size?$this.size:""},this.getHelpText=function(){return"undefined"!=typeof $this.size?$this.size:""}}function handleBlackBerryLocationTimeout(){-1!=bb_blackberryTimeout_id&&bb_error({message:"Timeout error",code:3})}function handleBlackBerryLocation(){if(clearTimeout(bb_blackberryTimeout_id),bb_blackberryTimeout_id=-1,bb_success&&bb_error){if(0==blackberry.location.latitude&&0==blackberry.location.longitude)bb_error({message:"Position unavailable",code:2});else{var a=null;blackberry.location.timestamp&&(a=new Date(blackberry.location.timestamp)),bb_success({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb_success=null,bb_error=null}}"undefined"==typeof UIBuilder&&(UIBuilder={extend:function(obj){window.jQuery.extend(this,obj)}}),UIBuilder.extend({getInstance:function(name,type,attributes){var instance=new UIBuilderData(name,type,attributes);return instance},view:{form:{date:function($builder){var html='<div class="form-group '+$builder.getSize()+($builder.error?"error":"")+'"><label for="'+$builder.name+'" class="'+$builder.getValidationLabel()+'">'+$builder.title+$builder.getHelpText()+'</label><div class="input-group halo_field_date date form_date" data-date="" data-date-format="dd-mm-yyyy"><input class="form-control" name="'+$builder.name+'" type="text" value="'+$builder.value+'" readonly><span class="input-group-addon"><span class="fa fa-times"></span></span><span class="input-group-addon"><span class="fa fa-calendar"></span></span></div></div>';return html}},filter:{date:function($builder){}}}}),function(){if(!window.google||!google.gears){var factory=null;if("undefined"!=typeof GearsFactory)factory=new GearsFactory;else try{factory=new ActiveXObject("Gears.Factory"),-1!=factory.getBuildInfo().indexOf("ie_mobile")&&factory.privateSetGlobalObject(this)}catch(e){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(factory=document.createElement("object"),factory.style.display="none",factory.width=0,factory.height=0,factory.type="application/x-googlegears",document.documentElement.appendChild(factory),factory&&"undefined"==typeof factory.create&&(factory=null))}factory&&(window.google||(google={}),google.gears||(google.gears={factory:factory}))}}();var bb_success,bb_error,bb_blackberryTimeout_id=-1,geo_position_js=function(){var b={},c=null,a="undefined";return b.getCurrentPosition=function(f,d,e){c.getCurrentPosition(f,d,e)},b.init=function(){try{if(typeof geo_position_js_simulator!=a)c=geo_position_js_simulator;else if(typeof bondi!=a&&typeof bondi.geolocation!=a)c=bondi.geolocation;else if(typeof navigator.geolocation!=a)c=navigator.geolocation,b.getCurrentPosition=function(h,e,g){function f(i){h(typeof i.latitude!=a?{timestamp:i.timestamp,coords:{latitude:i.latitude,longitude:i.longitude}}:i)}c.getCurrentPosition(f,e,g)};else if(typeof window.blackberry!=a&&blackberry.location.GPSSupported){if(typeof blackberry.location.setAidMode==a)return!1;blackberry.location.setAidMode(2),b.getCurrentPosition=function(g,e,f){bb_success=g,bb_error=e,bb_blackberryTimeout_id=f.timeout?setTimeout("handleBlackBerryLocationTimeout()",f.timeout):setTimeout("handleBlackBerryLocationTimeout()",6e4),blackberry.location.onLocationUpdate("handleBlackBerryLocation()"),blackberry.location.refreshLocation()},c=blackberry.location}else typeof window.google!=a&&typeof google.gears!=a?c=google.gears.factory.create("beta.geolocation"):typeof Mojo!=a&&"Mojo.Service.Request"!=typeof Mojo.Service.Request?(c=!0,b.getCurrentPosition=function(g,e,f){parameters={},f&&(f.enableHighAccuracy&&1==f.enableHighAccuracy&&(parameters.accuracy=1),f.maximumAge&&(parameters.maximumAge=f.maximumAge),f.responseTime&&(f.responseTime<5?parameters.responseTime=1:f.responseTime<20?parameters.responseTime=2:parameters.timeout=3)),r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(h){g({timestamp:h.timestamp,coords:{latitude:h.latitude,longitude:h.longitude,heading:h.heading}})},onFailure:function(h){e(1==h.errorCode?{code:3,message:"Timeout"}:2==h.errorCode?{code:2,message:"Position Unavailable"}:{code:0,message:"Unknown Error: webOS-code"+errorCode})}})}):typeof device!=a&&typeof device.getServiceObject!=a&&(c=device.getServiceObject("Service.Location","ILocation"),b.getCurrentPosition=function(g,e,f){function i(l,k,j){4==k?e({message:"Position unavailable",code:2}):g({timestamp:null,coords:{latitude:j.ReturnValue.Latitude,longitude:j.ReturnValue.Longitude,altitude:j.ReturnValue.Altitude,heading:j.ReturnValue.Heading}})}var h=new Object;h.LocationInformationClass="BasicLocationInformation",c.ILocation.GetLocation(h,i)})}catch(d){return typeof console!=a&&console.log(d),!1}return null!=c},b}();!function($){$.extend($.fn,{validate:function(options){if(!this.length)return void(options&&options.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var validator=$.data(this[0],"validator");return validator?validator:(this.attr("novalidate","novalidate"),validator=new $.validator(options,this[0]),$.data(this[0],"validator",validator),validator.settings.onsubmit&&(this.validateDelegate(":submit","click",function(event){validator.settings.submitHandler&&(validator.submitButton=event.target),$(event.target).hasClass("cancel")&&(validator.cancelSubmit=!0),void 0!==$(event.target).attr("formnovalidate")&&(validator.cancelSubmit=!0)}),this.submit(function(event){function handle(){var hidden;return validator.settings.submitHandler?(validator.submitButton&&(hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)),validator.settings.submitHandler.call(validator,validator.currentForm,event),validator.submitButton&&hidden.remove(),!1):!0}return validator.settings.debug&&event.preventDefault(),validator.cancelSubmit?(validator.cancelSubmit=!1,handle()):validator.form()?validator.pendingRequest?(validator.formSubmitted=!0,!1):handle():(validator.focusInvalid(),!1)})),validator)},valid:function(){var valid,validator;return $(this[0]).is("form")?valid=this.validate().form():(valid=!0,validator=$(this[0].form).validate(),this.each(function(){valid=validator.element(this)&&valid})),valid},removeAttrs:function(attributes){var result={},$element=this;return $.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value),$element.removeAttr(value)}),result},rules:function(command,argument){var settings,staticRules,existingRules,data,param,filtered,element=this[0];if(command)switch(settings=$.data(element.form,"validator").settings,staticRules=settings.rules,existingRules=$.validator.staticRules(element),command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument)),delete existingRules.messages,staticRules[element.name]=existingRules,argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":return argument?(filtered={},$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method],delete existingRules[method],"required"===method&&$(element).removeAttr("aria-required")}),filtered):(delete staticRules[element.name],existingRules)}return data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element),data.required&&(param=data.required,delete data.required,data=$.extend({required:param},data),$(element).attr("aria-required","true")),data.remote&&(param=data.remote,delete data.remote,data=$.extend(data,{remote:param})),data}}),$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}}),$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options),this.currentForm=form,this.init()},$.validator.format=function(source,params){return 1===arguments.length?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(arguments.length>2&&params.constructor!==Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!==Array&&(params=[params]),$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})}),source)},$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element){this.lastActive=element,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(element)).hide())},onfocusout:function(element){this.checkable(element)||!(element.name in this.submitted)&&this.optional(element)||this.element(element)},onkeyup:function(element,event){(9!==event.which||""!==this.elementValue(element))&&(element.name in this.submitted||element===this.lastElement)&&this.element(element)},onclick:function(element){element.name in this.submitted?this.element(element):element.parentNode.name in this.submitted&&this.element(element.parentNode)},highlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).addClass(errorClass).removeClass(validClass):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).removeClass(errorClass).addClass(validClass):$(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;settings[eventType]&&!this.is(settings.ignore)&&settings[eventType].call(validator,this[0],event)}this.labelContainer=$(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm),this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var rules,groups=this.groups={};$.each(this.settings.groups,function(key,value){"string"==typeof value&&(value=value.split(/\s/)),$.each(value,function(index,name){groups[name]=key})}),rules=this.settings.rules,$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)}),$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate),this.settings.invalidHandler&&$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),result=!0;return this.lastElement=checkElement,void 0===checkElement?delete this.invalid[cleanElement.name]:(this.prepareElement(checkElement),this.currentElements=$(checkElement),result=this.check(checkElement)!==!1,result?delete this.invalid[checkElement.name]:this.invalid[checkElement.name]=!0),$(element).attr("aria-invalid",!result),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors),this.errorList=[];for(var name in errors)this.errorList.push({message:errors[name],element:this.findByName(name)[0]});this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var i,count=0;for(i in obj)count++;return count},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&1===$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in rulesCache||!validator.objectLength($(this).rules())?!1:(rulesCache[this.name]=!0,!0)})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=$([]),this.toHide=$([]),this.currentElements=$([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset(),this.toHide=this.errorsFor(element)},elementValue:function(element){var val,$element=$(element),type=$element.attr("type");return"radio"===type||"checkbox"===type?$("input[name='"+$element.attr("name")+"']:checked").val():(val=$element.val(),"string"==typeof val?val.replace(/\r/g,""):val)},check:function(element){element=this.validationTargetFor(this.clean(element));var result,method,rule,rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=!1,val=this.elementValue(element);for(method in rules){rule={method:method,parameters:rules[method]};try{if(result=$.validator.methods[method].call(this,val,element,rule.parameters),"dependency-mismatch"===result&&1===rulesCount){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,"pending"===result)return void(this.toHide=this.toHide.not(this.errorsFor(element)));if(!result)return this.formatAndAdd(element,rule),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e),e}}if(!dependencyMismatch)return this.objectLength(rules)&&this.successList.push(element),!0},customDataMessage:function(element,method){return $(element).data("msg"+method[0].toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i];return void 0},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||void 0,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;"function"==typeof message?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)),this.errorList.push({message:message,element:element,method:rule.method}),this.errorMap[element.name]=message,this.submitted[element.name]=message},addWrapper:function(toToggle){return this.settings.wrapper&&(toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))),toToggle},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++)error=this.errorList[i],this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass),this.showLabel(error.element,error.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var label=this.errorsFor(element);label.length?(label.removeClass(this.settings.validClass).addClass(this.settings.errorClass),label.html(message)):(label=$("<"+this.settings.errorElement+">").attr("for",this.idOrName(element)).addClass(this.settings.errorClass).html(message||""),this.settings.wrapper&&(label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(label).length||(this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element))),!message&&this.settings.success&&(label.text(""),"string"==typeof this.settings.success?label.addClass(this.settings.success):this.settings.success(label,element)),this.toShow=this.toShow.add(label)},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")===name})},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){return this.checkable(element)&&(element=this.findByName(element.name).not(this.settings.ignore)[0]),element},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{"boolean":function(param){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){this.pending[element.name]||(this.pendingRequest++,this.pending[element.name]=!0)},stopRequest:function(element,valid){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[element.name],valid&&0===this.pendingRequest&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.formSubmitted=!1):!valid&&0===this.pendingRequest&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor===String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},classRules:function(element){var rules={},classes=$(element).attr("class");return classes&&$.each(classes.split(" "),function(){this in $.validator.classRuleSettings&&$.extend(rules,$.validator.classRuleSettings[this])}),rules},attributeRules:function(element){var method,value,rules={},$element=$(element),type=element.getAttribute("type");for(method in $.validator.methods)"required"===method?(value=element.getAttribute(method),""===value&&(value=!0),value=!!value):value=$element.attr(method),/min|max/.test(method)&&(null===type||/number|range|text/.test(type))&&(value=Number(value)),value||0===value?rules[method]=value:type===method&&"range"!==type&&(rules[method]=!0);return rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)&&delete rules.maxlength,rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods)value=$element.data("rule"+method[0].toUpperCase()+method.substring(1).toLowerCase()),void 0!==value&&(rules[method]=value);return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");return validator.settings.rules&&(rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}),rules},normalizeRules:function(rules,element){return $.each(rules,function(prop,val){if(val===!1)return void delete rules[prop];if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element)}keepRule?rules[prop]=void 0!==val.param?val.param:!0:delete rules[prop]}}),$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter}),$.each(["minlength","maxlength"],function(){rules[this]&&(rules[this]=Number(rules[this]))}),$.each(["rangelength","range"],function(){var parts;rules[this]&&($.isArray(rules[this])?rules[this]=[Number(rules[this][0]),Number(rules[this][1])]:"string"==typeof rules[this]&&(parts=rules[this].split(/[\s,]+/),rules[this]=[Number(parts[0]),Number(parts[1])]))}),$.validator.autoCreateRanges&&(rules.min&&rules.max&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),rules.minlength&&rules.maxlength&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules},normalizeRule:function(data){if("string"==typeof data){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0}),data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method,$.validator.messages[name]=void 0!==message?message:$.validator.messages[name],method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";if("select"===element.nodeName.toLowerCase()){var val=$(element).val();return val&&val.length>0}return this.checkable(element)?this.getLength(value,element)>0:$.trim(value).length>0},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9 \-]+/.test(value))return!1;var n,cDigit,nCheck=0,nDigit=0,bEven=!1;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||param>=length},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||param>=value},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);return this.settings.onfocusout&&target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()}),value===target.val()},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var validator,data,previous=this.previousValue(element);return this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=this.settings.messages[element.name].remote,this.settings.messages[element.name].remote=previous.message,param="string"==typeof param&&{url:param}||param,previous.old===value?previous.valid:(previous.old=value,validator=this,this.startRequest(element),data={},data[element.name]=value,$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var errors,message,submitted,valid=response===!0||"true"===response;validator.settings.messages[element.name].remote=previous.originalMessage,valid?(submitted=validator.formSubmitted,validator.prepareElement(element),validator.formSubmitted=submitted,validator.successList.push(element),delete validator.invalid[element.name],validator.showErrors()):(errors={},message=response||validator.defaultMessage(element,"remote"),errors[element.name]=previous.message=$.isFunction(message)?message(value):message,validator.invalid[element.name]=!0,validator.showErrors(errors)),previous.valid=valid,validator.stopRequest(element,valid)}},param)),"pending")}}}),$.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."}}(jQuery),function($){var ajax,pendingRequests={};$.ajaxPrefilter?$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;"abort"===settings.mode&&(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=xhr)}):(ajax=$.ajax,$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;return"abort"===mode?(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=ajax.apply(this,arguments),pendingRequests[port]):ajax.apply(this,arguments)})}(jQuery),function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);return target.is(delegate)?handler.apply(target,arguments):void 0})}})}(jQuery),function($){function div(){return $("<div/>")}var abs=Math.abs,max=Math.max,min=Math.min,round=Math.round;$.imgAreaSelect=function(img,options){function viewX(x){return x+imgOfs.left-parOfs.left}function viewY(y){return y+imgOfs.top-parOfs.top}function selX(x){return x-imgOfs.left+parOfs.left}function selY(y){return y-imgOfs.top+parOfs.top}function evX(event){return event.pageX-parOfs.left}function evY(event){return event.pageY-parOfs.top}function getSelection(noScale){var sx=noScale||scaleX,sy=noScale||scaleY;return{x1:round(selection.x1*sx),y1:round(selection.y1*sy),x2:round(selection.x2*sx),y2:round(selection.y2*sy),width:round(selection.x2*sx)-round(selection.x1*sx),height:round(selection.y2*sy)-round(selection.y1*sy)}}function setSelection(x1,y1,x2,y2,noScale){var sx=noScale||scaleX,sy=noScale||scaleY;selection={x1:round(x1/sx||0),y1:round(y1/sy||0),x2:round(x2/sx||0),y2:round(y2/sy||0)},selection.width=selection.x2-selection.x1,selection.height=selection.y2-selection.y1}function adjust(){imgLoaded&&$img.width()&&(imgOfs={left:round($img.offset().left),top:round($img.offset().top)
},imgWidth=$img.innerWidth(),imgHeight=$img.innerHeight(),imgOfs.top+=$img.outerHeight()-imgHeight>>1,imgOfs.left+=$img.outerWidth()-imgWidth>>1,minWidth=round(options.minWidth/scaleX)||0,minHeight=round(options.minHeight/scaleY)||0,maxWidth=round(min(options.maxWidth/scaleX||1<<24,imgWidth)),maxHeight=round(min(options.maxHeight/scaleY||1<<24,imgHeight)),"1.3.2"!=$().jquery||"fixed"!=position||docElem.getBoundingClientRect||(imgOfs.top+=max(document.body.scrollTop,docElem.scrollTop),imgOfs.left+=max(document.body.scrollLeft,docElem.scrollLeft)),parOfs=/absolute|relative/.test($parent.css("position"))?{left:round($parent.offset().left)-$parent.scrollLeft(),top:round($parent.offset().top)-$parent.scrollTop()}:"fixed"==position?{left:$(document).scrollLeft(),top:$(document).scrollTop()}:{left:0,top:0},left=viewX(0),top=viewY(0),(selection.x2>imgWidth||selection.y2>imgHeight)&&doResize())}function update(resetKeyPress){if(shown){switch($box.css({left:viewX(selection.x1),top:viewY(selection.y1)}).add($area).width(w=selection.width).height(h=selection.height),$area.add($border).add($handles).css({left:0,top:0}),$border.width(max(w-$border.outerWidth()+$border.innerWidth(),0)).height(max(h-$border.outerHeight()+$border.innerHeight(),0)),$($outer[0]).css({left:left,top:top,width:selection.x1,height:imgHeight}),$($outer[1]).css({left:left+selection.x1,top:top,width:w,height:selection.y1}),$($outer[2]).css({left:left+selection.x2,top:top,width:imgWidth-selection.x2,height:imgHeight}),$($outer[3]).css({left:left+selection.x1,top:top+selection.y2,width:w,height:imgHeight-selection.y2}),w-=$handles.outerWidth(),h-=$handles.outerHeight(),$handles.length){case 8:$($handles[4]).css({left:w>>1}),$($handles[5]).css({left:w,top:h>>1}),$($handles[6]).css({left:w>>1,top:h}),$($handles[7]).css({top:h>>1});case 4:$handles.slice(1,3).css({left:w}),$handles.slice(2,4).css({top:h})}resetKeyPress!==!1&&($.imgAreaSelect.onKeyPress!=docKeyPress&&$(document).unbind($.imgAreaSelect.keyPress,$.imgAreaSelect.onKeyPress),options.keys&&$(document)[$.imgAreaSelect.keyPress]($.imgAreaSelect.onKeyPress=docKeyPress)),msie&&$border.outerWidth()-$border.innerWidth()==2&&($border.css("margin",0),setTimeout(function(){$border.css("margin","auto")},0))}}function doUpdate(resetKeyPress){adjust(),update(resetKeyPress),x1=viewX(selection.x1),y1=viewY(selection.y1),x2=viewX(selection.x2),y2=viewY(selection.y2)}function hide($elem,fn){options.fadeSpeed?$elem.fadeOut(options.fadeSpeed,fn):$elem.hide()}function areaMouseMove(event){var x=selX(evX(event))-selection.x1,y=selY(evY(event))-selection.y1;adjusted||(adjust(),adjusted=!0,$box.one("mouseout",function(){adjusted=!1})),resize="",options.resizable&&(y<=options.resizeMargin?resize="n":y>=selection.height-options.resizeMargin&&(resize="s"),x<=options.resizeMargin?resize+="w":x>=selection.width-options.resizeMargin&&(resize+="e")),$box.css("cursor",resize?resize+"-resize":options.movable?"move":""),$areaOpera&&$areaOpera.toggle()}function docMouseUp(event){$("body").css("cursor",""),(options.autoHide||selection.width*selection.height==0)&&hide($box.add($outer),function(){$(this).hide()}),$(document).unbind("mousemove",selectingMouseMove),$box.mousemove(areaMouseMove),options.onSelectEnd(img,getSelection())}function areaMouseDown(event){return 1!=event.which?!1:(adjust(),resize?($("body").css("cursor",resize+"-resize"),x1=viewX(selection[/w/.test(resize)?"x2":"x1"]),y1=viewY(selection[/n/.test(resize)?"y2":"y1"]),$(document).mousemove(selectingMouseMove).one("mouseup",docMouseUp),$box.unbind("mousemove",areaMouseMove)):options.movable?(startX=left+selection.x1-evX(event),startY=top+selection.y1-evY(event),$box.unbind("mousemove",areaMouseMove),$(document).mousemove(movingMouseMove).one("mouseup",function(){options.onSelectEnd(img,getSelection()),$(document).unbind("mousemove",movingMouseMove),$box.mousemove(areaMouseMove)})):$img.mousedown(event),!1)}function fixAspectRatio(xFirst){aspectRatio&&(xFirst?(x2=max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1))),y2=round(max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1)))),x2=round(x2)):(y2=max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1))),x2=round(max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1)))),y2=round(y2)))}function doResize(){x1=min(x1,left+imgWidth),y1=min(y1,top+imgHeight),abs(x2-x1)<minWidth&&(x2=x1-minWidth*(x1>x2||-1),left>x2?x1=left+minWidth:x2>left+imgWidth&&(x1=left+imgWidth-minWidth)),abs(y2-y1)<minHeight&&(y2=y1-minHeight*(y1>y2||-1),top>y2?y1=top+minHeight:y2>top+imgHeight&&(y1=top+imgHeight-minHeight)),x2=max(left,min(x2,left+imgWidth)),y2=max(top,min(y2,top+imgHeight)),fixAspectRatio(abs(x2-x1)<abs(y2-y1)*aspectRatio),abs(x2-x1)>maxWidth&&(x2=x1-maxWidth*(x1>x2||-1),fixAspectRatio()),abs(y2-y1)>maxHeight&&(y2=y1-maxHeight*(y1>y2||-1),fixAspectRatio(!0)),selection={x1:selX(min(x1,x2)),x2:selX(max(x1,x2)),y1:selY(min(y1,y2)),y2:selY(max(y1,y2)),width:abs(x2-x1),height:abs(y2-y1)},update(),options.onSelectChange(img,getSelection())}function selectingMouseMove(event){return x2=/w|e|^$/.test(resize)||aspectRatio?evX(event):viewX(selection.x2),y2=/n|s|^$/.test(resize)||aspectRatio?evY(event):viewY(selection.y2),doResize(),!1}function doMove(newX1,newY1){x2=(x1=newX1)+selection.width,y2=(y1=newY1)+selection.height,$.extend(selection,{x1:selX(x1),y1:selY(y1),x2:selX(x2),y2:selY(y2)}),update(),options.onSelectChange(img,getSelection())}function movingMouseMove(event){return x1=max(left,min(startX+evX(event),left+imgWidth-selection.width)),y1=max(top,min(startY+evY(event),top+imgHeight-selection.height)),doMove(x1,y1),event.preventDefault(),!1}function startSelection(){$(document).unbind("mousemove",startSelection),adjust(),x2=x1,y2=y1,doResize(),resize="",$outer.is(":visible")||$box.add($outer).hide().fadeIn(options.fadeSpeed||0),shown=!0,$(document).unbind("mouseup",cancelSelection).mousemove(selectingMouseMove).one("mouseup",docMouseUp),$box.unbind("mousemove",areaMouseMove),options.onSelectStart(img,getSelection())}function cancelSelection(){$(document).unbind("mousemove",startSelection).unbind("mouseup",cancelSelection),hide($box.add($outer)),setSelection(selX(x1),selY(y1),selX(x1),selY(y1)),this instanceof $.imgAreaSelect||(options.onSelectChange(img,getSelection()),options.onSelectEnd(img,getSelection()))}function imgMouseDown(event){return 1!=event.which||$outer.is(":animated")?!1:(adjust(),startX=x1=evX(event),startY=y1=evY(event),$(document).mousemove(startSelection).mouseup(cancelSelection),!1)}function windowResize(){doUpdate(!1)}function imgLoad(){imgLoaded=!0,setOptions(options=$.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},options)),$box.add($outer).css({visibility:""}),options.show&&(shown=!0,adjust(),update(),$box.add($outer).hide().fadeIn(options.fadeSpeed||0)),setTimeout(function(){options.onInit(img,getSelection())},0)}function styleOptions($elem,props){for(var option in props)void 0!==options[option]&&$elem.css(props[option],options[option])}function setOptions(newOptions){if(newOptions.parent&&($parent=$(newOptions.parent)).append($box.add($outer)),$.extend(options,newOptions),adjust(),null!=newOptions.handles){for($handles.remove(),$handles=$([]),i=newOptions.handles?"corners"==newOptions.handles?4:8:0;i--;)$handles=$handles.add(div());$handles.addClass(options.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:zIndex+1||1}),!parseInt($handles.css("width"))>=0&&$handles.width(5).height(5),(o=options.borderWidth)&&$handles.css({borderWidth:o,borderStyle:"solid"}),styleOptions($handles,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}for(scaleX=options.imageWidth/imgWidth||1,scaleY=options.imageHeight/imgHeight||1,null!=newOptions.x1&&(setSelection(newOptions.x1,newOptions.y1,newOptions.x2,newOptions.y2),newOptions.show=!newOptions.hide),newOptions.keys&&(options.keys=$.extend({shift:1,ctrl:"resize"},newOptions.keys)),$outer.addClass(options.classPrefix+"-outer"),$area.addClass(options.classPrefix+"-selection"),i=0;i++<4;)$($border[i-1]).addClass(options.classPrefix+"-border"+i);styleOptions($area,{selectionColor:"background-color",selectionOpacity:"opacity"}),styleOptions($border,{borderOpacity:"opacity",borderWidth:"border-width"}),styleOptions($outer,{outerColor:"background-color",outerOpacity:"opacity"}),(o=options.borderColor1)&&$($border[0]).css({borderStyle:"solid",borderColor:o}),(o=options.borderColor2)&&$($border[1]).css({borderStyle:"dashed",borderColor:o}),$box.append($area.add($border).add($areaOpera)).append($handles),msie&&((o=($outer.css("filter")||"").match(/opacity=(\d+)/))&&$outer.css("opacity",o[1]/100),(o=($border.css("filter")||"").match(/opacity=(\d+)/))&&$border.css("opacity",o[1]/100)),newOptions.hide?hide($box.add($outer)):newOptions.show&&imgLoaded&&(shown=!0,$box.add($outer).fadeIn(options.fadeSpeed||0),doUpdate()),aspectRatio=(d=(options.aspectRatio||"").split(/:/))[0]/d[1],$img.add($outer).unbind("mousedown",imgMouseDown),options.disable||options.enable===!1?($box.unbind("mousemove",areaMouseMove).unbind("mousedown",areaMouseDown),$(window).unbind("resize",windowResize)):((options.enable||options.disable===!1)&&((options.resizable||options.movable)&&$box.mousemove(areaMouseMove).mousedown(areaMouseDown),$(window).resize(windowResize)),options.persistent||$img.add($outer).mousedown(imgMouseDown)),options.enable=options.disable=void 0}var imgLoaded,$areaOpera,left,top,imgWidth,imgHeight,$parent,startX,startY,scaleX,scaleY,resize,minWidth,minHeight,maxWidth,maxHeight,aspectRatio,shown,x1,y1,x2,y2,$p,d,i,o,w,h,adjusted,$img=$(img),$box=div(),$area=div(),$border=div().add(div()).add(div()).add(div()),$outer=div().add(div()).add(div()).add(div()),$handles=$([]),imgOfs={left:0,top:0},parOfs={left:0,top:0},zIndex=0,position="absolute",selection={x1:0,y1:0,x2:0,y2:0,width:0,height:0},docElem=document.documentElement,ua=navigator.userAgent,docKeyPress=function(event){var d,t,k=options.keys,key=event.keyCode;if(d=isNaN(k.alt)||!event.altKey&&!event.originalEvent.altKey?!isNaN(k.ctrl)&&event.ctrlKey?k.ctrl:!isNaN(k.shift)&&event.shiftKey?k.shift:isNaN(k.arrows)?10:k.arrows:k.alt,"resize"==k.arrows||"resize"==k.shift&&event.shiftKey||"resize"==k.ctrl&&event.ctrlKey||"resize"==k.alt&&(event.altKey||event.originalEvent.altKey)){switch(key){case 37:d=-d;case 39:t=max(x1,x2),x1=min(x1,x2),x2=max(t+d,x1),fixAspectRatio();break;case 38:d=-d;case 40:t=max(y1,y2),y1=min(y1,y2),y2=max(t+d,y1),fixAspectRatio(!0);break;default:return}doResize()}else switch(x1=min(x1,x2),y1=min(y1,y2),key){case 37:doMove(max(x1-d,left),y1);break;case 38:doMove(x1,max(y1-d,top));break;case 39:doMove(x1+min(d,imgWidth-selX(x2)),y1);break;case 40:doMove(x1,y1+min(d,imgHeight-selY(y2)));break;default:return}return!1};this.remove=function(){setOptions({disable:!0}),$box.add($outer).remove()},this.getOptions=function(){return options},this.setOptions=setOptions,this.getSelection=getSelection,this.setSelection=setSelection,this.cancelSelection=cancelSelection,this.update=doUpdate;var msie=(/msie ([\w.]+)/i.exec(ua)||[])[1],opera=/opera/i.test(ua),safari=/webkit/i.test(ua)&&!/chrome/i.test(ua);for($p=$img;$p.length;)zIndex=max(zIndex,isNaN($p.css("z-index"))?zIndex:$p.css("z-index")),"fixed"==$p.css("position")&&(position="fixed"),$p=$p.parent(":not(body)");zIndex=options.zIndex||zIndex,msie&&$img.attr("unselectable","on"),$.imgAreaSelect.keyPress=msie||safari?"keydown":"keypress",opera&&($areaOpera=div().css({width:"100%",height:"100%",position:"absolute",zIndex:zIndex+2||2})),$box.add($outer).css({visibility:"hidden",position:position,overflow:"hidden",zIndex:zIndex||"0"}),$box.css({zIndex:zIndex+2||2}),$area.add($border).css({position:"absolute",fontSize:0}),img.complete||"complete"==img.readyState||!$img.is("img")?imgLoad():$img.one("load",imgLoad),!imgLoaded&&msie&&msie>=7&&(img.src=img.src)},$.fn.imgAreaSelect=function(options){return options=options||{},this.each(function(){$(this).data("imgAreaSelect")?options.remove?($(this).data("imgAreaSelect").remove(),$(this).removeData("imgAreaSelect")):$(this).data("imgAreaSelect").setOptions(options):options.remove||(void 0===options.enable&&void 0===options.disable&&(options.enable=!0),$(this).data("imgAreaSelect",new $.imgAreaSelect(this,options)))}),options.instance?$(this).data("imgAreaSelect"):this}}(jQuery),!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.io=e():"undefined"!=typeof global?global.io=e():"undefined"!=typeof self&&(self.io=e())}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports=require("./lib/")},{"./lib/":2}],2:[function(require,module,exports){function lookup(uri,opts){"object"==typeof uri&&(opts=uri,uri=void 0),opts=opts||{};var io,parsed=url(uri),source=parsed.source,id=parsed.id;return opts.forceNew||opts["force new connection"]||!1===opts.multiplex?(debug("ignoring socket cache for %s",source),io=Manager(source,opts)):(cache[id]||(debug("new io instance for %s",source),cache[id]=Manager(source,opts)),io=cache[id]),io.socket(parsed.path)}var url=require("./url"),parser=require("socket.io-parser"),Manager=require("./manager"),debug=require("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=require("./manager"),exports.Socket=require("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(require,module,exports){function Manager(uri,opts){return this instanceof Manager?(uri&&"object"==typeof uri&&(opts=uri,uri=void 0),opts=opts||{},opts.path=opts.path||"/socket.io",this.nsps={},this.subs=[],this.opts=opts,this.reconnection(opts.reconnection!==!1),this.reconnectionAttempts(opts.reconnectionAttempts||1/0),this.reconnectionDelay(opts.reconnectionDelay||1e3),this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3),this.timeout(null==opts.timeout?2e4:opts.timeout),this.readyState="closed",this.uri=uri,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,void this.open()):new Manager(uri,opts)}var eio=(require("./url"),require("engine.io-client")),Socket=require("./socket"),Emitter=require("component-emitter"),parser=require("socket.io-parser"),on=require("./on"),bind=require("component-bind"),debug=(require("object-component"),require("debug")("socket.io-client:manager"));module.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps)this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)},Emitter(Manager.prototype),Manager.prototype.reconnection=function(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(v){return arguments.length?(this._reconnectionAttempts=v,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(v){return arguments.length?(this._reconnectionDelay=v,this):this._reconnectionDelay},Manager.prototype.reconnectionDelayMax=function(v){return arguments.length?(this._reconnectionDelayMax=v,this):this._reconnectionDelayMax},Manager.prototype.timeout=function(v){return arguments.length?(this._timeout=v,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||(this.openReconnect=!0,this.reconnect())},Manager.prototype.open=Manager.prototype.connect=function(fn){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var socket=this.engine,self=this;this.readyState="opening";var openSub=on(socket,"open",function(){self.onopen(),fn&&fn()}),errorSub=on(socket,"error",function(data){if(debug("connect_error"),self.cleanup(),self.readyState="closed",self.emitAll("connect_error",data),fn){var err=new Error("Connection error");err.data=data,fn(err)}self.maybeReconnectOnOpen()});if(!1!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout),openSub.destroy(),socket.close(),socket.emit("error","timeout"),self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}return this.subs.push(openSub),this.subs.push(errorSub),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded"))),this.subs.push(on(socket,"error",bind(this,"onerror"))),this.subs.push(on(socket,"close",bind(this,"onclose")))},Manager.prototype.ondata=function(data){this.decoder.add(data)},Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)},Manager.prototype.onerror=function(err){debug("error",err),this.emitAll("error",err)},Manager.prototype.socket=function(nsp){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp),this.nsps[nsp]=socket;var self=this;socket.on("connect",function(){self.connected++})}return socket},Manager.prototype.destroy=function(socket){--this.connected||this.close()},Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;self.encoding?self.packetBuffer.push(packet):(self.encoding=!0,this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++)self.engine.write(encodedPackets[i]);self.encoding=!1,self.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}},Manager.prototype.cleanup=function(){for(var sub;sub=this.subs.shift();)sub.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},Manager.prototype.onclose=function(reason){debug("close"),this.cleanup(),this.readyState="closed",this.emit("close",reason),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting)return this;var self=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)debug("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var delay=this.attempts*this.reconnectionDelay();delay=Math.min(delay,this.reconnectionDelayMax()),debug("will wait %dms before reconnect attempt",delay),this.reconnecting=!0;var timer=setTimeout(function(){debug("attempting reconnect"),self.emitAll("reconnect_attempt",self.attempts),self.emitAll("reconnecting",self.attempts),self.open(function(err){err?(debug("reconnect attempt error"),self.reconnecting=!1,self.reconnect(),self.emitAll("reconnect_error",err.data)):(debug("reconnect success"),self.onreconnect())})},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}},Manager.prototype.onreconnect=function(){var attempt=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",attempt)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":11,"object-component":37,"socket.io-parser":40}],4:[function(require,module,exports){function on(obj,ev,fn){return obj.on(ev,fn),{destroy:function(){obj.removeListener(ev,fn)}}}module.exports=on},{}],5:[function(require,module,exports){function Socket(io,nsp){this.io=io,this.nsp=nsp,this.json=this,this.ids=0,this.acks={},this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}{var parser=require("socket.io-parser"),Emitter=require("component-emitter"),toArray=require("to-array"),on=require("./on"),bind=require("component-bind"),debug=require("debug")("socket.io-client:socket"),hasBin=require("has-binary-data");require("indexof")}module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},emit=Emitter.prototype.emit;Emitter(Socket.prototype),Socket.prototype.subEvents=function(){var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},Socket.prototype.send=function(){var args=toArray(arguments);return args.unshift("message"),this.emit.apply(this,args),this},Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev))return emit.apply(this,arguments),this;var args=toArray(arguments),parserType=parser.EVENT;hasBin(args)&&(parserType=parser.BINARY_EVENT);var packet={type:parserType,data:args};return"function"==typeof args[args.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=args.pop(),packet.id=this.ids++),this.connected?this.packet(packet):this.sendBuffer.push(packet),this},Socket.prototype.packet=function(packet){packet.nsp=this.nsp,this.io.packet(packet)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:parser.CONNECT})},Socket.prototype.onclose=function(reason){debug("close (%s)",reason),this.connected=!1,this.disconnected=!0,this.emit("disconnect",reason)},Socket.prototype.onpacket=function(packet){if(packet.nsp==this.nsp)switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data)}},Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args),null!=packet.id&&(debug("attaching ack callback to event"),args.push(this.ack(packet.id))),this.connected?emit.apply(this,args):this.receiveBuffer.push(args)},Socket.prototype.ack=function(id){var self=this,sent=!1;return function(){if(!sent){sent=!0;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}}},Socket.prototype.onack=function(packet){debug("calling ack %s with %j",packet.id,packet.data);var fn=this.acks[packet.id];fn.apply(this,packet.data),delete this.acks[packet.id]},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)emit.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected?(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary-data":32,indexof:36,"socket.io-parser":40,"to-array":43}],6:[function(require,module,exports){function url(uri,loc){var obj=uri,loc=loc||global.location;return null==uri&&(uri=loc.protocol+"//"+loc.hostname),"string"==typeof uri&&("/"==uri.charAt(0)&&"undefined"!=typeof loc&&(uri=loc.hostname+uri),/^(https?|wss?):\/\//.test(uri)||(debug("protocol-less url %s",uri),uri="undefined"!=typeof loc?loc.protocol+"//"+uri:"https://"+uri),debug("parse %s",uri),obj=parseuri(uri)),obj.port||(/^(http|ws)$/.test(obj.protocol)?obj.port="80":/^(http|ws)s$/.test(obj.protocol)&&(obj.port="443")),obj.path=obj.path||"/",obj.id=obj.protocol+"://"+obj.host+":"+obj.port,obj.href=obj.protocol+"://"+obj.host+(loc&&loc.port==obj.port?"":":"+obj.port),obj}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},parseuri=require("parseuri"),debug=require("debug")("socket.io-client:url");module.exports=url},{debug:9,parseuri:38}],7:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn&&(fn=obj[fn]),"function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],8:[function(require,module,exports){function Emitter(obj){return obj?mixin(obj):void 0}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;len>i;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],9:[function(require,module,exports){function debug(name){return debug.enabled(name)?function(fmt){fmt=coerce(fmt);var curr=new Date,ms=curr-(debug[name]||curr);debug[name]=curr,fmt=name+" "+fmt+" +"+debug.humanize(ms),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(val){return val instanceof Error?val.stack||val.message:val}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(name){try{localStorage.debug=name}catch(e){}for(var split=(name||"").split(/[\s,]+/),len=split.length,i=0;len>i;i++)name=split[i].replace("*",".*?"),"-"===name[0]?debug.skips.push(new RegExp("^"+name.substr(1)+"$")):debug.names.push(new RegExp("^"+name+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(ms){var sec=1e3,min=6e4,hour=60*min;return ms>=hour?(ms/hour).toFixed(1)+"h":ms>=min?(ms/min).toFixed(1)+"m":ms>=sec?(ms/sec|0)+"s":ms+"ms"},debug.enabled=function(name){for(var i=0,len=debug.skips.length;len>i;i++)if(debug.skips[i].test(name))return!1;for(var i=0,len=debug.names.length;len>i;i++)if(debug.names[i].test(name))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}},{}],10:[function(require,module,exports){function Emitter(obj){return obj?mixin(obj):void 0}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}var index=require("indexof");module.exports=Emitter,Emitter.prototype.on=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},fn._off=on,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;var i=index(callbacks,fn._off||fn);return~i&&callbacks.splice(i,1),this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;len>i;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{indexof:36}],11:[function(require,module,exports){module.exports=require("./lib/")},{"./lib/":12}],12:[function(require,module,exports){module.exports=require("./socket"),module.exports.parser=require("engine.io-parser")},{"./socket":13,"engine.io-parser":22}],13:[function(require,module,exports){function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);if(opts=opts||{},uri&&"object"==typeof uri&&(opts=uri,uri=null),uri&&(uri=parseuri(uri),opts.host=uri.host,opts.secure="https"==uri.protocol||"wss"==uri.protocol,opts.port=uri.port,uri.query&&(opts.query=uri.query)),this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol,opts.host){var pieces=opts.host.split(":");opts.hostname=pieces.shift(),pieces.length&&(opts.port=pieces.pop())}this.agent=opts.agent||!1,this.hostname=opts.hostname||(global.location?location.hostname:"localhost"),this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=opts.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==opts.upgrade,this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!opts.forceJSONP,this.forceBase64=!!opts.forceBase64,this.timestampParam=opts.timestampParam||"t",this.timestampRequests=opts.timestampRequests,this.transports=opts.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=opts.policyPort||843,this.rememberUpgrade=opts.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades}function clone(obj){var o={};for(var i in obj)obj.hasOwnProperty(i)&&(o[i]=obj[i]);return o}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},transports=require("./transports"),Emitter=require("component-emitter"),debug=require("debug")("engine.io-client:socket"),index=require("indexof"),parser=require("engine.io-parser"),parseuri=require("parseuri"),parsejson=require("parsejson"),parseqs=require("parseqs");module.exports=Socket,Socket.priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,Socket.Socket=Socket,Socket.Transport=require("./transport"),Socket.transports=require("./transports"),Socket.parser=require("engine.io-parser"),Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol,
query.transport=name,this.id&&(query.sid=this.id);var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return transport},Socket.prototype.open=function(){var transport;transport=this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket")?"websocket":this.transports[0],this.readyState="opening";var transport=this.createTransport(transport);transport.open(),this.setTransport(transport)},Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=transport,transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})},Socket.prototype.probe=function(name){function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}failed||(debug('probe transport "%s" opened',name),transport.send([{type:"ping",data:"probe"}]),transport.once("packet",function(msg){if(!failed)if("pong"==msg.type&&"probe"==msg.data)debug('probe transport "%s" pong',name),self.upgrading=!0,self.emit("upgrading",transport),Socket.priorWebsocketSuccess="websocket"==transport.name,debug('pausing current transport "%s"',self.transport.name),self.transport.pause(function(){failed||"closed"!=self.readyState&&"closing"!=self.readyState&&(debug("changing transport and sending upgrade packet"),cleanup(),self.setTransport(transport),transport.send([{type:"upgrade"}]),self.emit("upgrade",transport),transport=null,self.upgrading=!1,self.flush())});else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name,self.emit("upgradeError",err)}}))}function freezeTransport(){failed||(failed=!0,cleanup(),transport.close(),transport=null)}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name,freezeTransport(),debug('probe transport "%s" failed because of error: %s',name,err),self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){transport&&to.name!=transport.name&&(debug('"%s" works - aborting "%s"',to.name,transport.name),freezeTransport())}function cleanup(){transport.removeListener("open",onTransportOpen),transport.removeListener("error",onerror),transport.removeListener("close",onTransportClose),self.removeListener("close",onclose),self.removeListener("upgrading",onupgrade)}debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=!1,self=this;Socket.priorWebsocketSuccess=!1,transport.once("open",onTransportOpen),transport.once("error",onerror),transport.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),transport.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;l>i;i++)this.probe(this.upgrades[i])}},Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState)switch(debug('socket receive: type "%s", data "%s"',packet.type,packet.data),this.emit("packet",packet),this.emit("heartbeat"),packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();break;case"error":var err=new Error("server error");err.code=packet.data,this.emit("error",err);break;case"message":this.emit("data",packet.data),this.emit("message",packet.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(data){this.emit("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){"closed"!=self.readyState&&self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)},Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer),self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout),self.ping(),self.onHeartbeat(self.pingTimeout)},self.pingInterval)},Socket.prototype.ping=function(){this.sendPacket("ping")},Socket.prototype.onDrain=function(){for(var i=0;i<this.prevBufferLen;i++)this.callbackBuffer[i]&&this.callbackBuffer[i]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(msg,fn){return this.sendPacket("message",msg,fn),this},Socket.prototype.sendPacket=function(type,data,fn){var packet={type:type,data:data};this.emit("packetCreate",packet),this.writeBuffer.push(packet),this.callbackBuffer.push(fn),this.flush()},Socket.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),debug("socket closing - telling transport to close"),this.transport.close()),this},Socket.prototype.onError=function(err){debug("socket error %j",err),Socket.priorWebsocketSuccess=!1,this.emit("error",err),this.onClose("transport error",err)},Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){self.writeBuffer=[],self.callbackBuffer=[],self.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",reason,desc)}},Socket.prototype.filterUpgrades=function(upgrades){for(var filteredUpgrades=[],i=0,j=upgrades.length;j>i;i++)~index(this.transports,upgrades[i])&&filteredUpgrades.push(upgrades[i]);return filteredUpgrades}},{"./transport":14,"./transports":15,"component-emitter":8,debug:9,"engine.io-parser":22,indexof:36,parsejson:29,parseqs:30,parseuri:38}],14:[function(require,module,exports){function Transport(opts){this.path=opts.path,this.hostname=opts.hostname,this.port=opts.port,this.secure=opts.secure,this.query=opts.query,this.timestampParam=opts.timestampParam,this.timestampRequests=opts.timestampRequests,this.readyState="",this.agent=opts.agent||!1,this.socket=opts.socket}var parser=require("engine.io-parser"),Emitter=require("component-emitter");module.exports=Transport,Emitter(Transport.prototype),Transport.timestamps=0,Transport.prototype.onError=function(msg,desc){var err=new Error(msg);return err.type="TransportError",err.description=desc,this.emit("error",err),this},Transport.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},Transport.prototype.send=function(packets){if("open"!=this.readyState)throw new Error("Transport not open");this.write(packets)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(data){try{var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)}catch(e){e.data=data,this.onError("parser decode error",e)}},Transport.prototype.onPacket=function(packet){this.emit("packet",packet)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":22}],15:[function(require,module,exports){function polling(opts){var xhr,xd=!1;if(global.location){var isSSL="https:"==location.protocol,port=location.port;port||(port=isSSL?443:80),xd=opts.hostname!=location.hostname||port!=opts.port}return opts.xdomain=xd,xhr=new XMLHttpRequest(opts),"open"in xhr&&!opts.forceJSONP?new XHR(opts):new JSONP(opts)}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},XMLHttpRequest=require("xmlhttprequest"),XHR=require("./polling-xhr"),JSONP=require("./polling-jsonp"),websocket=require("./websocket");exports.polling=polling,exports.websocket=websocket},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(require,module,exports){function empty(){}function JSONPPolling(opts){Polling.call(this,opts),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){self.script&&(self.script.onerror=empty)})}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Polling=require("./polling"),inherit=require("component-inherit");module.exports=JSONPPolling;var callbacks,rNewline=/\n/g,rEscapedNewline=/\\n/g;inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var self=this,script=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.uri(),script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt),this.script=script;var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);isUAgecko&&setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe),document.body.removeChild(iframe)},100)},JSONPPolling.prototype.doWrite=function(data,fn){function complete(){initIframe(),fn()}function initIframe(){if(self.iframe)try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe"),iframe.name=self.iframeId,iframe.src="javascript:0"}iframe.id=self.iframeId,self.form.appendChild(iframe),self.iframe=iframe}var self=this;if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="eio_iframe_"+this.index;form.className="socketio",form.style.position="absolute",form.style.top="-1000px",form.style.left="-1000px",form.target=id,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),document.body.appendChild(form),this.form=form,this.area=area}this.form.action=this.uri(),initIframe(),data=data.replace(rEscapedNewline,"\\\n"),this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==self.iframe.readyState&&complete()}:this.iframe.onload=complete}},{"./polling":18,"component-inherit":21}],17:[function(require,module,exports){function empty(){}function XHR(opts){if(Polling.call(this,opts),global.location){var isSSL="https:"==location.protocol,port=location.port;port||(port=isSSL?443:80),this.xd=opts.hostname!=global.location.hostname||port!=opts.port}}function Request(opts){this.method=opts.method||"GET",this.uri=opts.uri,this.xd=!!opts.xd,this.async=!1!==opts.async,this.data=void 0!=opts.data?opts.data:null,this.agent=opts.agent,this.create(opts.isBinary,opts.supportsBinary)}function unloadHandler(){for(var i in Request.requests)Request.requests.hasOwnProperty(i)&&Request.requests[i].abort()}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},XMLHttpRequest=require("xmlhttprequest"),Polling=require("./polling"),Emitter=require("component-emitter"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling-xhr");module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(opts){return opts=opts||{},opts.uri=this.uri(),opts.xd=this.xd,opts.agent=this.agent||!1,opts.supportsBinary=this.supportsBinary,new Request(opts)},XHR.prototype.doWrite=function(data,fn){var isBinary="string"!=typeof data&&void 0!==data,req=this.request({method:"POST",data:data,isBinary:isBinary}),self=this;req.on("success",fn),req.on("error",function(err){self.onError("xhr post error",err)}),this.sendXhr=req},XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request(),self=this;req.on("data",function(data){self.onData(data)}),req.on("error",function(err){self.onError("xhr poll error",err)}),this.pollXhr=req},Emitter(Request.prototype),Request.prototype.create=function(isBinary,supportsBinary){var xhr=this.xhr=new XMLHttpRequest({agent:this.agent,xdomain:this.xd}),self=this;try{if(debug("xhr open %s: %s",this.method,this.uri),xhr.open(this.method,this.uri,this.async),supportsBinary&&(xhr.responseType="arraybuffer"),"POST"==this.method)try{isBinary?xhr.setRequestHeader("Content-type","application/octet-stream"):xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in xhr&&(xhr.withCredentials=!0),xhr.onreadystatechange=function(){var data;try{if(4!=xhr.readyState)return;if(200==xhr.status||1223==xhr.status){var contentType=xhr.getResponseHeader("Content-Type");data="application/octet-stream"===contentType?xhr.response:supportsBinary?"ok":xhr.responseText}else setTimeout(function(){self.onError(xhr.status)},0)}catch(e){self.onError(e)}null!=data&&self.onData(data)},debug("xhr data %s",this.data),xhr.send(this.data)}catch(e){return void setTimeout(function(){self.onError(e)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(data){this.emit("data",data),this.onSuccess()},Request.prototype.onError=function(err){this.emit("error",err),this.cleanup()},Request.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=empty;try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.abort=function(){this.cleanup()},global.document&&(Request.requestsCount=0,Request.requests={},global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler))},{"./polling":18,"component-emitter":8,"component-inherit":21,debug:9,xmlhttprequest:20}],18:[function(require,module,exports){function Polling(opts){var forceBase64=opts&&opts.forceBase64;(!hasXHR2||forceBase64)&&(this.supportsBinary=!1),Transport.call(this,opts)}var Transport=require("../transport"),parseqs=require("parseqs"),parser=require("engine.io-parser"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=require("xmlhttprequest"),xhr=new XMLHttpRequest({agent:this.agent,xdomain:!1});return null!=xhr.responseType}();inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(onPause){function pause(){debug("paused"),self.readyState="paused",onPause()}var self=this;if(this.readyState="pausing",this.polling||!this.writable){var total=0;this.polling&&(debug("we are currently polling - waiting to pause"),total++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--total||pause()})),this.writable||(debug("we are currently writing - waiting to pause"),total++,this.once("drain",function(){debug("pre-pause writing complete"),--total||pause()}))}else pause()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){return"opening"==self.readyState&&self.onOpen(),"close"==packet.type?(self.onClose(),!1):void self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function close(){debug("writing close packet"),self.write([{type:"close"}])}var self=this;"open"==this.readyState?(debug("transport open - closing"),close()):(debug("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(packets){var self=this;this.writable=!1;var callbackfn=function(){self.writable=!0,self.emit("drain")},self=this;parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})},Polling.prototype.uri=function(){var query=this.query||{},schema=this.secure?"https":"http",port="";return!1!==this.timestampRequests&&(query[this.timestampParam]=+new Date+"-"+Transport.timestamps++),this.supportsBinary||query.sid||(query.b64=1),query=parseqs.encode(query),this.port&&("https"==schema&&443!=this.port||"http"==schema&&80!=this.port)&&(port=":"+this.port),query.length&&(query="?"+query),schema+"://"+this.hostname+port+this.path+query}},{"../transport":14,"component-inherit":21,debug:9,"engine.io-parser":22,parseqs:30,xmlhttprequest:20}],19:[function(require,module,exports){function WS(opts){var forceBase64=opts&&opts.forceBase64;forceBase64&&(this.supportsBinary=!1),Transport.call(this,opts)}var Transport=require("../transport"),parser=require("engine.io-parser"),parseqs=require("parseqs"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:websocket"),WebSocket=require("ws");module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var uri=this.uri(),protocols=void 0,opts={agent:this.agent};this.ws=new WebSocket(uri,protocols,opts),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()},this.ws.onclose=function(){self.onClose()},this.ws.onmessage=function(ev){self.onData(ev.data)},this.ws.onerror=function(e){self.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}),WS.prototype.write=function(packets){function ondrain(){self.writable=!0,self.emit("drain")}var self=this;this.writable=!1;for(var i=0,l=packets.length;l>i;i++)parser.encodePacket(packets[i],this.supportsBinary,function(data){try{self.ws.send(data)}catch(e){debug("websocket closed before onclose event")}});setTimeout(ondrain,0)},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var query=this.query||{},schema=this.secure?"wss":"ws",port="";return this.port&&("wss"==schema&&443!=this.port||"ws"==schema&&80!=this.port)&&(port=":"+this.port),this.timestampRequests&&(query[this.timestampParam]=+new Date),this.supportsBinary||(query.b64=1),query=parseqs.encode(query),query.length&&(query="?"+query),schema+"://"+this.hostname+port+this.path+query},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)}},{"../transport":14,"component-inherit":21,debug:9,"engine.io-parser":22,parseqs:30,ws:31}],20:[function(require,module,exports){var hasCORS=require("has-cors");module.exports=function(opts){var xdomain=opts.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}if(!xdomain)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":34}],21:[function(require,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype,a.prototype=new fn,a.prototype.constructor=a}},{}],22:[function(require,module,exports){function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var data=packet.data,contentArray=new Uint8Array(data),resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++)resultBuffer[i+1]=contentArray[i];return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var fr=new FileReader;return fr.onload=function(){packet.data=fr.result,exports.encodePacket(packet,supportsBinary,callback)},fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);if(isAndroid)return encodeBlobAsArrayBuffer(packet,supportsBinary,callback);var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}function map(ary,each,done){for(var result=new Array(ary.length),next=after(ary.length,done),eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg,cb(error,result)})},i=0;i<ary.length;i++)eachWithIndex(i,ary[i],next)}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},keys=require("./keys"),sliceBuffer=require("arraybuffer.slice"),base64encoder=require("base64-arraybuffer"),after=require("after"),utf8=require("utf8"),isAndroid=navigator.userAgent.match(/Android/i);exports.protocol=2;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=require("blob");exports.encodePacket=function(packet,supportsBinary,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=!1);var data=void 0===packet.data?void 0:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer)return encodeArrayBuffer(packet,supportsBinary,callback);if(Blob&&data instanceof global.Blob)return encodeBlob(packet,supportsBinary,callback);var encoded=packets[packet.type];return void 0!==packet.data&&(encoded+=utf8.encode(String(packet.data))),callback(""+encoded)},exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof Blob){var fr=new FileReader;return fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)},fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){for(var typed=new Uint8Array(packet.data),basic=new Array(typed.length),i=0;i<typed.length;i++)basic[i]=typed[i];b64data=String.fromCharCode.apply(null,basic)}return message+=global.btoa(b64data),callback(message)},exports.decodePacket=function(data,binaryType){if("string"==typeof data||void 0===data){if("b"==data.charAt(0))return exports.decodeBase64Packet(data.substr(1),binaryType);data=utf8.decode(data);var type=data.charAt(0);return Number(type)==type&&packetslist[type]?data.length>1?{type:packetslist[type],data:data.substring(1)}:{type:packetslist[type]}:err}var asArray=new Uint8Array(data),type=asArray[0],rest=sliceBuffer(data,1);return Blob&&"blob"===binaryType&&(rest=new Blob([rest])),{type:packetslist[type],data:rest}},exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!global.ArrayBuffer)return{type:type,data:{base64:!0,data:msg.substr(1)}};var data=base64encoder.decode(msg.substr(1));return"blob"===binaryType&&Blob&&(data=new Blob([data])),{type:type,data:data}},exports.encodePayload=function(packets,supportsBinary,callback){function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,supportsBinary,function(message){doneCallback(null,setLengthHeader(message))})}return"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null),supportsBinary?Blob&&!isAndroid?exports.encodePayloadAsBlob(packets,callback):exports.encodePayloadAsArrayBuffer(packets,callback):packets.length?void map(packets,encodeOne,function(err,results){return callback(results.join(""))}):callback("0:")},exports.decodePayload=function(data,binaryType,callback){if("string"!=typeof data)return exports.decodePayloadAsBinary(data,binaryType,callback);"function"==typeof binaryType&&(callback=binaryType,binaryType=null);var packet;if(""==data)return callback(err,0,1);for(var n,msg,length="",i=0,l=data.length;l>i;i++){var chr=data.charAt(i);if(":"!=chr)length+=chr;else{if(""==length||length!=(n=Number(length)))return callback(err,0,1);if(msg=data.substr(i+1,n),length!=msg.length)return callback(err,0,1);if(msg.length){if(packet=exports.decodePacket(msg,binaryType),err.type==packet.type&&err.data==packet.data)return callback(err,0,1);var ret=callback(packet,i+n,l);if(!1===ret)return}i+=n,length=""}}return""!=length?callback(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,function(data){return doneCallback(null,data)})}return packets.length?void map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;return len="string"==typeof p?p.length:p.byteLength,acc+len.toString().length+len+2},0),resultArray=new Uint8Array(totalLength),bufferIndex=0;return encodedPackets.forEach(function(p){var isString="string"==typeof p,ab=p;if(isString){for(var view=new Uint8Array(p.length),i=0;i<p.length;i++)view[i]=p.charCodeAt(i);ab=view.buffer}isString?resultArray[bufferIndex++]=0:resultArray[bufferIndex++]=1;for(var lenStr=ab.byteLength.toString(),i=0;i<lenStr.length;i++)resultArray[bufferIndex++]=parseInt(lenStr[i]);resultArray[bufferIndex++]=255;for(var view=new Uint8Array(ab),i=0;i<view.length;i++)resultArray[bufferIndex++]=view[i]}),callback(resultArray.buffer)}):callback(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,function(encoded){var binaryIdentifier=new Uint8Array(1);if(binaryIdentifier[0]=1,"string"==typeof encoded){for(var view=new Uint8Array(encoded.length),i=0;i<encoded.length;i++)view[i]=encoded.charCodeAt(i);encoded=view.buffer,binaryIdentifier[0]=0}for(var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size,lenStr=len.toString(),lengthAry=new Uint8Array(lenStr.length+1),i=0;i<lenStr.length;i++)lengthAry[i]=parseInt(lenStr[i]);if(lengthAry[lenStr.length]=255,Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})},exports.decodePayloadAsBinary=function(data,binaryType,callback){"function"==typeof binaryType&&(callback=binaryType,binaryType=null);for(var bufferTail=data,buffers=[];bufferTail.byteLength>0;){for(var tailArray=new Uint8Array(bufferTail),isString=0===tailArray[0],msgLength="",i=1;255!=tailArray[i];i++)msgLength+=tailArray[i];bufferTail=sliceBuffer(bufferTail,2+msgLength.length),msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString)try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++)msg+=String.fromCharCode(typed[i])}buffers.push(msg),bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType),i,total)})}},{"./keys":23,after:24,"arraybuffer.slice":25,"base64-arraybuffer":26,blob:27,utf8:28}],23:[function(require,module,exports){module.exports=Object.keys||function(obj){var arr=[],has=Object.prototype.hasOwnProperty;for(var i in obj)has.call(obj,i)&&arr.push(i);return arr}},{}],24:[function(require,module,exports){function after(count,callback,err_cb){function proxy(err,result){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,err?(bail=!0,callback(err),callback=err_cb):0!==proxy.count||bail||callback(null,result)}var bail=!1;return err_cb=err_cb||noop,proxy.count=count,0===count?callback():proxy}function noop(){}module.exports=after},{}],25:[function(require,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;if(start=start||0,end=end||bytes,arraybuffer.slice)return arraybuffer.slice(start,end);if(0>start&&(start+=bytes),0>end&&(end+=bytes),end>bytes&&(end=bytes),start>=bytes||start>=end||0===bytes)return new ArrayBuffer(0);for(var abv=new Uint8Array(arraybuffer),result=new Uint8Array(end-start),i=start,ii=0;end>i;i++,ii++)result[ii]=abv[i];return result.buffer}},{}],26:[function(require,module,exports){!function(chars){"use strict";exports.encode=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="";for(i=0;len>i;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3===2?base64=base64.substring(0,base64.length-1)+"=":len%3===1&&(base64=base64.substring(0,base64.length-2)+"=="),base64},exports.decode=function(base64){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;len>i;i+=4)encoded1=chars.indexOf(base64[i]),encoded2=chars.indexOf(base64[i+1]),encoded3=chars.indexOf(base64[i+2]),encoded4=chars.indexOf(base64[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arraybuffer}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],27:[function(require,module,exports){function BlobBuilderConstructor(ary,options){options=options||{};for(var bb=new BlobBuilder,i=0;i<ary.length;i++)bb.append(ary[i]);return options.type?bb.getBlob(options.type):bb.getBlob()}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{var b=new Blob(["hi"]);return 2==b.size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;

module.exports=function(){return blobSupported?global.Blob:blobBuilderSupported?BlobBuilderConstructor:void 0}()},{}],28:[function(require,module,exports){var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};!function(root){function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;length>counter;)value=string.charCodeAt(counter++),value>=55296&&56319>=value&&length>counter?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){for(var value,length=array.length,index=-1,output="";++index<length;)value=array[index],value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value);return output}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)}function utf8encode(string){for(var codePoint,codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)codePoint=codePoints[index],byteString+=encodeCodePoint(codePoint);return byteString}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];if(byteIndex++,128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1,byte2,byte3,byte4,codePoint;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1;if(192==(224&byte1)){var byte2=readContinuationByte();if(codePoint=(31&byte1)<<6|byte2,codePoint>=128)return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){if(byte2=readContinuationByte(),byte3=readContinuationByte(),codePoint=(15&byte1)<<12|byte2<<6|byte3,codePoint>=2048)return codePoint;throw Error("Invalid continuation byte")}if(240==(248&byte1)&&(byte2=readContinuationByte(),byte3=readContinuationByte(),byte4=readContinuationByte(),codePoint=(15&byte1)<<18|byte2<<12|byte3<<6|byte4,codePoint>=65536&&1114111>=codePoint))return codePoint;throw Error("Invalid UTF-8 detected")}function utf8decode(byteString){byteArray=ucs2decode(byteString),byteCount=byteArray.length,byteIndex=0;for(var tmp,codePoints=[];(tmp=decodeSymbol())!==!1;)codePoints.push(tmp);return ucs2encode(codePoints)}var freeExports="object"==typeof exports&&exports,freeModule="object"==typeof module&&module&&module.exports==freeExports&&module,freeGlobal="object"==typeof global&&global;(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)&&(root=freeGlobal);var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode,utf8={version:"2.0.0",encode:utf8encode,decode:utf8decode};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return utf8});else if(freeExports&&!freeExports.nodeType)if(freeModule)freeModule.exports=utf8;else{var object={},hasOwnProperty=object.hasOwnProperty;for(var key in utf8)hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}else root.utf8=utf8}(this)},{}],29:[function(require,module,exports){var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function(data){return"string"==typeof data&&data?(data=data.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void 0):null}},{}],30:[function(require,module,exports){exports.encode=function(obj){var str="";for(var i in obj)obj.hasOwnProperty(i)&&(str.length&&(str+="&"),str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return str},exports.decode=function(qs){for(var qry={},pairs=qs.split("&"),i=0,l=pairs.length;l>i;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],31:[function(require,module,exports){function ws(uri,protocols,opts){var instance;return instance=protocols?new WebSocket(uri,protocols):new WebSocket(uri)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype)},{}],32:[function(require,module,exports){function hasBinary(data){function recursiveCheckForBinary(obj){if(!obj)return!1;if(global.Buffer&&Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File)return!0;if(isArray(obj)){for(var i=0;i<obj.length;i++)if(recursiveCheckForBinary(obj[i]))return!0}else if(obj&&"object"==typeof obj){obj.toJSON&&(obj=obj.toJSON());for(var key in obj)if(recursiveCheckForBinary(obj[key]))return!0}return!1}return recursiveCheckForBinary(data)}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},isArray=require("isarray");module.exports=hasBinary},{isarray:33}],33:[function(require,module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}},{}],34:[function(require,module,exports){var global=require("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=!1}},{global:35}],35:[function(require,module,exports){module.exports=function(){return this}()},{}],36:[function(require,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},{}],37:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj)has.call(obj,key)&&keys.push(key);return keys},exports.values=function(obj){var vals=[];for(var key in obj)has.call(obj,key)&&vals.push(obj[key]);return vals},exports.merge=function(a,b){for(var key in b)has.call(b,key)&&(a[key]=b[key]);return a},exports.length=function(obj){return exports.keys(obj).length},exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],38:[function(require,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(str){for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return uri}},{}],39:[function(require,module,exports){function isBuf(obj){return global.Buffer&&Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},isArray=require("isarray");exports.deconstructPacket=function(packet){function deconstructBinPackRecursive(data){if(!data)return data;if(global.Buffer&&Buffer.isBuffer(data)||global.ArrayBuffer&&data instanceof ArrayBuffer){var placeholder={_placeholder:!0,num:buffers.length};return buffers.push(data),placeholder}if(isArray(data)){for(var newData=new Array(data.length),i=0;i<data.length;i++)newData[i]=deconstructBinPackRecursive(data[i]);return newData}if("object"==typeof data&&!(data instanceof Date)){var newData={};for(var key in data)newData[key]=deconstructBinPackRecursive(data[key]);return newData}return data}var buffers=[],packetData=packet.data,pack=packet;return pack.data=deconstructBinPackRecursive(packetData),pack.attachments=buffers.length,{packet:pack,buffers:buffers}},exports.reconstructPacket=function(packet,buffers){function reconstructBinPackRecursive(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}if(isArray(data)){for(var i=0;i<data.length;i++)data[i]=reconstructBinPackRecursive(data[i]);return data}if(data&&"object"==typeof data){for(var key in data)data[key]=reconstructBinPackRecursive(data[key]);return data}return data}return packet.data=reconstructBinPackRecursive(packet.data),packet.attachments=void 0,packet},exports.removeBlobs=function(data,callback){function removeBlobsRecursive(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){containingObject?containingObject[curKey]=this.result:bloblessData=this.result,--pendingBlobs||callback(bloblessData)},fileReader.readAsArrayBuffer(obj)}if(isArray(obj))for(var i=0;i<obj.length;i++)removeBlobsRecursive(obj[i],i,obj);else if(obj&&"object"==typeof obj&&!isBuf(obj))for(var key in obj)removeBlobsRecursive(obj[key],key,obj)}var pendingBlobs=0,bloblessData=data;removeBlobsRecursive(bloblessData),pendingBlobs||callback(bloblessData)}},{isarray:41}],40:[function(require,module,exports){function Encoder(){}function encodeAsString(obj){var str="",nsp=!1;return str+=obj.type,(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type)&&(str+=obj.attachments,str+="-"),obj.nsp&&"/"!=obj.nsp&&(nsp=!0,str+=obj.nsp),null!=obj.id&&(nsp&&(str+=",",nsp=!1),str+=obj.id),null!=obj.data&&(nsp&&(str+=","),str+=json.stringify(obj.data)),debug("encoded %j as %s",obj,str),str}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData),pack=encodeAsString(deconstruction.packet),buffers=deconstruction.buffers;buffers.unshift(pack),callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}function decodeString(str){var p={},i=0;if(p.type=Number(str.charAt(0)),null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){for(p.attachments="";"-"!=str.charAt(++i);)p.attachments+=str.charAt(i);p.attachments=Number(p.attachments)}if("/"==str.charAt(i+1))for(p.nsp="";++i;){var c=str.charAt(i);if(","==c)break;if(p.nsp+=c,i+1==str.length)break}else p.nsp="/";var next=str.charAt(i+1);if(""!=next&&Number(next)==next){for(p.id="";++i;){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}if(p.id+=str.charAt(i),i+1==str.length)break}p.id=Number(p.id)}if(str.charAt(++i))try{p.data=json.parse(str.substr(i))}catch(e){return error()}return debug("decoded %s as %j",str,p),p}function BinaryReconstructor(packet){this.reconPack=packet,this.buffers=[]}function error(data){return{type:exports.ERROR,data:"parser error"}}var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},debug=require("debug")("socket.io-parser"),json=require("json3"),Emitter=(require("isarray"),require("emitter")),binary=require("./binary");exports.protocol=3,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,Encoder.prototype.encode=function(obj,callback){if(debug("encoding packet %j",obj),exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type)encodeAsBinary(obj,callback);else{var encoding=encodeAsString(obj);callback([encoding])}},exports.Decoder=Decoder,Emitter(Decoder.prototype),Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj)packet=decodeString(obj),exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type?(this.reconstructor=new BinaryReconstructor(packet),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",packet)):this.emit("decoded",packet);else{if(!(global.Buffer&&Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||obj.base64))throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");packet=this.reconstructor.takeBinaryData(obj),packet&&(this.reconstructor=null,this.emit("decoded",packet))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(binData){if(this.buffers.push(binData),this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),packet}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,debug:9,emitter:10,isarray:41,json3:42}],41:[function(require,module,exports){module.exports=require(33)},{}],42:[function(require,module,exports){!function(window){function has(name){if(has[name]!==undef)return has[name];var isSupported;if("bug-string-char-index"==name)isSupported="a"!="a"[0];else if("json"==name)isSupported=has("json-stringify")&&has("json-parse");else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==name){var stringify=JSON3.stringify,stringifySupported="function"==typeof stringify&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported="0"===stringify(0)&&"0"===stringify(new Number)&&'""'==stringify(new String)&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&"1"===stringify(value)&&"[1]"==stringify([value])&&"[null]"==stringify([undef])&&"null"==stringify(null)&&"[null,null,null]"==stringify([undef,getClass,null])&&stringify({a:[value,!0,!1,null,"\x00\b\n\f\r	"]})==serialized&&"1"===stringify(null,value)&&"[\n 1,\n 2\n]"==stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==stringify(new Date(-1))}catch(exception){stringifySupported=!1}}isSupported=stringifySupported}if("json-parse"==name){var parse=JSON3.parse;if("function"==typeof parse)try{if(0===parse("0")&&!parse(!1)){value=parse(serialized);var parseSupported=5==value.a.length&&1===value.a[0];if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("01")}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("1.")}catch(exception){}}}}catch(exception){parseSupported=!1}isSupported=parseSupported}}return has[name]=!!isSupported}var isProperty,forEach,undef,getClass={}.toString,isLoader="function"==typeof define&&define.amd,nativeJSON="object"==typeof JSON&&JSON,JSON3="object"==typeof exports&&exports&&!exports.nodeType&&exports;JSON3&&nativeJSON?(JSON3.stringify=nativeJSON.stringify,JSON3.parse=nativeJSON.parse):JSON3=window.JSON=nativeJSON||{};var isExtended=new Date(-0xc782b5b800cec);try{isExtended=-109252==isExtended.getUTCFullYear()&&0===isExtended.getUTCMonth()&&1===isExtended.getUTCDate()&&10==isExtended.getUTCHours()&&37==isExtended.getUTCMinutes()&&6==isExtended.getUTCSeconds()&&708==isExtended.getUTCMilliseconds()}catch(exception){}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]",charIndexBuggy=has("bug-string-char-index");if(!isExtended)var floor=Math.floor,Months=[0,31,59,90,120,151,181,212,243,273,304,334],getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)};(isProperty={}.hasOwnProperty)||(isProperty=function(property){var constructor,members={};return(members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass?isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);return this.__proto__=original,result}:(constructor=members.constructor,isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}),members=null,isProperty.call(this,property)});var PrimitiveTypes={"boolean":1,number:1,string:1,undefined:1},isHostType=function(object,property){var type=typeof object[property];return"object"==type?!!object[property]:!PrimitiveTypes[type]};if(forEach=function(object,callback){var Properties,members,property,size=0;(Properties=function(){this.valueOf=0}).prototype.valueOf=0,members=new Properties;for(property in members)isProperty.call(members,property)&&size++;return Properties=members=null,size?forEach=2==size?function(object,callback){var property,members={},isFunction=getClass.call(object)==functionClass;for(property in object)isFunction&&"prototype"==property||isProperty.call(members,property)||!(members[property]=1)||!isProperty.call(object,property)||callback(property)}:function(object,callback){var property,isConstructor,isFunction=getClass.call(object)==functionClass;for(property in object)isFunction&&"prototype"==property||!isProperty.call(object,property)||(isConstructor="constructor"===property)||callback(property);(isConstructor||isProperty.call(object,property="constructor"))&&callback(property)}:(members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],forEach=function(object,callback){var property,length,isFunction=getClass.call(object)==functionClass,hasProperty=!isFunction&&"function"!=typeof object.constructor&&isHostType(object,"hasOwnProperty")?object.hasOwnProperty:isProperty;for(property in object)isFunction&&"prototype"==property||!hasProperty.call(object,property)||callback(property);for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}),forEach(object,callback)},!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},leadingZeroes="000000",toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)},unicodePrefix="\\u00",quote=function(value){var symbols,result='"',index=0,length=value.length,isLarge=length>10&&charIndexBuggy;for(isLarge&&(symbols=value.split(""));length>index;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(32>charCode){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=isLarge?symbols[index]:charIndexBuggy?value.charAt(index):value[index]}}return result+'"'},serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if("object"==typeof value&&value)if(className=getClass.call(value),className!=dateClass||isProperty.call(value,"toJSON"))"function"==typeof value.toJSON&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))&&(value=value.toJSON(property));else if(value>-1/0&&1/0>value){if(getDay){for(date=floor(value/864e5),year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month),time=(value%864e5+864e5)%864e5,hours=floor(time/36e5)%24,minutes=floor(time/6e4)%60,seconds=floor(time/1e3)%60,milliseconds=time%1e3}else year=value.getUTCFullYear(),month=value.getUTCMonth(),date=value.getUTCDate(),hours=value.getUTCHours(),minutes=value.getUTCMinutes(),seconds=value.getUTCSeconds(),milliseconds=value.getUTCMilliseconds();value=(0>=year||year>=1e4?(0>year?"-":"+")+toPaddedString(6,0>year?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else value=null;if(callback&&(value=callback.call(object,property,value)),null===value)return"null";if(className=getClass.call(value),className==booleanClass)return""+value;if(className==numberClass)return value>-1/0&&1/0>value?""+value:"null";if(className==stringClass)return quote(""+value);if("object"==typeof value){for(length=stack.length;length--;)if(stack[length]===value)throw TypeError();if(stack.push(value),results=[],prefix=indentation,indentation+=whitespace,className==arrayClass){for(index=0,length=value.length;length>index;index++)element=serialize(index,value,callback,properties,whitespace,indentation,stack),results.push(element===undef?"null":element);result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);element!==undef&&results.push(quote(property)+":"+(whitespace?" ":"")+element)}),result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}";return stack.pop(),result}};JSON3.stringify=function(source,filter,width){var whitespace,callback,properties,className;if("function"==typeof filter||"object"==typeof filter&&filter)if((className=getClass.call(filter))==functionClass)callback=filter;else if(className==arrayClass){properties={};for(var value,index=0,length=filter.length;length>index;value=filter[index++],className=getClass.call(value),(className==stringClass||className==numberClass)&&(properties[value]=1));}if(width)if((className=getClass.call(width))==numberClass){if((width-=width%1)>0)for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}else className==stringClass&&(whitespace=width.length<=10?width:width.slice(0,10));return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var Index,Source,fromCharCode=String.fromCharCode,Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},abort=function(){throw Index=Source=null,SyntaxError()},lex=function(){for(var value,begin,position,isSigned,charCode,source=Source,length=source.length;length>Index;)switch(charCode=source.charCodeAt(Index)){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:return value=charIndexBuggy?source.charAt(Index):source[Index],Index++,value;case 34:for(value="@",Index++;length>Index;)if(charCode=source.charCodeAt(Index),32>charCode)abort();else if(92==charCode)switch(charCode=source.charCodeAt(++Index)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode],Index++;break;case 117:for(begin=++Index,position=Index+4;position>Index;Index++)charCode=source.charCodeAt(Index),charCode>=48&&57>=charCode||charCode>=97&&102>=charCode||charCode>=65&&70>=charCode||abort();value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}else{if(34==charCode)break;for(charCode=source.charCodeAt(Index),begin=Index;charCode>=32&&92!=charCode&&34!=charCode;)charCode=source.charCodeAt(++Index);value+=source.slice(begin,Index)}if(34==source.charCodeAt(Index))return Index++,value;abort();default:if(begin=Index,45==charCode&&(isSigned=!0,charCode=source.charCodeAt(++Index)),charCode>=48&&57>=charCode){for(48==charCode&&(charCode=source.charCodeAt(Index+1),charCode>=48&&57>=charCode)&&abort(),isSigned=!1;length>Index&&(charCode=source.charCodeAt(Index),charCode>=48&&57>=charCode);Index++);if(46==source.charCodeAt(Index)){for(position=++Index;length>position&&(charCode=source.charCodeAt(position),charCode>=48&&57>=charCode);position++);position==Index&&abort(),Index=position}if(charCode=source.charCodeAt(Index),101==charCode||69==charCode){for(charCode=source.charCodeAt(++Index),(43==charCode||45==charCode)&&Index++,position=Index;length>position&&(charCode=source.charCodeAt(position),charCode>=48&&57>=charCode);position++);position==Index&&abort(),Index=position}return+source.slice(begin,Index)}if(isSigned&&abort(),"true"==source.slice(Index,Index+4))return Index+=4,!0;if("false"==source.slice(Index,Index+5))return Index+=5,!1;if("null"==source.slice(Index,Index+4))return Index+=4,null;abort()}return"$"},get=function(value){var results,hasMembers;if("$"==value&&abort(),"string"==typeof value){if("@"==(charIndexBuggy?value.charAt(0):value[0]))return value.slice(1);if("["==value){for(results=[];value=lex(),"]"!=value;hasMembers||(hasMembers=!0))hasMembers&&(","==value?(value=lex(),"]"==value&&abort()):abort()),","==value&&abort(),results.push(get(value));return results}if("{"==value){for(results={};value=lex(),"}"!=value;hasMembers||(hasMembers=!0))hasMembers&&(","==value?(value=lex(),"}"==value&&abort()):abort()),(","==value||"string"!=typeof value||"@"!=(charIndexBuggy?value.charAt(0):value[0])||":"!=lex())&&abort(),results[value.slice(1)]=get(lex());return results}abort()}return value},update=function(source,property,callback){var element=walk(source,property,callback);element===undef?delete source[property]:source[property]=element},walk=function(source,property,callback){var length,value=source[property];if("object"==typeof value&&value)if(getClass.call(value)==arrayClass)for(length=value.length;length--;)update(value,length,callback);else forEach(value,function(property){update(value,property,callback)});return callback.call(source,property,value)};JSON3.parse=function(source,callback){var result,value;return Index=0,Source=""+source,result=get(lex()),"$"!=lex()&&abort(),Index=Source=null,callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}isLoader&&define(function(){return JSON3})}(this)},{}],43:[function(require,module,exports){function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++)array[i-index]=list[i];return array}module.exports=toArray},{}]},{},[1])(1)}),function($){var mfp,_prevStatus,_body,_document,_prevContentType,_wrapClasses,_currPopupType,CLOSE_EVENT="Close",BEFORE_CLOSE_EVENT="BeforeClose",AFTER_CLOSE_EVENT="AfterClose",BEFORE_APPEND_EVENT="BeforeAppend",MARKUP_PARSE_EVENT="MarkupParse",OPEN_EVENT="Open",CHANGE_EVENT="Change",NS="mfp",EVENT_NS="."+NS,READY_CLASS="mfp-ready",REMOVING_CLASS="mfp-removing",PREVENT_CLOSE_CLASS="mfp-prevent-close",MagnificPopup=function(){},_isJQ=!!window.jQuery,_window=$(window),_mfpOn=function(name,f){mfp.ev.on(NS+name+EVENT_NS,f)},_getEl=function(className,appendTo,html,raw){var el=document.createElement("div");return el.className="mfp-"+className,html&&(el.innerHTML=html),raw?appendTo&&appendTo.appendChild(el):(el=$(el),appendTo&&el.appendTo(appendTo)),el},_mfpTrigger=function(e,data){mfp.ev.triggerHandler(NS+e,data),mfp.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),mfp.st.callbacks[e]&&mfp.st.callbacks[e].apply(mfp,$.isArray(data)?data:[data]))},_getCloseBtn=function(type){return type===_currPopupType&&mfp.currTemplate.closeBtn||(mfp.currTemplate.closeBtn=$(mfp.st.closeMarkup.replace("%title%",mfp.st.tClose)),_currPopupType=type),mfp.currTemplate.closeBtn},_checkInstance=function(){$.haloMagnificPopup.instance||(mfp=new MagnificPopup,mfp.init(),$.haloMagnificPopup.instance=mfp)},supportsTransitions=function(){var s=document.createElement("p").style,v=["ms","O","Moz","Webkit"];if(void 0!==s.transition)return!0;for(;v.length;)if(v.pop()+"Transition"in s)return!0;return!1};MagnificPopup.prototype={constructor:MagnificPopup,init:function(){var appVersion=navigator.appVersion;mfp.isIE7=-1!==appVersion.indexOf("MSIE 7."),mfp.isIE8=-1!==appVersion.indexOf("MSIE 8."),mfp.isLowIE=mfp.isIE7||mfp.isIE8,mfp.isAndroid=/android/gi.test(appVersion),mfp.isIOS=/iphone|ipad|ipod/gi.test(appVersion),mfp.supportsTransition=supportsTransitions(),mfp.probablyMobile=mfp.isAndroid||mfp.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),_document=$(document),mfp.popupsCache={}},open:function(data){_body||(_body=$(document.body));var i;if(data.isObj===!1){mfp.items=data.items.toArray(),mfp.index=0;var item,items=data.items;for(i=0;i<items.length;i++)if(item=items[i],item.parsed&&(item=item.el[0]),item===data.el[0]){mfp.index=i;break}}else mfp.items=$.isArray(data.items)?data.items:[data.items],mfp.index=data.index||0;if(mfp.isOpen)return void mfp.updateItemHTML();mfp.types=[],_wrapClasses="",data.mainEl&&data.mainEl.length?mfp.ev=data.mainEl.eq(0):mfp.ev=_document,data.key?(mfp.popupsCache[data.key]||(mfp.popupsCache[data.key]={}),mfp.currTemplate=mfp.popupsCache[data.key]):mfp.currTemplate={},mfp.st=$.extend(!0,{},$.haloMagnificPopup.defaults,data),mfp.fixedContentPos="auto"===mfp.st.fixedContentPos?!mfp.probablyMobile:mfp.st.fixedContentPos,mfp.st.modal&&(mfp.st.closeOnContentClick=!1,mfp.st.closeOnBgClick=!1,mfp.st.showCloseBtn=!1,mfp.st.enableEscapeKey=!1),mfp.bgOverlay||(mfp.bgOverlay=_getEl("bg").on("click"+EVENT_NS,function(){mfp.close()}),mfp.wrap=_getEl("wrap").attr("tabindex",-1).on("click"+EVENT_NS,function(e){mfp._checkIfClose(e.target)&&mfp.close()}),mfp.container=_getEl("container",mfp.wrap)),mfp.contentContainer=_getEl("content"),mfp.st.preloader&&(mfp.preloader=_getEl("preloader",mfp.container,mfp.st.tLoading));var modules=$.haloMagnificPopup.modules;for(i=0;i<modules.length;i++){var n=modules[i];n=n.charAt(0).toUpperCase()+n.slice(1),mfp["init"+n].call(mfp)}_mfpTrigger("BeforeOpen"),mfp.st.showCloseBtn&&(mfp.st.closeBtnInside?(_mfpOn(MARKUP_PARSE_EVENT,function(e,template,values,item){values.close_replaceWith=_getCloseBtn(item.type)}),_wrapClasses+=" mfp-close-btn-in"):mfp.wrap.append(_getCloseBtn())),mfp.st.alignTop&&(_wrapClasses+=" mfp-align-top"),mfp.wrap.css(mfp.fixedContentPos?{overflow:mfp.st.overflowY,overflowX:"hidden",overflowY:mfp.st.overflowY}:{top:_window.scrollTop(),position:"absolute"}),(mfp.st.fixedBgPos===!1||"auto"===mfp.st.fixedBgPos&&!mfp.fixedContentPos)&&mfp.bgOverlay.css({height:_document.height(),position:"absolute"}),mfp.st.enableEscapeKey&&_document.on("keyup"+EVENT_NS,function(e){27===e.keyCode&&mfp.close()}),_window.on("resize"+EVENT_NS,function(){mfp.updateSize()}),mfp.st.closeOnContentClick||(_wrapClasses+=" mfp-auto-cursor"),_wrapClasses&&mfp.wrap.addClass(_wrapClasses);var windowHeight=mfp.wH=_window.height(),windowStyles={};if(mfp.fixedContentPos&&mfp._hasScrollBar(windowHeight)){var s=mfp._getScrollbarSize();s&&(windowStyles.marginRight=s)}mfp.fixedContentPos&&(mfp.isIE7?$("body, html").css("overflow","hidden"):windowStyles.overflow="hidden");var classesToadd=mfp.st.mainClass;return mfp.isIE7&&(classesToadd+=" mfp-ie7"),classesToadd&&mfp._addClassToMFP(classesToadd),mfp.updateItemHTML(),_mfpTrigger("BuildControls"),$("html").css(windowStyles),mfp.bgOverlay.add(mfp.wrap).prependTo(mfp.st.prependTo||_body),mfp._lastFocusedEl=document.activeElement,setTimeout(function(){mfp.content?(mfp._addClassToMFP(READY_CLASS),mfp._setFocus()):mfp.bgOverlay.addClass(READY_CLASS),_document.on("focusin"+EVENT_NS,mfp._onFocusIn)},16),mfp.isOpen=!0,mfp.updateSize(windowHeight),_mfpTrigger(OPEN_EVENT),data},close:function(){mfp.isOpen&&(_mfpTrigger(BEFORE_CLOSE_EVENT),mfp.isOpen=!1,mfp.st.removalDelay&&!mfp.isLowIE&&mfp.supportsTransition?(mfp._addClassToMFP(REMOVING_CLASS),
setTimeout(function(){mfp._close()},mfp.st.removalDelay)):mfp._close())},_close:function(){_mfpTrigger(CLOSE_EVENT);var classesToRemove=REMOVING_CLASS+" "+READY_CLASS+" ";if(mfp.bgOverlay.detach(),mfp.wrap.detach(),mfp.container.empty(),mfp.st.mainClass&&(classesToRemove+=mfp.st.mainClass+" "),mfp._removeClassFromMFP(classesToRemove),mfp.fixedContentPos){var windowStyles={marginRight:""};mfp.isIE7?$("body, html").css("overflow",""):windowStyles.overflow="",$("html").css(windowStyles)}_document.off("keyup"+EVENT_NS+" focusin"+EVENT_NS),mfp.ev.off(EVENT_NS),mfp.wrap.attr("class","mfp-wrap").removeAttr("style"),mfp.bgOverlay.attr("class","mfp-bg"),mfp.container.attr("class","mfp-container"),!mfp.st.showCloseBtn||mfp.st.closeBtnInside&&mfp.currTemplate[mfp.currItem.type]!==!0||mfp.currTemplate.closeBtn&&mfp.currTemplate.closeBtn.detach(),mfp._lastFocusedEl&&$(mfp._lastFocusedEl).focus(),mfp.currItem=null,mfp.content=null,mfp.currTemplate=null,mfp.prevHeight=0,_mfpTrigger(AFTER_CLOSE_EVENT)},updateSize:function(winHeight){if(mfp.isIOS){var zoomLevel=document.documentElement.clientWidth/window.innerWidth,height=window.innerHeight*zoomLevel;mfp.wrap.css("height",height),mfp.wH=height}else mfp.wH=winHeight||_window.height();mfp.fixedContentPos||mfp.wrap.css("height",mfp.wH),_mfpTrigger("Resize")},updateItemHTML:function(){var item=mfp.items[mfp.index];mfp.contentContainer.detach(),mfp.content&&mfp.content.detach(),item.parsed||(item=mfp.parseEl(mfp.index));var type=item.type;if(_mfpTrigger("BeforeChange",[mfp.currItem?mfp.currItem.type:"",type]),mfp.currItem=item,!mfp.currTemplate[type]){var markup=mfp.st[type]?mfp.st[type].markup:!1;_mfpTrigger("FirstMarkupParse",markup),markup?mfp.currTemplate[type]=$(markup):mfp.currTemplate[type]=!0}_prevContentType&&_prevContentType!==item.type&&mfp.container.removeClass("mfp-"+_prevContentType+"-holder");var newContent=mfp["get"+type.charAt(0).toUpperCase()+type.slice(1)](item,mfp.currTemplate[type]);mfp.appendContent(newContent,type),item.preloaded=!0,_mfpTrigger(CHANGE_EVENT,item),_prevContentType=item.type,mfp.container.prepend(mfp.contentContainer),_mfpTrigger("AfterChange")},appendContent:function(newContent,type){mfp.content=newContent,newContent?mfp.st.showCloseBtn&&mfp.st.closeBtnInside&&mfp.currTemplate[type]===!0?mfp.content.find(".mfp-close").length||mfp.content.append(_getCloseBtn()):mfp.content=newContent:mfp.content="",_mfpTrigger(BEFORE_APPEND_EVENT),mfp.container.addClass("mfp-"+type+"-holder"),mfp.contentContainer.append(mfp.content)},parseEl:function(index){var item=mfp.items[index],type=item.type;if(item=item.tagName?{el:$(item)}:{data:item,src:item.src},item.el){for(var types=mfp.types,i=0;i<types.length;i++)if(item.el.hasClass("mfp-"+types[i])){type=types[i];break}item.src=item.el.attr("data-mfp-src"),item.src||(item.src=item.el.attr("href"))}return item.type=type||mfp.st.type||"inline",item.index=index,item.parsed=!0,mfp.items[index]=item,_mfpTrigger("ElementParse",item),mfp.items[index]},addGroup:function(el,options){var eHandler=function(e){e.mfpEl=this,mfp._openClick(e,el,options)};options||(options={});var eName="click.haloMagnificPopup";options.mainEl=el,options.items?(options.isObj=!0,el.off(eName).on(eName,eHandler)):(options.isObj=!1,options.delegate?el.off(eName).on(eName,options.delegate,eHandler):(options.items=el,el.off(eName).on(eName,eHandler)))},_openClick:function(e,el,options){var midClick=void 0!==options.midClick?options.midClick:$.haloMagnificPopup.defaults.midClick;if(midClick||2!==e.which&&!e.ctrlKey&&!e.metaKey){var disableOn=void 0!==options.disableOn?options.disableOn:$.haloMagnificPopup.defaults.disableOn;if(disableOn)if($.isFunction(disableOn)){if(!disableOn.call(mfp))return!0}else if(_window.width()<disableOn)return!0;e.type&&(e.preventDefault(),mfp.isOpen&&e.stopPropagation()),options.el=$(e.mfpEl),options.delegate&&(options.items=el.find(options.delegate)),mfp.open(options)}},updateStatus:function(status,text){if(mfp.preloader){_prevStatus!==status&&mfp.container.removeClass("mfp-s-"+_prevStatus),text||"loading"!==status||(text=mfp.st.tLoading);var data={status:status,text:text};_mfpTrigger("UpdateStatus",data),status=data.status,text=data.text,mfp.preloader.html(text),mfp.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),mfp.container.addClass("mfp-s-"+status),_prevStatus=status}},_checkIfClose:function(target){if(!$(target).hasClass(PREVENT_CLOSE_CLASS)){var closeOnContent=mfp.st.closeOnContentClick,closeOnBg=mfp.st.closeOnBgClick;if(closeOnContent&&closeOnBg)return!0;if(!mfp.content||$(target).hasClass("mfp-close")||mfp.preloader&&target===mfp.preloader[0])return!0;if(target===mfp.content[0]||$.contains(mfp.content[0],target)){if(closeOnContent)return!0}else if(closeOnBg&&$.contains(document,target))return!0;return!1}},_addClassToMFP:function(cName){mfp.bgOverlay.addClass(cName),mfp.wrap.addClass(cName)},_removeClassFromMFP:function(cName){this.bgOverlay.removeClass(cName),mfp.wrap.removeClass(cName)},_hasScrollBar:function(winHeight){return(mfp.isIE7?_document.height():document.body.scrollHeight)>(winHeight||_window.height())},_setFocus:function(){(mfp.st.focus?mfp.content.find(mfp.st.focus).eq(0):mfp.wrap).focus()},_onFocusIn:function(e){return e.target===mfp.wrap[0]||$.contains(mfp.wrap[0],e.target)?void 0:(mfp._setFocus(),!1)},_parseMarkup:function(template,values,item){var arr;item.data&&(values=$.extend(item.data,values)),_mfpTrigger(MARKUP_PARSE_EVENT,[template,values,item]),$.each(values,function(key,value){if(void 0===value||value===!1)return!0;if(arr=key.split("_"),arr.length>1){var el=template.find(EVENT_NS+"-"+arr[0]);if(el.length>0){var attr=arr[1];"replaceWith"===attr?el[0]!==value[0]&&el.replaceWith(value):"img"===attr?el.is("img")?el.attr("src",value):el.replaceWith('<img src="'+value+'" class="'+el.attr("class")+'" />'):el.attr(arr[1],value)}}else template.find(EVENT_NS+"-"+key).html(value)})},_getScrollbarSize:function(){if(void 0===mfp.scrollbarSize){var scrollDiv=document.createElement("div");scrollDiv.id="mfp-sbm",scrollDiv.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(scrollDiv),mfp.scrollbarSize=scrollDiv.offsetWidth-scrollDiv.clientWidth,document.body.removeChild(scrollDiv)}return mfp.scrollbarSize}},$.haloMagnificPopup={instance:null,proto:MagnificPopup.prototype,modules:[],open:function(options,index){return _checkInstance(),options=options?$.extend(!0,{},options):{},options.isObj=!0,options.index=index||0,this.instance.open(options)},close:function(){return $.haloMagnificPopup.instance&&$.haloMagnificPopup.instance.close()},registerModule:function(name,module){module.options&&($.haloMagnificPopup.defaults[name]=module.options),$.extend(this.proto,module.proto),this.modules.push(name)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},$.fn.haloMagnificPopup=function(options){_checkInstance();var jqEl=$(this);if("string"==typeof options)if("open"===options){var items,itemOpts=_isJQ?jqEl.data("haloMagnificPopup"):jqEl[0].haloMagnificPopup,index=parseInt(arguments[1],10)||0;itemOpts.items?items=itemOpts.items[index]:(items=jqEl,itemOpts.delegate&&(items=items.find(itemOpts.delegate)),items=items.eq(index)),mfp._openClick({mfpEl:items},jqEl,itemOpts)}else mfp.isOpen&&mfp[options].apply(mfp,Array.prototype.slice.call(arguments,1));else options=$.extend(!0,{},options),_isJQ?jqEl.data("haloMagnificPopup",options):jqEl[0].haloMagnificPopup=options,mfp.addGroup(jqEl,options);return jqEl};var _hiddenClass,_inlinePlaceholder,_lastInlineElement,INLINE_NS="inline",_putInlineElementsBack=function(){_lastInlineElement&&(_inlinePlaceholder.after(_lastInlineElement.addClass(_hiddenClass)).detach(),_lastInlineElement=null)};$.haloMagnificPopup.registerModule(INLINE_NS,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){mfp.types.push(INLINE_NS),_mfpOn(CLOSE_EVENT+"."+INLINE_NS,function(){_putInlineElementsBack()})},getInline:function(item,template){if(_putInlineElementsBack(),item.src){var inlineSt=mfp.st.inline,el=$(item.src);if(el.length){var parent=el[0].parentNode;parent&&parent.tagName&&(_inlinePlaceholder||(_hiddenClass=inlineSt.hiddenClass,_inlinePlaceholder=_getEl(_hiddenClass),_hiddenClass="mfp-"+_hiddenClass),_lastInlineElement=el.after(_inlinePlaceholder).detach().removeClass(_hiddenClass)),mfp.updateStatus("ready")}else mfp.updateStatus("error",inlineSt.tNotFound),el=$("<div>");return item.inlineElement=el,el}return mfp.updateStatus("ready"),mfp._parseMarkup(template,{},item),template}}});var _ajaxCur,AJAX_NS="ajax",_removeAjaxCursor=function(){_ajaxCur&&_body.removeClass(_ajaxCur)},_destroyAjaxRequest=function(){_removeAjaxCursor(),mfp.req&&mfp.req.abort()};$.haloMagnificPopup.registerModule(AJAX_NS,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){mfp.types.push(AJAX_NS),_ajaxCur=mfp.st.ajax.cursor,_mfpOn(CLOSE_EVENT+"."+AJAX_NS,_destroyAjaxRequest),_mfpOn("BeforeChange."+AJAX_NS,_destroyAjaxRequest)},getAjax:function(item){_ajaxCur&&_body.addClass(_ajaxCur),mfp.updateStatus("loading");var opts=$.extend({url:item.src,success:function(data,textStatus,jqXHR){var temp={data:data,xhr:jqXHR};_mfpTrigger("ParseAjax",temp),mfp.appendContent($(temp.data),AJAX_NS),item.finished=!0,_removeAjaxCursor(),mfp._setFocus(),setTimeout(function(){mfp.wrap.addClass(READY_CLASS)},16),mfp.updateStatus("ready"),_mfpTrigger("AjaxContentAdded")},error:function(){_removeAjaxCursor(),item.finished=item.loadError=!0,mfp.updateStatus("error",mfp.st.ajax.tError.replace("%url%",item.src))}},mfp.st.ajax.settings);return mfp.req=$.ajax(opts),""}}});var _imgInterval,_getTitle=function(item){if(item.data&&void 0!==item.data.title)return item.data.title;var src=mfp.st.image.titleSrc;if(src){if($.isFunction(src))return src.call(mfp,item);if(item.el)return item.el.attr(src)||""}return""};$.haloMagnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var imgSt=mfp.st.image,ns=".image";mfp.types.push("image"),_mfpOn(OPEN_EVENT+ns,function(){"image"===mfp.currItem.type&&imgSt.cursor&&_body.addClass(imgSt.cursor)}),_mfpOn(CLOSE_EVENT+ns,function(){imgSt.cursor&&_body.removeClass(imgSt.cursor),_window.off("resize"+EVENT_NS)}),_mfpOn("Resize"+ns,mfp.resizeImage),mfp.isLowIE&&_mfpOn("AfterChange",mfp.resizeImage)},resizeImage:function(){var item=mfp.currItem;if(item&&item.img&&mfp.st.image.verticalFit){var decr=0;mfp.isLowIE&&(decr=parseInt(item.img.css("padding-top"),10)+parseInt(item.img.css("padding-bottom"),10))}},_onImageHasSize:function(item){item.img&&(item.hasSize=!0,_imgInterval&&clearInterval(_imgInterval),item.isCheckingImgSize=!1,_mfpTrigger("ImageHasSize",item),item.imgHidden&&(mfp.content&&mfp.content.removeClass("mfp-loading"),item.imgHidden=!1))},findImageSize:function(item){var counter=0,img=item.img[0],mfpSetInterval=function(delay){_imgInterval&&clearInterval(_imgInterval),_imgInterval=setInterval(function(){return img.naturalWidth>0?void mfp._onImageHasSize(item):(counter>200&&clearInterval(_imgInterval),counter++,void(3===counter?mfpSetInterval(10):40===counter?mfpSetInterval(50):100===counter&&mfpSetInterval(500)))},delay)};mfpSetInterval(1)},getImage:function(item,template){var guard=0,onLoadComplete=function(){item&&(item.img[0].complete?(item.img.off(".mfploader"),item===mfp.currItem&&(mfp._onImageHasSize(item),mfp.updateStatus("ready")),item.hasSize=!0,item.loaded=!0,_mfpTrigger("ImageLoadComplete")):(guard++,200>guard?setTimeout(onLoadComplete,100):onLoadError()))},onLoadError=function(){item&&(item.img.off(".mfploader"),item===mfp.currItem&&(mfp._onImageHasSize(item),mfp.updateStatus("error",imgSt.tError.replace("%url%",item.src))),item.hasSize=!0,item.loaded=!0,item.loadError=!0)},imgSt=mfp.st.image,el=template.find(".mfp-img");if(el.length){var img=document.createElement("img");img.className="mfp-img",item.img=$(img).on("load.mfploader",onLoadComplete).on("error.mfploader",onLoadError),img.src=item.src,el.is("img")&&(item.img=item.img.clone()),img=item.img[0],img.naturalWidth>0?item.hasSize=!0:img.width||(item.hasSize=!1)}return mfp._parseMarkup(template,{title:_getTitle(item),img_replaceWith:item.img},item),mfp.resizeImage(),item.hasSize?(_imgInterval&&clearInterval(_imgInterval),item.loadError?(template.addClass("mfp-loading"),mfp.updateStatus("error",imgSt.tError.replace("%url%",item.src))):(template.removeClass("mfp-loading"),mfp.updateStatus("ready")),template):(mfp.updateStatus("loading"),item.loading=!0,item.hasSize||(item.imgHidden=!0,template.addClass("mfp-loading"),mfp.findImageSize(item)),template)}}});var hasMozTransform,getHasMozTransform=function(){return void 0===hasMozTransform&&(hasMozTransform=void 0!==document.createElement("p").style.MozTransform),hasMozTransform};$.haloMagnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(element){return element.is("img")?element:element.find("img")}},proto:{initZoom:function(){var image,zoomSt=mfp.st.zoom,ns=".zoom";if(zoomSt.enabled&&mfp.supportsTransition){var openTimeout,animatedImg,duration=zoomSt.duration,getElToAnimate=function(image){var newImg=image.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),transition="all "+zoomSt.duration/1e3+"s "+zoomSt.easing,cssObj={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},t="transition";return cssObj["-webkit-"+t]=cssObj["-moz-"+t]=cssObj["-o-"+t]=cssObj[t]=transition,newImg.css(cssObj),newImg},showMainContent=function(){mfp.content.css("visibility","visible")};_mfpOn("BuildControls"+ns,function(){if(mfp._allowZoom()){if(clearTimeout(openTimeout),mfp.content.css("visibility","hidden"),image=mfp._getItemToZoom(),!image)return void showMainContent();animatedImg=getElToAnimate(image),animatedImg.css(mfp._getOffset()),mfp.wrap.append(animatedImg),openTimeout=setTimeout(function(){animatedImg.css(mfp._getOffset(!0)),openTimeout=setTimeout(function(){showMainContent(),setTimeout(function(){animatedImg.remove(),image=animatedImg=null,_mfpTrigger("ZoomAnimationEnded")},16)},duration)},16)}}),_mfpOn(BEFORE_CLOSE_EVENT+ns,function(){if(mfp._allowZoom()){if(clearTimeout(openTimeout),mfp.st.removalDelay=duration,!image){if(image=mfp._getItemToZoom(),!image)return;animatedImg=getElToAnimate(image)}animatedImg.css(mfp._getOffset(!0)),mfp.wrap.append(animatedImg),mfp.content.css("visibility","hidden"),setTimeout(function(){animatedImg.css(mfp._getOffset())},16)}}),_mfpOn(CLOSE_EVENT+ns,function(){mfp._allowZoom()&&(showMainContent(),animatedImg&&animatedImg.remove(),image=null)})}},_allowZoom:function(){return"image"===mfp.currItem.type},_getItemToZoom:function(){return mfp.currItem.hasSize?mfp.currItem.img:!1},_getOffset:function(isLarge){var el;el=isLarge?mfp.currItem.img:mfp.st.zoom.opener(mfp.currItem.el||mfp.currItem);var offset=el.offset(),paddingTop=parseInt(el.css("padding-top"),10),paddingBottom=parseInt(el.css("padding-bottom"),10);offset.top-=$(window).scrollTop()-paddingTop;var obj={width:el.width(),height:(_isJQ?el.innerHeight():el[0].offsetHeight)-paddingBottom-paddingTop};return getHasMozTransform()?obj["-moz-transform"]=obj.transform="translate("+offset.left+"px,"+offset.top+"px)":(obj.left=offset.left,obj.top=offset.top),obj}}});var IFRAME_NS="iframe",_emptyPage="//about:blank",_fixIframeBugs=function(isShowing){if(mfp.currTemplate[IFRAME_NS]){var el=mfp.currTemplate[IFRAME_NS].find("iframe");el.length&&(isShowing||(el[0].src=_emptyPage),mfp.isIE8&&el.css("display",isShowing?"block":"none"))}};$.haloMagnificPopup.registerModule(IFRAME_NS,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){mfp.types.push(IFRAME_NS),_mfpOn("BeforeChange",function(e,prevType,newType){prevType!==newType&&(prevType===IFRAME_NS?_fixIframeBugs():newType===IFRAME_NS&&_fixIframeBugs(!0))}),_mfpOn(CLOSE_EVENT+"."+IFRAME_NS,function(){_fixIframeBugs()})},getIframe:function(item,template){var embedSrc=item.src,iframeSt=mfp.st.iframe;$.each(iframeSt.patterns,function(){return embedSrc.indexOf(this.index)>-1?(this.id&&(embedSrc="string"==typeof this.id?embedSrc.substr(embedSrc.lastIndexOf(this.id)+this.id.length,embedSrc.length):this.id.call(this,embedSrc)),embedSrc=this.src.replace("%id%",embedSrc),!1):void 0});var dataObj={};return iframeSt.srcAction&&(dataObj[iframeSt.srcAction]=embedSrc),mfp._parseMarkup(template,dataObj,item),mfp.updateStatus("ready"),template}}});var _getLoopedId=function(index){var numSlides=mfp.items.length;return index>numSlides-1?index-numSlides:0>index?numSlides+index:index},_replaceCurrTotal=function(text,curr,total){return text.replace(/%curr%/gi,curr+1).replace(/%total%/gi,total)};$.haloMagnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var gSt=mfp.st.gallery,ns=".mfp-gallery",supportsFastClick=Boolean($.fn.mfpFastClick);return mfp.direction=!0,gSt&&gSt.enabled?(_wrapClasses+=" mfp-gallery",_mfpOn(OPEN_EVENT+ns,function(){gSt.navigateByImgClick&&mfp.wrap.on("click"+ns,".mfp-img",function(){return mfp.items.length>1?(mfp.next(),!1):void 0}),_document.on("keydown"+ns,function(e){37===e.keyCode?mfp.prev():39===e.keyCode&&mfp.next()})}),_mfpOn("UpdateStatus"+ns,function(e,data){data.text&&(data.text=_replaceCurrTotal(data.text,mfp.currItem.index,mfp.items.length))}),_mfpOn(MARKUP_PARSE_EVENT+ns,function(e,element,values,item){var l=mfp.items.length;values.counter=l>1?_replaceCurrTotal(gSt.tCounter,item.index,l):""}),_mfpOn("BuildControls"+ns,function(){if(mfp.items.length>1&&gSt.arrows&&!mfp.arrowLeft){var markup=gSt.arrowMarkup,arrowLeft=mfp.arrowLeft=$(markup.replace(/%title%/gi,gSt.tPrev).replace(/%dir%/gi,"left")).addClass(PREVENT_CLOSE_CLASS),arrowRight=mfp.arrowRight=$(markup.replace(/%title%/gi,gSt.tNext).replace(/%dir%/gi,"right")).addClass(PREVENT_CLOSE_CLASS),eName=supportsFastClick?"mfpFastClick":"click";arrowLeft[eName](function(){mfp.prev()}),arrowRight[eName](function(){mfp.next()}),mfp.isIE7&&(_getEl("b",arrowLeft[0],!1,!0),_getEl("a",arrowLeft[0],!1,!0),_getEl("b",arrowRight[0],!1,!0),_getEl("a",arrowRight[0],!1,!0)),mfp.container.append(arrowLeft.add(arrowRight))}}),_mfpOn(CHANGE_EVENT+ns,function(){mfp._preloadTimeout&&clearTimeout(mfp._preloadTimeout),mfp._preloadTimeout=setTimeout(function(){mfp.preloadNearbyImages(),mfp._preloadTimeout=null},16)}),void _mfpOn(CLOSE_EVENT+ns,function(){_document.off(ns),mfp.wrap.off("click"+ns),mfp.arrowLeft&&supportsFastClick&&mfp.arrowLeft.add(mfp.arrowRight).destroyMfpFastClick(),mfp.arrowRight=mfp.arrowLeft=null})):!1},next:function(){mfp.direction=!0,mfp.index=_getLoopedId(mfp.index+1),mfp.updateItemHTML()},prev:function(){mfp.direction=!1,mfp.index=_getLoopedId(mfp.index-1),mfp.updateItemHTML()},goTo:function(newIndex){mfp.direction=newIndex>=mfp.index,mfp.index=newIndex,mfp.updateItemHTML()},preloadNearbyImages:function(){var i,p=mfp.st.gallery.preload,preloadBefore=Math.min(p[0],mfp.items.length),preloadAfter=Math.min(p[1],mfp.items.length);for(i=1;i<=(mfp.direction?preloadAfter:preloadBefore);i++)mfp._preloadItem(mfp.index+i);for(i=1;i<=(mfp.direction?preloadBefore:preloadAfter);i++)mfp._preloadItem(mfp.index-i)},_preloadItem:function(index){if(index=_getLoopedId(index),!mfp.items[index].preloaded){var item=mfp.items[index];item.parsed||(item=mfp.parseEl(index)),_mfpTrigger("LazyLoad",item),"image"===item.type&&(item.img=$('<img class="mfp-img" />').on("load.mfploader",function(){item.hasSize=!0}).on("error.mfploader",function(){item.hasSize=!0,item.loadError=!0,_mfpTrigger("LazyLoadError",item)}).attr("src",item.src)),item.preloaded=!0}}}});var RETINA_NS="retina";$.haloMagnificPopup.registerModule(RETINA_NS,{options:{replaceSrc:function(item){return item.src.replace(/\.\w+$/,function(m){return"@2x"+m})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var st=mfp.st.retina,ratio=st.ratio;ratio=isNaN(ratio)?ratio():ratio,ratio>1&&(_mfpOn("ImageHasSize."+RETINA_NS,function(e,item){item.img.css({"max-width":item.img[0].naturalWidth/ratio,width:"100%"})}),_mfpOn("ElementParse."+RETINA_NS,function(e,item){item.src=st.replaceSrc(item,ratio)}))}}}}),function(){var ghostClickDelay=1e3,supportsTouch="ontouchstart"in window,unbindTouchMove=function(){_window.off("touchmove"+ns+" touchend"+ns)},eName="mfpFastClick",ns="."+eName;$.fn.mfpFastClick=function(callback){return $(this).each(function(){var lock,elem=$(this);if(supportsTouch){var timeout,startX,startY,pointerMoved,point,numPointers;elem.on("touchstart"+ns,function(e){pointerMoved=!1,numPointers=1,point=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],startX=point.clientX,startY=point.clientY,_window.on("touchmove"+ns,function(e){point=e.originalEvent?e.originalEvent.touches:e.touches,numPointers=point.length,point=point[0],(Math.abs(point.clientX-startX)>10||Math.abs(point.clientY-startY)>10)&&(pointerMoved=!0,unbindTouchMove())}).on("touchend"+ns,function(e){unbindTouchMove(),pointerMoved||numPointers>1||(lock=!0,e.preventDefault(),clearTimeout(timeout),timeout=setTimeout(function(){lock=!1},ghostClickDelay),callback())})})}elem.on("click"+ns,function(){lock||callback()})})},$.fn.destroyMfpFastClick=function(){$(this).off("touchstart"+ns+" click"+ns),supportsTouch&&_window.off("touchmove"+ns+" touchend"+ns)}}(),_checkInstance()}(window.jQuery||window.Zepto),function(window,$,undefined){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return settings&&$.extend(config,settings),this.each(function(){function cancelTouch(){this.removeEventListener("touchmove",onTouchMove),startX=null,isMoving=!1}function onTouchMove(e){if(config.preventDefaultEvents&&e.preventDefault(),isMoving){var x=e.touches[0].pageX,y=e.touches[0].pageY,dx=startX-x,dy=startY-y;Math.abs(dx)>=config.min_move_x?(cancelTouch(),dx>0?config.wipeLeft():config.wipeRight()):Math.abs(dy)>=config.min_move_y&&(cancelTouch(),dy>0?config.wipeDown():config.wipeUp())}}function onTouchStart(e){1==e.touches.length&&(startX=e.touches[0].pageX,startY=e.touches[0].pageY,isMoving=!0,this.addEventListener("touchmove",onTouchMove,!1))}var startX,startY,isMoving=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",onTouchStart,!1)}),this},$.elastislide=function(options,element){this.$el=$(element),this._init(options),this.$el.data("carousel",this)},$.elastislide.defaults={speed:450,easing:"",imageW:190,margin:3,border:1,minItems:1,current:0,onClick:function(){return!1}},$.elastislide.prototype={_init:function(options){this.options=$.extend(!0,{},$.elastislide.defaults,options),this.$slider=this.$el.find("ul"),this.$items=this.$slider.children("li"),this.itemsCount=this.$items.length,this.$esCarousel=this.$slider.parent(),this._validateOptions(),this._configure(),this._addControls(),this._initEvents(),this.$slider.show(),this._slideToCurrent(!1)},_validateOptions:function(){this.options.speed<0&&(this.options.speed=450),this.options.margin<0&&(this.options.margin=4),this.options.border<0&&(this.options.border=1),(this.options.minItems<1||this.options.minItems>this.itemsCount)&&(this.options.minItems=1),this.options.current>this.itemsCount-1&&(this.options.current=0)},_configure:function(){this.current=this.options.current,this.visibleWidth=this.$esCarousel.width(),this.visibleWidth<this.options.minItems*(this.options.imageW+2*this.options.border)+(this.options.minItems-1)*this.options.margin?(this._setDim((this.visibleWidth-(this.options.minItems-1)*this.options.margin)/this.options.minItems),this._setCurrentValues(),this.fitCount=this.options.minItems):(this._setDim(),this._setCurrentValues()),this.$slider.css({width:this.sliderW})},_setDim:function(elW){this.$items.css({marginRight:this.options.margin,width:elW?elW:this.options.imageW+2*this.options.border}).children("a").css({borderWidth:this.options.border})},_setCurrentValues:function(){this.itemW=this.options.imageW+2*this.options.border,this.sliderW=this.itemW*this.itemsCount,this.visibleWidth=this.$esCarousel.width(),this.fitCount=Math.floor(this.visibleWidth/this.itemW)},_addControls:function(){this.$navNext=$('<span class="es-nav-next"><i class="fa fa-chevron-right fa-2x"></i></span>'),this.$navPrev=$('<span class="es-nav-prev"><i class="fa fa-chevron-left fa-2x"></i></span>'),$('<div class="es-nav"/>').append(this.$navPrev).append(this.$navNext).appendTo(this.$el)},_toggleControls:function(dir,status){dir&&status?1===status?"right"===dir?this.$navNext.show():this.$navPrev.show():"right"===dir?this.$navNext.hide():this.$navPrev.hide():(this.current===this.itemsCount-1||this.fitCount>=this.itemsCount)&&this.$navNext.hide()},_initEvents:function(){var instance=this;$(window).on("resize.elastislide",function(event){instance._reload(),clearTimeout(instance.resetTimeout),instance.resetTimeout=setTimeout(function(){instance._slideToCurrent()},200)}),this.$navNext.on("click.elastislide",function(event){instance._slide("right")}),this.$navPrev.on("click.elastislide",function(event){instance._slide("left")}),this.$slider.on("click.elastislide","li",function(event){return instance.options.onClick($(this)),!1}),instance.$slider.touchwipe({wipeLeft:function(){instance._slide("right")},wipeRight:function(){instance._slide("left")}})},reload:function(callback){this._reload(),callback&&callback.call()},_reload:function(){var instance=this;instance._setCurrentValues(),instance.visibleWidth<instance.options.minItems*(instance.options.imageW+2*instance.options.border)+(instance.options.minItems-1)*instance.options.margin?(instance._setDim((instance.visibleWidth-(instance.options.minItems-1)*instance.options.margin)/instance.options.minItems),instance._setCurrentValues(),instance.fitCount=instance.options.minItems):(instance._setDim(),instance._setCurrentValues()),instance.$slider.css({width:instance.sliderW+10})},_slide:function(dir,val,anim,callback){var ml=parseFloat(this.$slider.css("margin-left"));if(val===undefined){var val,amount=this.fitCount*this.itemW;if(0>amount)return!1;if("right"===dir&&this.sliderW-(Math.abs(ml)+amount)<this.visibleWidth)amount=this.sliderW-(Math.abs(ml)+this.visibleWidth)-this.options.margin,this._toggleControls("right",-1),this._toggleControls("left",1);else if("left"===dir&&Math.abs(ml)-amount<0)amount=Math.abs(ml),this._toggleControls("left",-1),this._toggleControls("right",1);else{var fml;fml="right"===dir?Math.abs(ml)+this.options.margin+Math.abs(amount):Math.abs(ml)-this.options.margin-Math.abs(amount),fml>0?this._toggleControls("left",1):this._toggleControls("left",-1),fml<this.sliderW-this.visibleWidth?this._toggleControls("right",1):this._toggleControls("right",-1)}val="right"===dir?"-="+amount:"+="+amount}else{var fml=Math.abs(val);Math.max(this.sliderW,this.visibleWidth)-fml<this.visibleWidth&&(val=-(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth),0!==val&&(val+=this.options.margin),this._toggleControls("right",-1),fml=Math.abs(val)),fml>0?this._toggleControls("left",1):this._toggleControls("left",-1),Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth>fml+this.options.margin?this._toggleControls("right",1):this._toggleControls("right",-1)}$.fn.applyStyle=anim===undefined?$.fn.animate:$.fn.css;var sliderCSS={marginLeft:val};this.$slider.stop().applyStyle(sliderCSS,$.extend(!0,[],{duration:this.options.speed,easing:this.options.easing,complete:function(){callback&&callback.call()}}))},_slideToCurrent:function(anim){var amount=this.current*this.itemW;this._slide("",-amount,anim)},add:function($newelems,callback){this.$items=this.$items.add($newelems),this.itemsCount=this.$items.length,this._setDim(),this._setCurrentValues(),this.$slider.css({width:this.sliderW}),this._slideToCurrent(),callback&&callback.call($newelems)},setCurrent:function(idx,callback){this.current=idx;var ml=Math.abs(parseFloat(this.$slider.css("margin-left"))),posR=ml+this.visibleWidth,fml=Math.abs(this.current*this.itemW);(fml+this.itemW>posR||ml>fml)&&this._slideToCurrent(),callback&&callback.call()},destroy:function(callback){this._destroy(callback)},_destroy:function(callback){this.$el.off(".elastislide").removeData("elastislide"),$(".es-nav",this.$el).remove(),$(window).off(".elastislide"),callback&&callback.call(),this.$el.removeData("carousel")}};var logError=function(message){this.console&&console.error(message)};$.fn.elastislide=function(options){if("string"==typeof options){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"elastislide");return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?void instance[options].apply(instance,args):void logError("no such method '"+options+"' for elastislide instance"):void logError("cannot call methods on elastislide prior to initialization; attempted to call method '"+options+"'")})}else this.each(function(){var instance=$.data(this,"elastislide");instance||$.data(this,"elastislide",new $.elastislide(options,this))});return this}}(window,jQuery),function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{},$.extend($.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));

}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.support.selectstart="onselectstart"in document.createElement("div"),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)}})}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,this.each(isMethodCall?function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}:function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}(jQuery),function($,undefined){var mouseHandled=!1;$(document).mouseup(function(){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return $.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button?this._mouseUp(event):this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"original"!==this.options.helper||$.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1):!1},_mouseUp:function(event){return $("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(over="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()}),{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*mod}},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,pageX=event.pageX,pageY=event.pageY;return this.offset.scroll||(this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(co=this.relative_container.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),"drag"===type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"===inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=!1,thisSortable=this;this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(innermostIntersecting=!0,$.each(inst.sortables,function(){return this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(){var o=$(this).data("ui-draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event){var i=$(this).data("ui-draggable"),o=i.options,scrolled=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),
scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height,l-d>x2||x1>r+d||t-d>y2||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ui.plugin.add("draggable","stack",{start:function(){var min,o=this.data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($,undefined){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}$.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions=function(){return arguments.length?void(proportions=arguments[0]):proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[],$.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];i<drop.length;i++)drop[i]===this&&drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){"accept"===key&&(this.accept=$.isFunction(value)?value:function(d){return d.is(value)}),$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=!1;return draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"ui-droppable");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return!1;var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,y1=(draggable.positionAbs||draggable.position.absolute).top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOverAxis(draggableTop,t,droppable.proportions().height)&&isOverAxis(draggableLeft,l,droppable.proportions().width);case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}},$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}))}},drop:function(draggable,event){var dropped=!1;return $.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope}),parent.length&&(parentInstance=$.data(parent[0],"ui-droppable"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}}}(jQuery),function($){function simulateMouseEvent(event,simulatedType){if(!(event.originalEvent.touches.length>1)){event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent("MouseEvents");simulatedEvent.initMouseEvent(simulatedType,!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),event.target.dispatchEvent(simulatedEvent)}}if($.support.touch="ontouchend"in document,$.support.touch){var touchHandled,mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,_mouseDestroy=mouseProto._mouseDestroy;mouseProto._touchStart=function(event){var self=this;!touchHandled&&self._mouseCapture(event.originalEvent.changedTouches[0])&&(touchHandled=!0,self._touchMoved=!1,simulateMouseEvent(event,"mouseover"),simulateMouseEvent(event,"mousemove"),simulateMouseEvent(event,"mousedown"))},mouseProto._touchMove=function(event){touchHandled&&(this._touchMoved=!0,simulateMouseEvent(event,"mousemove"))},mouseProto._touchEnd=function(event){touchHandled&&(simulateMouseEvent(event,"mouseup"),simulateMouseEvent(event,"mouseout"),this._touchMoved||simulateMouseEvent(event,"click"),touchHandled=!1)},mouseProto._mouseInit=function(){var self=this;self.element.bind({touchstart:$.proxy(self,"_touchStart"),touchmove:$.proxy(self,"_touchMove"),touchend:$.proxy(self,"_touchEnd")}),_mouseInit.call(self)},mouseProto._mouseDestroy=function(){var self=this;self.element.unbind({touchstart:$.proxy(self,"_touchStart"),touchmove:$.proxy(self,"_touchMove"),touchend:$.proxy(self,"_touchEnd")}),_mouseDestroy.call(self)}}}(jQuery);var Hogan={};!function(Hogan,useArrayBuffer){function coerceToString(val){return String(null===val||void 0===val?"":val)}function hoganEscape(str){return str=coerceToString(str),hChars.test(str)?str.replace(rAmp,"&amp;").replace(rLt,"&lt;").replace(rGt,"&gt;").replace(rApos,"&#39;").replace(rQuot,"&quot;"):str}Hogan.Template=function(renderFunc,text,compiler,options){this.r=renderFunc||this.r,this.c=compiler,this.options=options,this.text=text||"",this.buf=useArrayBuffer?[]:""},Hogan.Template.prototype={r:function(context,partials,indent){return""},v:hoganEscape,t:coerceToString,render:function(context,partials,indent){return this.ri([context],partials||{},indent)},ri:function(context,partials,indent){return this.r(context,partials,indent)},rp:function(name,context,partials,indent){var partial=partials[name];return partial?(this.c&&"string"==typeof partial&&(partial=this.c.compile(partial,this.options)),partial.ri(context,partials,indent)):""},rs:function(context,partials,section){var tail=context[context.length-1];if(!isArray(tail))return void section(context,partials,this);for(var i=0;i<tail.length;i++)context.push(tail[i]),section(context,partials,this),context.pop()},s:function(val,ctx,partials,inverted,start,end,tags){var pass;return isArray(val)&&0===val.length?!1:("function"==typeof val&&(val=this.ls(val,ctx,partials,inverted,start,end,tags)),pass=""===val||!!val,!inverted&&pass&&ctx&&ctx.push("object"==typeof val?val:ctx[ctx.length-1]),pass)},d:function(key,ctx,partials,returnFound){var names=key.split("."),val=this.f(names[0],ctx,partials,returnFound),cx=null;if("."===key&&isArray(ctx[ctx.length-2]))return ctx[ctx.length-1];for(var i=1;i<names.length;i++)val&&"object"==typeof val&&names[i]in val?(cx=val,val=val[names[i]]):val="";return returnFound&&!val?!1:(returnFound||"function"!=typeof val||(ctx.push(cx),val=this.lv(val,ctx,partials),ctx.pop()),val)},f:function(key,ctx,partials,returnFound){for(var val=!1,v=null,found=!1,i=ctx.length-1;i>=0;i--)if(v=ctx[i],v&&"object"==typeof v&&key in v){val=v[key],found=!0;break}return found?(returnFound||"function"!=typeof val||(val=this.lv(val,ctx,partials)),val):returnFound?!1:""},ho:function(val,cx,partials,text,tags){var compiler=this.c,options=this.options;options.delimiters=tags;var text=val.call(cx,text);return text=null==text?String(text):text.toString(),this.b(compiler.compile(text,options).render(cx,partials)),!1},b:useArrayBuffer?function(s){this.buf.push(s)}:function(s){this.buf+=s},fl:useArrayBuffer?function(){var r=this.buf.join("");return this.buf=[],r}:function(){var r=this.buf;return this.buf="",r},ls:function(val,ctx,partials,inverted,start,end,tags){var cx=ctx[ctx.length-1],t=null;if(!inverted&&this.c&&val.length>0)return this.ho(val,cx,partials,this.text.substring(start,end),tags);if(t=val.call(cx),"function"==typeof t){if(inverted)return!0;if(this.c)return this.ho(t,cx,partials,this.text.substring(start,end),tags)}return t},lv:function(val,ctx,partials){var cx=ctx[ctx.length-1],result=val.call(cx);return"function"==typeof result&&(result=coerceToString(result.call(cx)),this.c&&~result.indexOf("{{"))?this.c.compile(result,this.options).render(cx,partials):coerceToString(result)}};var rAmp=/&/g,rLt=/</g,rGt=/>/g,rApos=/\'/g,rQuot=/\"/g,hChars=/[&<>\"\']/,isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(Hogan){function cleanTripleStache(token){"}"===token.n.substr(token.n.length-1)&&(token.n=token.n.substring(0,token.n.length-1))}function trim(s){return s.trim?s.trim():s.replace(/^\s*|\s*$/g,"")}function tagChange(tag,text,index){if(text.charAt(index)!=tag.charAt(0))return!1;for(var i=1,l=tag.length;l>i;i++)if(text.charAt(index+i)!=tag.charAt(i))return!1;return!0}function buildTree(tokens,kind,stack,customTags){for(var instructions=[],opener=null,token=null;tokens.length>0;)if(token=tokens.shift(),"#"==token.tag||"^"==token.tag||isOpener(token,customTags))stack.push(token),token.nodes=buildTree(tokens,token.tag,stack,customTags),instructions.push(token);else{if("/"==token.tag){if(0===stack.length)throw new Error("Closing tag without opener: /"+token.n);if(opener=stack.pop(),token.n!=opener.n&&!isCloser(token.n,opener.n,customTags))throw new Error("Nesting error: "+opener.n+" vs. "+token.n);return opener.end=token.i,instructions}instructions.push(token)}if(stack.length>0)throw new Error("missing closing tag: "+stack.pop().n);return instructions}function isOpener(token,tags){for(var i=0,l=tags.length;l>i;i++)if(tags[i].o==token.n)return token.tag="#",!0}function isCloser(close,open,tags){for(var i=0,l=tags.length;l>i;i++)if(tags[i].c==close&&tags[i].o==open)return!0}function esc(s){return s.replace(rSlash,"\\\\").replace(rQuot,'\\"').replace(rNewline,"\\n").replace(rCr,"\\r")}function chooseMethod(s){return~s.indexOf(".")?"d":"f"}function walk(tree){for(var code="",i=0,l=tree.length;l>i;i++){var tag=tree[i].tag;"#"==tag?code+=section(tree[i].nodes,tree[i].n,chooseMethod(tree[i].n),tree[i].i,tree[i].end,tree[i].otag+" "+tree[i].ctag):"^"==tag?code+=invertedSection(tree[i].nodes,tree[i].n,chooseMethod(tree[i].n)):"<"==tag||">"==tag?code+=partial(tree[i]):"{"==tag||"&"==tag?code+=tripleStache(tree[i].n,chooseMethod(tree[i].n)):"\n"==tag?code+=text('"\\n"'+(tree.length-1==i?"":" + i")):"_v"==tag?code+=variable(tree[i].n,chooseMethod(tree[i].n)):void 0===tag&&(code+=text('"'+esc(tree[i])+'"'))}return code}function section(nodes,id,method,start,end,tags){return"if(_.s(_."+method+'("'+esc(id)+'",c,p,1),c,p,0,'+start+","+end+',"'+tags+'")){_.rs(c,p,function(c,p,_){'+walk(nodes)+"});c.pop();}"}function invertedSection(nodes,id,method){return"if(!_.s(_."+method+'("'+esc(id)+'",c,p,1),c,p,1,0,0,"")){'+walk(nodes)+"};"}function partial(tok){return'_.b(_.rp("'+esc(tok.n)+'",c,p,"'+(tok.indent||"")+'"));'}function tripleStache(id,method){return"_.b(_.t(_."+method+'("'+esc(id)+'",c,p,0)));'}function variable(id,method){return"_.b(_.v(_."+method+'("'+esc(id)+'",c,p,0)));'}function text(id){return"_.b("+id+");"}var rIsWhitespace=/\S/,rQuot=/\"/g,rNewline=/\n/g,rCr=/\r/g,rSlash=/\\/g,tagTypes={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};Hogan.scan=function(text,delimiters){function addBuf(){buf.length>0&&(tokens.push(new String(buf)),buf="")}function lineIsWhitespace(){for(var isAllWhitespace=!0,j=lineStart;j<tokens.length;j++)if(isAllWhitespace=tokens[j].tag&&tagTypes[tokens[j].tag]<tagTypes._v||!tokens[j].tag&&null===tokens[j].match(rIsWhitespace),!isAllWhitespace)return!1;return isAllWhitespace}function filterLine(haveSeenTag,noNewLine){if(addBuf(),haveSeenTag&&lineIsWhitespace())for(var next,j=lineStart;j<tokens.length;j++)tokens[j].tag||((next=tokens[j+1])&&">"==next.tag&&(next.indent=tokens[j].toString()),tokens.splice(j,1));else noNewLine||tokens.push({tag:"\n"});seenTag=!1,lineStart=tokens.length}function changeDelimiters(text,index){var close="="+ctag,closeIndex=text.indexOf(close,index),delimiters=trim(text.substring(text.indexOf("=",index)+1,closeIndex)).split(" ");return otag=delimiters[0],ctag=delimiters[1],closeIndex+close.length-1}var len=text.length,IN_TEXT=0,IN_TAG_TYPE=1,IN_TAG=2,state=IN_TEXT,tagType=null,tag=null,buf="",tokens=[],seenTag=!1,i=0,lineStart=0,otag="{{",ctag="}}";for(delimiters&&(delimiters=delimiters.split(" "),otag=delimiters[0],ctag=delimiters[1]),i=0;len>i;i++)state==IN_TEXT?tagChange(otag,text,i)?(--i,addBuf(),state=IN_TAG_TYPE):"\n"==text.charAt(i)?filterLine(seenTag):buf+=text.charAt(i):state==IN_TAG_TYPE?(i+=otag.length-1,tag=tagTypes[text.charAt(i+1)],tagType=tag?text.charAt(i+1):"_v","="==tagType?(i=changeDelimiters(text,i),state=IN_TEXT):(tag&&i++,state=IN_TAG),seenTag=i):tagChange(ctag,text,i)?(tokens.push({tag:tagType,n:trim(buf),otag:otag,ctag:ctag,i:"/"==tagType?seenTag-ctag.length:i+otag.length}),buf="",i+=ctag.length-1,state=IN_TEXT,"{"==tagType&&("}}"==ctag?i++:cleanTripleStache(tokens[tokens.length-1]))):buf+=text.charAt(i);return filterLine(seenTag,!0),tokens},Hogan.generate=function(tree,text,options){var code='var _=this;_.b(i=i||"");'+walk(tree)+"return _.fl();";return options.asString?"function(c,p,i){"+code+";}":new Hogan.Template(new Function("c","p","i",code),text,Hogan,options)},Hogan.parse=function(tokens,text,options){return options=options||{},buildTree(tokens,"",[],options.sectionTags||[])},Hogan.cache={},Hogan.compile=function(text,options){options=options||{};var key=text+"||"+!!options.asString,t=this.cache[key];return t?t:(t=this.generate(this.parse(this.scan(text,options.delimiters),text,options),text,options),this.cache[key]=t)}}("undefined"!=typeof exports?exports:Hogan),function($){"use strict";function getElementSelection(that){var position={};if(void 0===that.selectionStart){that.focus();var select=document.selection.createRange();position.length=select.text.length,select.moveStart("character",-that.value.length),position.end=select.text.length,position.start=position.end-position.length}else position.start=that.selectionStart,position.end=that.selectionEnd,position.length=position.end-position.start;return position}function setElementSelection(that,start,end){if(void 0===that.selectionStart){that.focus();var r=that.createTextRange();r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r.select()}else that.selectionStart=start,that.selectionEnd=end}function runCallbacks($this,settings){$.each(settings,function(k,val){"function"==typeof val?settings[k]=val($this,settings,k):"function"==typeof $this.autoNumeric[val]&&(settings[k]=$this.autoNumeric[val]($this,settings,k))})}function convertKeyToNumber(settings,key){"string"==typeof settings[key]&&(settings[key]*=1)}function autoCode($this,settings){runCallbacks($this,settings),settings.oEvent=null,settings.tagList=["B","CAPTION","CITE","CODE","DD","DEL","DIV","DFN","DT","EM","H1","H2","H3","H4","H5","H6","INS","KDB","LABEL","LI","OUTPUT","P","Q","S","SAMPLE","SPAN","STRONG","TD","TH","U","VAR"];var vmax=settings.vMax.toString().split("."),vmin=settings.vMin||0===settings.vMin?settings.vMin.toString().split("."):[];if(convertKeyToNumber(settings,"vMax"),convertKeyToNumber(settings,"vMin"),convertKeyToNumber(settings,"mDec"),settings.allowLeading=!0,settings.aNeg=settings.vMin<0?"-":"",vmax[0]=vmax[0].replace("-",""),vmin[0]=vmin[0].replace("-",""),settings.mInt=Math.max(vmax[0].length,vmin[0].length,1),null===settings.mDec){var vmaxLength=0,vminLength=0;vmax[1]&&(vmaxLength=vmax[1].length),vmin[1]&&(vminLength=vmin[1].length),settings.mDec=Math.max(vmaxLength,vminLength)}null===settings.altDec&&settings.mDec>0&&("."===settings.aDec&&","!==settings.aSep?settings.altDec=",":","===settings.aDec&&"."!==settings.aSep&&(settings.altDec="."));var aNegReg=settings.aNeg?"([-\\"+settings.aNeg+"]?)":"(-?)";settings.aNegRegAutoStrip=aNegReg,settings.skipFirstAutoStrip=new RegExp(aNegReg+"[^-"+(settings.aNeg?"\\"+settings.aNeg:"")+"\\"+settings.aDec+"\\d].*?(\\d|\\"+settings.aDec+"\\d)"),settings.skipLastAutoStrip=new RegExp("(\\d\\"+settings.aDec+"?)[^\\"+settings.aDec+"\\d]\\D*$");var allowed="-"+settings.aNum+"\\"+settings.aDec;return settings.allowedAutoStrip=new RegExp("[^"+allowed+"]","gi"),settings.numRegAutoStrip=new RegExp(aNegReg+"(?:\\"+settings.aDec+"?(\\d+\\"+settings.aDec+"\\d+)|(\\d*(?:\\"+settings.aDec+"\\d*)?))"),settings}function autoStrip(s,settings,strip_zero){if(settings.aSign)for(;s.indexOf(settings.aSign)>-1;)s=s.replace(settings.aSign,"");s=s.replace(settings.skipFirstAutoStrip,"$1$2"),s=s.replace(settings.skipLastAutoStrip,"$1"),s=s.replace(settings.allowedAutoStrip,""),settings.altDec&&(s=s.replace(settings.altDec,settings.aDec));var m=s.match(settings.numRegAutoStrip);if(s=m?[m[1],m[2],m[3]].join(""):"",("allow"===settings.lZero||"keep"===settings.lZero)&&"strip"!==strip_zero){var parts=[],nSign="";parts=s.split(settings.aDec),-1!==parts[0].indexOf("-")&&(nSign="-",parts[0]=parts[0].replace("-","")),parts[0].length>settings.mInt&&"0"===parts[0].charAt(0)&&(parts[0]=parts[0].slice(1)),s=nSign+parts.join(settings.aDec)}if(strip_zero&&"deny"===settings.lZero||strip_zero&&"allow"===settings.lZero&&settings.allowLeading===!1){var strip_reg="^"+settings.aNegRegAutoStrip+"0*(\\d"+("leading"===strip_zero?")":"|$)");strip_reg=new RegExp(strip_reg),s=s.replace(strip_reg,"$1$2")}return s}function negativeBracket(s,nBracket,oEvent){return nBracket=nBracket.split(","),"set"===oEvent||"focusout"===oEvent?(s=s.replace("-",""),s=nBracket[0]+s+nBracket[1]):"get"!==oEvent&&"focusin"!==oEvent&&"pageLoad"!==oEvent||s.charAt(0)!==nBracket[0]||(s=s.replace(nBracket[0],"-"),s=s.replace(nBracket[1],"")),s}function truncateDecimal(s,aDec,mDec){if(aDec&&mDec){var parts=s.split(aDec);parts[1]&&parts[1].length>mDec&&(mDec>0?(parts[1]=parts[1].substring(0,mDec),s=parts.join(aDec)):s=parts[0])}return s}function fixNumber(s,aDec,aNeg){return aDec&&"."!==aDec&&(s=s.replace(aDec,".")),aNeg&&"-"!==aNeg&&(s=s.replace(aNeg,"-")),s.match(/\d/)||(s+="0"),s}function checkValue(value,settings){var decimal=value.indexOf("."),checkSmall=+value;if(-1!==decimal)if(1e-6>checkSmall&&checkSmall>-1)value=+value,1e-6>value&&value>0&&(value=(value+10).toString(),value=value.substring(1)),0>value&&value>-1&&(value=(value-10).toString(),value="-"+value.substring(2)),value=value.toString();else{var parts=value.split(".");void 0!==parts[1]&&(0===+parts[1]?value=parts[0]:(parts[1]=parts[1].replace(/0*$/,""),value=parts.join(".")))}return"keep"===settings.lZero?value:value.replace(/^0*(\d)/,"$1")}function presentNumber(s,aDec,aNeg){return aNeg&&"-"!==aNeg&&(s=s.replace("-",aNeg)),aDec&&"."!==aDec&&(s=s.replace(".",aDec)),s}function autoCheck(s,settings){s=autoStrip(s,settings),s=truncateDecimal(s,settings.aDec,settings.mDec),s=fixNumber(s,settings.aDec,settings.aNeg);var value=+s;return"set"===settings.oEvent&&(value<settings.vMin||value>settings.vMax)&&$.error("The value ("+value+") from the 'set' method falls outside of the vMin / vMax range"),value>=settings.vMin&&value<=settings.vMax}function checkEmpty(iv,settings,signOnEmpty){return""===iv||iv===settings.aNeg?"zero"===settings.wEmpty?iv+"0":"sign"===settings.wEmpty||signOnEmpty?iv+settings.aSign:iv:null}function autoGroup(iv,settings){iv=autoStrip(iv,settings);var testNeg=iv.replace(",","."),empty=checkEmpty(iv,settings,!0);if(null!==empty)return empty;var digitalGroup="";digitalGroup=2===settings.dGroup?/(\d)((\d)(\d{2}?)+)$/:4===settings.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/;var ivSplit=iv.split(settings.aDec);settings.altDec&&1===ivSplit.length&&(ivSplit=iv.split(settings.altDec));var s=ivSplit[0];if(settings.aSep)for(;digitalGroup.test(s);)s=s.replace(digitalGroup,"$1"+settings.aSep+"$2");if(0!==settings.mDec&&ivSplit.length>1?(ivSplit[1].length>settings.mDec&&(ivSplit[1]=ivSplit[1].substring(0,settings.mDec)),iv=s+settings.aDec+ivSplit[1]):iv=s,settings.aSign){var has_aNeg=-1!==iv.indexOf(settings.aNeg);iv=iv.replace(settings.aNeg,""),iv="p"===settings.pSign?settings.aSign+iv:iv+settings.aSign,has_aNeg&&(iv=settings.aNeg+iv)}return"set"===settings.oEvent&&0>testNeg&&null!==settings.nBracket&&(iv=negativeBracket(iv,settings.nBracket,settings.oEvent)),iv}function autoRound(iv,settings){iv=""===iv?"0":iv.toString(),convertKeyToNumber(settings,"mDec");var ivRounded="",i=0,nSign="",rDec="boolean"==typeof settings.aPad||null===settings.aPad?settings.aPad?settings.mDec:0:+settings.aPad,truncateZeros=function(ivRounded){var regex=0===rDec?/(\.[1-9]*)0*$/:1===rDec?/(\.\d[1-9]*)0*$/:new RegExp("(\\.\\d{"+rDec+"}[1-9]*)0*$");return ivRounded=ivRounded.replace(regex,"$1"),0===rDec&&(ivRounded=ivRounded.replace(/\.$/,"")),ivRounded};"-"===iv.charAt(0)&&(nSign="-",iv=iv.replace("-","")),iv.match(/^\d/)||(iv="0"+iv),"-"===nSign&&0===+iv&&(nSign=""),(+iv>0&&"keep"!==settings.lZero||iv.length>0&&"allow"===settings.lZero)&&(iv=iv.replace(/^0*(\d)/,"$1"));var dPos=iv.lastIndexOf("."),vdPos=-1===dPos?iv.length-1:dPos,cDec=iv.length-1-vdPos;if(cDec<=settings.mDec){if(ivRounded=iv,rDec>cDec)for(-1===dPos&&(ivRounded+=".");rDec>cDec;){var zeros="000000".substring(0,rDec-cDec);ivRounded+=zeros,cDec+=zeros.length}else cDec>rDec?ivRounded=truncateZeros(ivRounded):0===cDec&&0===rDec&&(ivRounded=ivRounded.replace(/\.$/,""));return nSign+ivRounded}var rLength=dPos+settings.mDec,tRound=+iv.charAt(rLength+1),ivArray=iv.substring(0,rLength+1).split(""),odd="."===iv.charAt(rLength)?iv.charAt(rLength-1)%2:iv.charAt(rLength)%2;if(tRound>4&&"S"===settings.mRound||tRound>4&&"A"===settings.mRound&&""===nSign||tRound>5&&"A"===settings.mRound&&"-"===nSign||tRound>5&&"s"===settings.mRound||tRound>5&&"a"===settings.mRound&&""===nSign||tRound>4&&"a"===settings.mRound&&"-"===nSign||tRound>5&&"B"===settings.mRound||5===tRound&&"B"===settings.mRound&&1===odd||tRound>0&&"C"===settings.mRound&&""===nSign||tRound>0&&"F"===settings.mRound&&"-"===nSign||tRound>0&&"U"===settings.mRound)for(i=ivArray.length-1;i>=0;i-=1)if("."!==ivArray[i]){if(ivArray[i]=+ivArray[i]+1,ivArray[i]<10)break;i>0&&(ivArray[i]="0")}return ivArray=ivArray.slice(0,rLength+1),ivRounded=truncateZeros(ivArray.join("")),0===+ivRounded?ivRounded:nSign+ivRounded}function AutoNumericHolder(that,settings){this.settings=settings,this.that=that,this.$that=$(that),this.formatted=!1,this.settingsClone=autoCode(this.$that,this.settings),this.value=that.value}function autoGet(obj){return"string"==typeof obj&&(obj=obj.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),obj="#"+obj.replace(/(:|\.)/g,"\\$1")),$(obj)}function getHolder($that,settings,update){var data=$that.data("autoNumeric");data||(data={},$that.data("autoNumeric",data));var holder=data.holder;return(void 0===holder&&settings||update)&&(holder=new AutoNumericHolder($that.get(0),settings),data.holder=holder),holder}AutoNumericHolder.prototype={init:function(e){this.value=this.that.value,this.settingsClone=autoCode(this.$that,this.settings),this.ctrlKey=e.ctrlKey,this.cmdKey=e.metaKey,this.shiftKey=e.shiftKey,this.selection=getElementSelection(this.that),("keydown"===e.type||"keyup"===e.type)&&(this.kdCode=e.keyCode),this.which=e.which,this.processed=!1,this.formatted=!1},setSelection:function(start,end,setReal){start=Math.max(start,0),end=Math.min(end,this.that.value.length),this.selection={start:start,end:end,length:end-start},(void 0===setReal||setReal)&&setElementSelection(this.that,start,end)},setPosition:function(pos,setReal){this.setSelection(pos,pos,setReal)},getBeforeAfter:function(){var value=this.value,left=value.substring(0,this.selection.start),right=value.substring(this.selection.end,value.length);return[left,right]},getBeforeAfterStriped:function(){var parts=this.getBeforeAfter();return parts[0]=autoStrip(parts[0],this.settingsClone),parts[1]=autoStrip(parts[1],this.settingsClone),parts},normalizeParts:function(left,right){var settingsClone=this.settingsClone;right=autoStrip(right,settingsClone);var strip=right.match(/^\d/)?!0:"leading";left=autoStrip(left,settingsClone,strip),""!==left&&left!==settingsClone.aNeg||"deny"!==settingsClone.lZero||right>""&&(right=right.replace(/^0*(\d)/,"$1"));var new_value=left+right;if(settingsClone.aDec){var m=new_value.match(new RegExp("^"+settingsClone.aNegRegAutoStrip+"\\"+settingsClone.aDec));m&&(left=left.replace(m[1],m[1]+"0"),new_value=left+right)}return"zero"!==settingsClone.wEmpty||new_value!==settingsClone.aNeg&&""!==new_value||(left+="0"),[left,right]},setValueParts:function(left,right){var settingsClone=this.settingsClone,parts=this.normalizeParts(left,right),new_value=parts.join(""),position=parts[0].length;return autoCheck(new_value,settingsClone)?(new_value=truncateDecimal(new_value,settingsClone.aDec,settingsClone.mDec),position>new_value.length&&(position=new_value.length),this.value=new_value,this.setPosition(position,!1),!0):!1},setValuePartsNotCheck:function(left,right){var settingsClone=this.settingsClone,parts=this.normalizeParts(left,right),new_value=parts.join(""),position=parts[0].length;return new_value=truncateDecimal(new_value,settingsClone.aDec,settingsClone.mDec),
position>new_value.length&&(position=new_value.length),this.value=new_value,this.setPosition(position,!1),!0},signPosition:function(){var settingsClone=this.settingsClone,aSign=settingsClone.aSign,that=this.that;if(aSign){var aSignLen=aSign.length;if("p"===settingsClone.pSign){var hasNeg=settingsClone.aNeg&&that.value&&that.value.charAt(0)===settingsClone.aNeg;return hasNeg?[1,aSignLen+1]:[0,aSignLen]}var valueLen=that.value.length;return[valueLen-aSignLen,valueLen]}return[1e3,-1]},expandSelectionOnSign:function(setReal){var sign_position=this.signPosition(),selection=this.selection;selection.start<sign_position[1]&&selection.end>sign_position[0]&&((selection.start<sign_position[0]||selection.end>sign_position[1])&&this.value.substring(Math.max(selection.start,sign_position[0]),Math.min(selection.end,sign_position[1])).match(/^\s*$/)?selection.start<sign_position[0]?this.setSelection(selection.start,sign_position[0],setReal):this.setSelection(sign_position[1],selection.end,setReal):this.setSelection(Math.min(selection.start,sign_position[0]),Math.max(selection.end,sign_position[1]),setReal))},checkPaste:function(){if(void 0!==this.valuePartsBeforePaste){var parts=this.getBeforeAfter(),oldParts=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,parts[0]=parts[0].substr(0,oldParts[0].length)+autoStrip(parts[0].substr(oldParts[0].length),this.settingsClone),this.setValueParts(parts[0],parts[1])||(this.value=oldParts.join(""),this.setPosition(oldParts[0].length,!1))}},skipAllways:function(e){var kdCode=this.kdCode,which=this.which,ctrlKey=this.ctrlKey,cmdKey=this.cmdKey,shiftKey=this.shiftKey;if((ctrlKey||cmdKey)&&"keyup"===e.type&&void 0!==this.valuePartsBeforePaste||shiftKey&&45===kdCode)return this.checkPaste(),!1;if(kdCode>=112&&123>=kdCode||kdCode>=91&&93>=kdCode||kdCode>=9&&31>=kdCode||8>kdCode&&(0===which||which===kdCode)||144===kdCode||145===kdCode||45===kdCode)return!0;if((ctrlKey||cmdKey)&&65===kdCode)return!0;if((ctrlKey||cmdKey)&&(67===kdCode||86===kdCode||88===kdCode))return"keydown"===e.type&&this.expandSelectionOnSign(),(86===kdCode||45===kdCode)&&("keydown"===e.type||"keypress"===e.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===e.type||"keypress"===e.type||67===kdCode;if(ctrlKey||cmdKey)return!0;if(37===kdCode||39===kdCode){var aSep=this.settingsClone.aSep,start=this.selection.start,value=this.that.value;return"keydown"===e.type&&aSep&&!this.shiftKey&&(37===kdCode&&value.charAt(start-2)===aSep?this.setPosition(start-1):39===kdCode&&value.charAt(start+1)===aSep&&this.setPosition(start+1)),!0}return kdCode>=34&&40>=kdCode?!0:!1},processAllways:function(){var parts,settingsClone=this.settingsClone;return 8===this.kdCode||46===this.kdCode?(this.selection.length?(this.expandSelectionOnSign(!1),parts=this.getBeforeAfterStriped(),"undefined"!=settingsClone.aNotCheck&&settingsClone.aNotCheck?this.setValuePartsNotCheck(parts[0],parts[1]):this.setValueParts(parts[0],parts[1])):(parts=this.getBeforeAfterStriped(),8===this.kdCode?parts[0]=parts[0].substring(0,parts[0].length-1):parts[1]=parts[1].substring(1,parts[1].length),"undefined"!=settingsClone.aNotCheck&&settingsClone.aNotCheck?this.setValuePartsNotCheck(parts[0],parts[1]):this.setValueParts(parts[0],parts[1])),!0):!1},processKeypress:function(){var settingsClone=this.settingsClone,cCode=String.fromCharCode(this.which),parts=this.getBeforeAfterStriped(),left=parts[0],right=parts[1];return cCode===settingsClone.aDec||settingsClone.altDec&&cCode===settingsClone.altDec||("."===cCode||","===cCode)&&110===this.kdCode?settingsClone.mDec&&settingsClone.aDec?settingsClone.aNeg&&right.indexOf(settingsClone.aNeg)>-1?!0:left.indexOf(settingsClone.aDec)>-1?!0:right.indexOf(settingsClone.aDec)>0?!0:(0===right.indexOf(settingsClone.aDec)&&(right=right.substr(1)),this.setValueParts(left+settingsClone.aDec,right),!0):!0:"-"===cCode||"+"===cCode?settingsClone.aNeg?(""===left&&right.indexOf(settingsClone.aNeg)>-1&&(left=settingsClone.aNeg,right=right.substring(1,right.length)),left=left.charAt(0)===settingsClone.aNeg?left.substring(1,left.length):"-"===cCode?settingsClone.aNeg+left:left,this.setValueParts(left,right),!0):!0:cCode>="0"&&"9">=cCode?(settingsClone.aNeg&&""===left&&right.indexOf(settingsClone.aNeg)>-1&&(left=settingsClone.aNeg,right=right.substring(1,right.length)),settingsClone.vMax<=0&&settingsClone.vMin<settingsClone.vMax&&-1===this.value.indexOf(settingsClone.aNeg)&&"0"!==cCode&&(left=settingsClone.aNeg+left),"undefined"!=settingsClone.aNotCheck&&settingsClone.aNotCheck?this.setValuePartsNotCheck(left+cCode,right):this.setValueParts(left+cCode,right),!0):!0},formatQuick:function(){var settingsClone=this.settingsClone,parts=this.getBeforeAfterStriped(),leftLength=this.value;if((""===settingsClone.aSep||""!==settingsClone.aSep&&-1===leftLength.indexOf(settingsClone.aSep))&&(""===settingsClone.aSign||""!==settingsClone.aSign&&-1===leftLength.indexOf(settingsClone.aSign))){var subParts=[],nSign="";subParts=leftLength.split(settingsClone.aDec),subParts[0].indexOf("-")>-1&&(nSign="-",subParts[0]=subParts[0].replace("-",""),parts[0]=parts[0].replace("-","")),subParts[0].length>settingsClone.mInt&&"0"===parts[0].charAt(0)&&(parts[0]=parts[0].slice(1)),parts[0]=nSign+parts[0]}var value=autoGroup(this.value,this.settingsClone),position=value.length;if(value){var left_ar=parts[0].split(""),i=0;for(i;i<left_ar.length;i+=1)left_ar[i].match("\\d")||(left_ar[i]="\\"+left_ar[i]);var leftReg=new RegExp("^.*?"+left_ar.join(".*?")),newLeft=value.match(leftReg);newLeft?(position=newLeft[0].length,(0===position&&value.charAt(0)!==settingsClone.aNeg||1===position&&value.charAt(0)===settingsClone.aNeg)&&settingsClone.aSign&&"p"===settingsClone.pSign&&(position=this.settingsClone.aSign.length+("-"===value.charAt(0)?1:0))):settingsClone.aSign&&"s"===settingsClone.pSign&&(position-=settingsClone.aSign.length)}this.that.value=value,this.setPosition(position),this.formatted=!0}};var methods={init:function(options){return this.each(function(){var $this=$(this),settings=$this.data("autoNumeric"),tagData=$this.data();if("object"==typeof settings)return this;var defaults={aNum:"0123456789",aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"999999999.99",vMin:"0.00",mDec:null,mRound:"S",aPad:!0,nBracket:null,wEmpty:"empty",lZero:"allow",aForm:!0,onSomeEvent:function(){}};if(settings=$.extend({},defaults,tagData,options),settings.aDec===settings.aSep)return $.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand separator aSep: '"+settings.aSep+"' are the same character"),this;$this.data("autoNumeric",settings),settings.lastSetValue="",settings.runOnce=!1;var holder=getHolder($this,settings);if(-1===$.inArray($this.prop("tagName"),settings.tagList)&&"INPUT"!==$this.prop("tagName"))return $.error("The <"+$this.prop("tagName")+"> is not supported by autoNumeric()"),this;if(settings.runOnce===!1&&settings.aForm){if($this.is("input[type=text], input[type=hidden], input:not([type])")){var setValue=!0;""===$this[0].value&&"empty"===settings.wEmpty&&($this[0].value="",setValue=!1),""===$this[0].value&&"sign"===settings.wEmpty&&($this[0].value=settings.aSign,setValue=!1),setValue&&$this.autoNumeric("set",$this.val())}-1!==$.inArray($this.prop("tagName"),settings.tagList)&&""!==$this.text()&&$this.autoNumeric("set",$this.text())}settings.runOnce=!0,$this.is("input[type=text], input[type=hidden], input:not([type])")&&($this.on("keydown.autoNumeric",function(e){return holder=getHolder($this),holder.settings.aDec===holder.settings.aSep?($.error("autoNumeric will not function properly when the decimal character aDec: '"+holder.settings.aDec+"' and thousand separator aSep: '"+holder.settings.aSep+"' are the same character"),this):holder.that.readOnly?(holder.processed=!0,!0):(holder.init(e),holder.settings.oEvent="keydown",holder.skipAllways(e)?(holder.processed=!0,!0):holder.processAllways()?(holder.processed=!0,holder.formatQuick(),e.preventDefault(),!1):(holder.formatted=!1,!0))}),$this.on("keypress.autoNumeric",function(e){var holder=getHolder($this),processed=holder.processed;return holder.init(e),holder.settings.oEvent="keypress",holder.skipAllways(e)?!0:processed?(e.preventDefault(),!1):holder.processAllways()||holder.processKeypress()?(holder.formatQuick(),e.preventDefault(),!1):void(holder.formatted=!1)}),$this.on("keyup.autoNumeric",function(e){var holder=getHolder($this);holder.init(e),holder.settings.oEvent="keyup";var skip=holder.skipAllways(e);return holder.kdCode=0,delete holder.valuePartsBeforePaste,$this[0].value===holder.settings.aSign&&("s"===holder.settings.pSign?setElementSelection(this,0,0):setElementSelection(this,holder.settings.aSign.length,holder.settings.aSign.length)),skip?!0:""===this.value?!0:void(holder.formatted||holder.formatQuick())}),$this.on("focusin.autoNumeric",function(){var holder=getHolder($this);if(holder.settingsClone.oEvent="focusin",null!==holder.settingsClone.nBracket){var checkVal=$this.val();$this.val(negativeBracket(checkVal,holder.settingsClone.nBracket,holder.settingsClone.oEvent))}holder.inVal=$this.val();var onempty=checkEmpty(holder.inVal,holder.settingsClone,!0);null!==onempty&&($this.val(onempty),"s"===holder.settings.pSign?setElementSelection(this,0,0):setElementSelection(this,holder.settings.aSign.length,holder.settings.aSign.length))}),$this.on("focusout.autoNumeric",function(){var holder=getHolder($this),settingsClone=holder.settingsClone,value=$this.val(),origValue=value;holder.settingsClone.oEvent="focusout";var strip_zero="";"allow"===settingsClone.lZero&&(settingsClone.allowLeading=!1,strip_zero="leading"),""!==value&&(value=autoStrip(value,settingsClone,strip_zero),null===checkEmpty(value,settingsClone)&&autoCheck(value,settingsClone,$this[0])?(value=fixNumber(value,settingsClone.aDec,settingsClone.aNeg),value=autoRound(value,settingsClone),value=presentNumber(value,settingsClone.aDec,settingsClone.aNeg)):value="");var groupedValue=checkEmpty(value,settingsClone,!1);null===groupedValue&&(groupedValue=autoGroup(value,settingsClone)),groupedValue!==origValue&&$this.val(groupedValue),groupedValue!==holder.inVal&&($this.change(),delete holder.inVal),null!==settingsClone.nBracket&&$this.autoNumeric("get")<0&&(holder.settingsClone.oEvent="focusout",$this.val(negativeBracket($this.val(),settingsClone.nBracket,settingsClone.oEvent)))}))})},destroy:function(){return $(this).each(function(){var $this=$(this);$this.off(".autoNumeric"),$this.removeData("autoNumeric")})},update:function(options){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data("autoNumeric");if("object"!=typeof settings)return $.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method"),this;var strip=$this.autoNumeric("get");return settings=$.extend(settings,options),getHolder($this,settings,!0),settings.aDec===settings.aSep?($.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand separator aSep: '"+settings.aSep+"' are the same character"),this):($this.data("autoNumeric",settings),""!==$this.val()||""!==$this.text()?$this.autoNumeric("set",strip):void 0)})},set:function(valueIn){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data("autoNumeric"),value=valueIn.toString(),testValue=valueIn.toString();return"object"!=typeof settings?($.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method"),this):(testValue!==$this.attr("value")&&testValue!==$this.text()||settings.runOnce!==!1||(value=value.replace(",",".")),testValue!==$this.attr("value")&&"INPUT"===$this.prop("tagName")&&settings.runOnce===!1&&(value=autoStrip(value,settings)),$.isNumeric(+value)?(value=checkValue(value,settings),settings.oEvent="set",settings.lastSetValue=value,value.toString(),""!==value&&(value=autoRound(value,settings)),value=presentNumber(value,settings.aDec,settings.aNeg),autoCheck(value,settings)||(value=autoRound("",settings)),value=autoGroup(value,settings),$this.is("input[type=text], input[type=hidden], input:not([type])")?$this.val(value):-1!==$.inArray($this.prop("tagName"),settings.tagList)?$this.text(value):($.error("The <"+$this.prop("tagName")+"> is not supported by autoNumeric()"),!1)):"")})},get:function(){var $this=autoGet($(this)),settings=$this.data("autoNumeric");if("object"!=typeof settings)return $.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method"),this;settings.oEvent="get";var getValue="";if($this.is("input[type=text], input[type=hidden], input:not([type])"))getValue=$this.eq(0).val();else{if(-1===$.inArray($this.prop("tagName"),settings.tagList))return $.error("The <"+$this.prop("tagName")+"> is not supported by autoNumeric()"),!1;getValue=$this.eq(0).text()}return""===getValue&&"empty"===settings.wEmpty||getValue===settings.aSign&&("sign"===settings.wEmpty||"empty"===settings.wEmpty)?"":(null!==settings.nBracket&&""!==getValue&&(getValue=negativeBracket(getValue,settings.nBracket,settings.oEvent)),(settings.runOnce||settings.aForm===!1)&&(getValue=autoStrip(getValue,settings)),getValue=fixNumber(getValue,settings.aDec,settings.aNeg),0===+getValue&&"keep"!==settings.lZero&&(getValue="0"),"keep"===settings.lZero?getValue:getValue=checkValue(getValue,settings))},getString:function(){var isAutoNumeric=!1,$this=autoGet($(this)),str=$this.serialize(),parts=str.split("&"),i=0;for(i;i<parts.length;i+=1){var miniParts=parts[i].split("="),settings=$('*[name="'+decodeURIComponent(miniParts[0])+'"]').data("autoNumeric");"object"==typeof settings&&null!==miniParts[1]&&void 0!==$('*[name="'+decodeURIComponent(miniParts[0])+'"]').data("autoNumeric")&&(miniParts[1]=$('input[name="'+decodeURIComponent(miniParts[0])+'"]').autoNumeric("get"),parts[i]=miniParts.join("="),isAutoNumeric=!0)}return isAutoNumeric===!0?parts.join("&"):($.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getString' method"),this)},getArray:function(){var isAutoNumeric=!1,$this=autoGet($(this)),formFields=$this.serializeArray();return $.each(formFields,function(i,field){var settings=$('*[name="'+decodeURIComponent(field.name)+'"]').data("autoNumeric");"object"==typeof settings&&(""!==field.value&&void 0!==$('*[name="'+decodeURIComponent(field.name)+'"]').data("autoNumeric")&&(field.value=$('input[name="'+decodeURIComponent(field.name)+'"]').autoNumeric("get").toString()),isAutoNumeric=!0)}),isAutoNumeric===!0?formFields:($.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getArray' method"),this)},getSettings:function(){var $this=autoGet($(this));return $this.eq(0).data("autoNumeric")}};$.fn.autoNumeric=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error('Method "'+method+'" is not supported by autoNumeric()'):methods.init.apply(this,arguments)}}(jQuery),function($){var _={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return"string"==typeof obj},isNumber:function(obj){return"number"==typeof obj},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return"undefined"==typeof obj},bind:$.proxy,each:function(collection,cb){function reverseArgs(index,value){return cb(value,index)}$.each(collection,reverseArgs)},map:$.map,filter:$.grep,every:function(obj,test){var result=!0;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?void 0:!1}),!!result):result},some:function(obj,test){var result=!1;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?!1:void 0}),!!result):result},mixin:$.extend,getUniqueId:function(){var counter=0;return function(){return counter++}}(),templatify:function(obj){function template(){return String(obj)}return $.isFunction(obj)?obj:template},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var later,callNow,context=this,args=arguments;return later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout,clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;return previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)},function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},noop:function(){}},VERSION="0.10.2",tokenizers=function(root){function whitespace(s){return s.split(/\s+/)}function nonword(s){return s.split(/\W+/)}function getObjTokenizer(tokenizer){return function(key){return function(o){return tokenizer(o[key])}}}return{nonword:nonword,whitespace:whitespace,obj:{nonword:getObjTokenizer(nonword),whitespace:getObjTokenizer(whitespace)}}}(),LruCache=function(){function LruCache(maxSize){this.maxSize=maxSize||100,this.size=0,this.hash={},this.list=new List}function List(){this.head=this.tail=null}function Node(key,val){this.key=key,this.val=val,this.prev=this.next=null}return _.mixin(LruCache.prototype,{set:function(key,val){var node,tailItem=this.list.tail;this.size>=this.maxSize&&(this.list.remove(tailItem),delete this.hash[tailItem.key]),(node=this.hash[key])?(node.val=val,this.list.moveToFront(node)):(node=new Node(key,val),this.list.add(node),this.hash[key]=node,this.size++)},get:function(key){var node=this.hash[key];return node?(this.list.moveToFront(node),node.val):void 0}}),_.mixin(List.prototype,{add:function(node){this.head&&(node.next=this.head,this.head.prev=node),this.head=node,this.tail=this.tail||node},remove:function(node){node.prev?node.prev.next=node.next:this.head=node.next,node.next?node.next.prev=node.prev:this.tail=node.prev},moveToFront:function(node){this.remove(node),this.add(node)}}),LruCache}(),PersistentStorage=function(){function PersistentStorage(namespace){this.prefix=["__",namespace,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function now(){return(new Date).getTime()}function encode(val){return JSON.stringify(_.isUndefined(val)?null:val)}function decode(val){return JSON.parse(val)}var ls,methods;try{ls=window.localStorage,ls.setItem("~~~","!"),ls.removeItem("~~~")}catch(err){ls=null}return methods=ls&&window.JSON?{_prefix:function(key){return this.prefix+key},_ttlKey:function(key){return this._prefix(key)+this.ttlKey},get:function(key){return this.isExpired(key)&&this.remove(key),decode(ls.getItem(this._prefix(key)))},set:function(key,val,ttl){return _.isNumber(ttl)?ls.setItem(this._ttlKey(key),encode(now()+ttl)):ls.removeItem(this._ttlKey(key)),ls.setItem(this._prefix(key),encode(val))},remove:function(key){return ls.removeItem(this._ttlKey(key)),ls.removeItem(this._prefix(key)),this},clear:function(){var i,key,keys=[],len=ls.length;for(i=0;len>i;i++)(key=ls.key(i)).match(this.keyMatcher)&&keys.push(key.replace(this.keyMatcher,""));for(i=keys.length;i--;)this.remove(keys[i]);return this},isExpired:function(key){var ttl=decode(ls.getItem(this._ttlKey(key)));return _.isNumber(ttl)&&now()>ttl?!0:!1}}:{get:_.noop,set:_.noop,remove:_.noop,clear:_.noop,isExpired:_.noop},_.mixin(PersistentStorage.prototype,methods),PersistentStorage}(),Transport=function(){function Transport(o){o=o||{},this._send=o.transport?callbackToDeferred(o.transport):$.ajax,this._get=o.rateLimiter?o.rateLimiter(this._get):this._get}function callbackToDeferred(fn){return function(url,o){function onSuccess(resp){_.defer(function(){deferred.resolve(resp)})}function onError(err){_.defer(function(){deferred.reject(err)})}var deferred=$.Deferred();return fn(url,o,onSuccess,onError),deferred}}var pendingRequestsCount=0,pendingRequests={},maxPendingRequests=6,requestCache=new LruCache(10);return Transport.setMaxPendingRequests=function(num){maxPendingRequests=num},Transport.resetCache=function(){requestCache=new LruCache(10)},_.mixin(Transport.prototype,{_get:function(url,o,cb){function done(resp){cb&&cb(null,resp),requestCache.set(url,resp)}function fail(){cb&&cb(!0)}function always(){pendingRequestsCount--,delete pendingRequests[url],that.onDeckRequestArgs&&(that._get.apply(that,that.onDeckRequestArgs),that.onDeckRequestArgs=null)}var jqXhr,that=this;(jqXhr=pendingRequests[url])?jqXhr.done(done).fail(fail):maxPendingRequests>pendingRequestsCount?(pendingRequestsCount++,pendingRequests[url]=this._send(url,o).done(done).fail(fail).always(always)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(url,o,cb){var resp;return _.isFunction(o)&&(cb=o,o={}),(resp=requestCache.get(url))?_.defer(function(){cb&&cb(null,resp)}):this._get(url,o,cb),!!resp}}),Transport}(),SearchIndex=function(){function SearchIndex(o){o=o||{},o.datumTokenizer&&o.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=o.datumTokenizer,this.queryTokenizer=o.queryTokenizer,this.reset()}function normalizeTokens(tokens){return tokens=_.filter(tokens,function(token){return!!token}),tokens=_.map(tokens,function(token){return token.toLowerCase()})}function newNode(){return{ids:[],children:{}}}function unique(array){for(var seen={},uniques=[],i=0;i<array.length;i++)seen[array[i]]||(seen[array[i]]=!0,uniques.push(array[i]));return uniques}function getIntersection(arrayA,arrayB){function compare(a,b){return a-b}var ai=0,bi=0,intersection=[];for(arrayA=arrayA.sort(compare),arrayB=arrayB.sort(compare);ai<arrayA.length&&bi<arrayB.length;)arrayA[ai]<arrayB[bi]?ai++:arrayA[ai]>arrayB[bi]?bi++:(intersection.push(arrayA[ai]),ai++,bi++);return intersection}return _.mixin(SearchIndex.prototype,{bootstrap:function(o){this.datums=o.datums,this.trie=o.trie},add:function(data){var that=this;data=_.isArray(data)?data:[data],_.each(data,function(datum){var id,tokens;id=that.datums.push(datum)-1,tokens=normalizeTokens(that.datumTokenizer(datum)),_.each(tokens,function(token){var node,chars,ch;for(node=that.trie,chars=token.split("");ch=chars.shift();)node=node.children[ch]||(node.children[ch]=newNode()),node.ids.push(id)})})},get:function(query){var tokens,matches,that=this;return tokens=normalizeTokens(this.queryTokenizer(query)),_.each(tokens,function(token){var node,chars,ch,ids;if(matches&&0===matches.length)return!1;for(node=that.trie,chars=token.split("");node&&(ch=chars.shift());)node=node.children[ch];return node&&0===chars.length?(ids=node.ids.slice(0),void(matches=matches?getIntersection(matches,ids):ids)):(matches=[],!1)}),matches?_.map(unique(matches),function(id){return that.datums[id]}):[]},reset:function(){this.datums=[],this.trie=newNode()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),SearchIndex}(),oParser=function(){function getLocal(o){return o.local||null}function getPrefetch(o){var prefetch,defaults;return defaults={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(prefetch=o.prefetch||null)&&(prefetch=_.isString(prefetch)?{url:prefetch}:prefetch,prefetch=_.mixin(defaults,prefetch),prefetch.thumbprint=VERSION+prefetch.thumbprint,prefetch.ajax.type=prefetch.ajax.type||"GET",prefetch.ajax.dataType=prefetch.ajax.dataType||"json",!prefetch.url&&$.error("prefetch requires url to be set")),prefetch}function getRemote(o){function byDebounce(wait){return function(fn){return _.debounce(fn,wait)}}function byThrottle(wait){return function(fn){return _.throttle(fn,wait)}}var remote,defaults;return defaults={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(remote=o.remote||null)&&(remote=_.isString(remote)?{url:remote}:remote,remote=_.mixin(defaults,remote),remote.rateLimiter=/^throttle$/i.test(remote.rateLimitBy)?byThrottle(remote.rateLimitWait):byDebounce(remote.rateLimitWait),remote.ajax.type=remote.ajax.type||"GET",remote.ajax.dataType=remote.ajax.dataType||"json",delete remote.rateLimitBy,delete remote.rateLimitWait,!remote.url&&$.error("remote requires url to be set")),remote}return{local:getLocal,prefetch:getPrefetch,remote:getRemote}}();!function(root){function Bloodhound(o){o&&(o.local||o.prefetch||o.remote)||$.error("one of local, prefetch, or remote is required"),this.limit=o.limit||5,this.sorter=getSorter(o.sorter),this.dupDetector=o.dupDetector||ignoreDuplicates,this.local=oParser.local(o),this.prefetch=oParser.prefetch(o),this.remote=oParser.remote(o),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new SearchIndex({datumTokenizer:o.datumTokenizer,queryTokenizer:o.queryTokenizer}),this.storage=this.cacheKey?new PersistentStorage(this.cacheKey):null}function getSorter(sortFn){function sort(array){return array.sort(sortFn)}function noSort(array){return array}return _.isFunction(sortFn)?sort:noSort}function ignoreDuplicates(){return!1}var old,keys;return old=root.Bloodhound,keys={data:"data",protocol:"protocol",thumbprint:"thumbprint"},root.Bloodhound=Bloodhound,Bloodhound.noConflict=function(){return root.Bloodhound=old,Bloodhound},Bloodhound.tokenizers=tokenizers,_.mixin(Bloodhound.prototype,{_loadPrefetch:function(o){function handlePrefetchResponse(resp){that.clear(),that.add(o.filter?o.filter(resp):resp),that._saveToStorage(that.index.serialize(),o.thumbprint,o.ttl)}var serialized,deferred,that=this;return(serialized=this._readFromStorage(o.thumbprint))?(this.index.bootstrap(serialized),deferred=$.Deferred().resolve()):deferred=$.ajax(o.url,o.ajax).done(handlePrefetchResponse),deferred},_getFromRemote:function(query,cb){function handleRemoteResponse(err,resp){cb(err?[]:that.remote.filter?that.remote.filter(resp):resp)}var url,uriEncodedQuery,that=this;return query=query||"",uriEncodedQuery=encodeURIComponent(query),url=this.remote.replace?this.remote.replace(this.remote.url,query):this.remote.url.replace(this.remote.wildcard,uriEncodedQuery),this.transport.get(url,this.remote.ajax,handleRemoteResponse)},_saveToStorage:function(data,thumbprint,ttl){this.storage&&(this.storage.set(keys.data,data,ttl),this.storage.set(keys.protocol,location.protocol,ttl),this.storage.set(keys.thumbprint,thumbprint,ttl))},_readFromStorage:function(thumbprint){var isExpired,stored={};return this.storage&&(stored.data=this.storage.get(keys.data),stored.protocol=this.storage.get(keys.protocol),stored.thumbprint=this.storage.get(keys.thumbprint)),isExpired=stored.thumbprint!==thumbprint||stored.protocol!==location.protocol,stored.data&&!isExpired?stored.data:null},_initialize:function(){function addLocalToIndex(){that.add(_.isFunction(local)?local():local)}var deferred,that=this,local=this.local;return deferred=this.prefetch?this._loadPrefetch(this.prefetch):$.Deferred().resolve(),local&&deferred.done(addLocalToIndex),this.transport=this.remote?new Transport(this.remote):null,this.initPromise=deferred.promise()},initialize:function(force){return!this.initPromise||force?this._initialize():this.initPromise},add:function(data){this.index.add(data)},get:function(query,cb){function returnRemoteMatches(remoteMatches){var matchesWithBackfill=matches.slice(0);_.each(remoteMatches,function(remoteMatch){var isDuplicate;return isDuplicate=_.some(matchesWithBackfill,function(match){return that.dupDetector(remoteMatch,match)}),!isDuplicate&&matchesWithBackfill.push(remoteMatch),matchesWithBackfill.length<that.limit}),cb&&cb(that.sorter(matchesWithBackfill))}var that=this,matches=[],cacheHit=!1;matches=this.index.get(query),matches=this.sorter(matches).slice(0,this.limit),matches.length<this.limit&&this.transport&&(cacheHit=this._getFromRemote(query,returnRemoteMatches)),cacheHit||(matches.length>0||!this.transport)&&cb&&cb(matches)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&Transport.resetCache()},ttAdapter:function(){return _.bind(this.get,this)}}),Bloodhound}(this);var html={wrapper:'<span class="twitter-typeahead clearfix"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},css={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};_.isMsie()&&_.mixin(css.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),_.isMsie()&&_.isMsie()<=7&&_.mixin(css.input,{marginTop:"-1px"});var EventBus=function(){function EventBus(o){o&&o.el||$.error("EventBus initialized without el"),this.$el=$(o.el)}var namespace="typeahead:";return _.mixin(EventBus.prototype,{trigger:function(type){var args=[].slice.call(arguments,1);this.$el.trigger(namespace+type,args)}}),EventBus}(),EventEmitter=function(){function on(method,types,cb,context){var type;if(!cb)return this;for(types=types.split(splitter),cb=context?bindContext(cb,context):cb,this._callbacks=this._callbacks||{};type=types.shift();)this._callbacks[type]=this._callbacks[type]||{sync:[],async:[]},this._callbacks[type][method].push(cb);return this}function onAsync(types,cb,context){return on.call(this,"async",types,cb,context)}function onSync(types,cb,context){return on.call(this,"sync",types,cb,context)}function off(types){var type;if(!this._callbacks)return this;for(types=types.split(splitter);type=types.shift();)delete this._callbacks[type];return this}function trigger(types){var type,callbacks,args,syncFlush,asyncFlush;if(!this._callbacks)return this;for(types=types.split(splitter),args=[].slice.call(arguments,1);(type=types.shift())&&(callbacks=this._callbacks[type]);)syncFlush=getFlush(callbacks.sync,this,[type].concat(args)),asyncFlush=getFlush(callbacks.async,this,[type].concat(args)),syncFlush()&&nextTick(asyncFlush);return this}function getFlush(callbacks,context,args){function flush(){for(var cancelled,i=0;!cancelled&&i<callbacks.length;i+=1)cancelled=callbacks[i].apply(context,args)===!1;return!cancelled}return flush}function getNextTick(){var nextTickFn;return nextTickFn=window.setImmediate?function(fn){setImmediate(function(){fn()})}:function(fn){setTimeout(function(){fn()},0)}}function bindContext(fn,context){return fn.bind?fn.bind(context):function(){fn.apply(context,[].slice.call(arguments,0))}}var splitter=/\s+/,nextTick=getNextTick();return{onSync:onSync,onAsync:onAsync,off:off,trigger:trigger}}(),highlight=function(doc){function getRegex(patterns,caseSensitive,wordsOnly){for(var regexStr,escapedPatterns=[],i=0;i<patterns.length;i++)escapedPatterns.push(_.escapeRegExChars(patterns[i]));return regexStr=wordsOnly?"\\b("+escapedPatterns.join("|")+")\\b":"("+escapedPatterns.join("|")+")",caseSensitive?new RegExp(regexStr):new RegExp(regexStr,"i")}var defaults={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function hightlightTextNode(textNode){var match,patternNode;return(match=regex.exec(textNode.data))&&(wrapperNode=doc.createElement(o.tagName),o.className&&(wrapperNode.className=o.className),patternNode=textNode.splitText(match.index),
patternNode.splitText(match[0].length),wrapperNode.appendChild(patternNode.cloneNode(!0)),textNode.parentNode.replaceChild(wrapperNode,patternNode)),!!match}function traverse(el,hightlightTextNode){for(var childNode,TEXT_NODE_TYPE=3,i=0;i<el.childNodes.length;i++)childNode=el.childNodes[i],childNode.nodeType===TEXT_NODE_TYPE?i+=hightlightTextNode(childNode)?1:0:traverse(childNode,hightlightTextNode)}var regex;o=_.mixin({},defaults,o),o.node&&o.pattern&&(o.pattern=_.isArray(o.pattern)?o.pattern:[o.pattern],regex=getRegex(o.pattern,o.caseSensitive,o.wordsOnly),traverse(o.node,hightlightTextNode))}}(window.document),Input=function(){function Input(o){var onBlur,onFocus,onKeydown,onInput,that=this;o=o||{},o.input||$.error("input is missing"),onBlur=_.bind(this._onBlur,this),onFocus=_.bind(this._onFocus,this),onKeydown=_.bind(this._onKeydown,this),onInput=_.bind(this._onInput,this),this.$hint=$(o.hint),this.$input=$(o.input).on("blur.tt",onBlur).on("focus.tt",onFocus).on("keydown.tt",onKeydown),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=_.noop),_.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){specialKeyCodeMap[$e.which||$e.keyCode]||_.defer(_.bind(that._onInput,that,$e))}):this.$input.on("input.tt",onInput),this.query=this.$input.val(),this.$overflowHelper=buildOverflowHelper(this.$input)}function buildOverflowHelper($input){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input)}function areQueriesEquivalent(a,b){return Input.normalizeQuery(a)===Input.normalizeQuery(b)}function withModifier($e){return $e.altKey||$e.ctrlKey||$e.metaKey||$e.shiftKey}var specialKeyCodeMap;return specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},Input.normalizeQuery=function(str){return(str||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},_.mixin(Input.prototype,EventEmitter,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function($e){var keyName=specialKeyCodeMap[$e.which||$e.keyCode];this._managePreventDefault(keyName,$e),keyName&&this._shouldTrigger(keyName,$e)&&this.trigger(keyName+"Keyed",$e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(keyName,$e){var preventDefault,hintValue,inputValue;switch(keyName){case"tab":hintValue=this.getHint(),inputValue=this.getInputValue(),preventDefault=hintValue&&hintValue!==inputValue&&!withModifier($e);break;case"up":case"down":preventDefault=!withModifier($e);break;default:preventDefault=!1}preventDefault&&$e.preventDefault()},_shouldTrigger:function(keyName,$e){var trigger;switch(keyName){case"tab":trigger=!withModifier($e);break;default:trigger=!0}return trigger},_checkInputValue:function(){var inputValue,areEquivalent,hasDifferentWhitespace;inputValue=this.getInputValue(),areEquivalent=areQueriesEquivalent(inputValue,this.query),hasDifferentWhitespace=areEquivalent?this.query.length!==inputValue.length:!1,areEquivalent?hasDifferentWhitespace&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=inputValue)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(query){this.query=query},getInputValue:function(){return this.$input.val()},setInputValue:function(value,silent){this.$input.val(value),silent?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(value){this.$hint.val(value)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var val,hint,valIsPrefixOfHint,isValid;val=this.getInputValue(),hint=this.getHint(),valIsPrefixOfHint=val!==hint&&0===hint.indexOf(val),isValid=""!==val&&valIsPrefixOfHint&&!this.hasOverflow(),!isValid&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var constraint=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=constraint},isCursorAtEnd:function(){var valueLength,selectionStart,range;return valueLength=this.$input.val().length,selectionStart=this.$input[0].selectionStart,_.isNumber(selectionStart)?selectionStart===valueLength:document.selection?(range=document.selection.createRange(),range.moveStart("character",-valueLength),valueLength===range.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),Input}(),Dataset=function(){function Dataset(o){o=o||{},o.templates=o.templates||{},o.source||$.error("missing source"),o.name&&!isValidName(o.name)&&$.error("invalid dataset name: "+o.name),this.query=null,this.highlight=!!o.highlight,this.name=o.name||_.getUniqueId(),this.source=o.source,this.displayFn=getDisplayFn(o.display||o.displayKey),this.templates=getTemplates(o.templates,this.displayFn),this.$el=$(html.dataset.replace("%CLASS%",this.name))}function getDisplayFn(display){function displayFn(obj){return obj[display]}return display=display||"value",_.isFunction(display)?display:displayFn}function getTemplates(templates,displayFn){function suggestionTemplate(context){return"<p>"+displayFn(context)+"</p>"}return{empty:templates.empty&&_.templatify(templates.empty),header:templates.header&&_.templatify(templates.header),footer:templates.footer&&_.templatify(templates.footer),suggestion:templates.suggestion||suggestionTemplate}}function isValidName(str){return/^[_a-zA-Z0-9-]+$/.test(str)}var datasetKey="ttDataset",valueKey="ttValue",datumKey="ttDatum";return Dataset.extractDatasetName=function(el){return $(el).data(datasetKey)},Dataset.extractValue=function(el){return $(el).data(valueKey)},Dataset.extractDatum=function(el){return $(el).data(datumKey)},_.mixin(Dataset.prototype,EventEmitter,{_render:function(query,suggestions){function getEmptyHtml(){return that.templates.empty({query:query,isEmpty:!0})}function getSuggestionsHtml(){function getSuggestionNode(suggestion){var $el;return $el=$(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey,that.name).data(valueKey,that.displayFn(suggestion)).data(datumKey,suggestion),$el.children().each(function(){$(this).css(css.suggestionChild)}),$el}var $suggestions,nodes;return $suggestions=$(html.suggestions).css(css.suggestions),nodes=_.map(suggestions,getSuggestionNode),$suggestions.append.apply($suggestions,nodes),that.highlight&&highlight({node:$suggestions[0],pattern:query}),$suggestions}function getHeaderHtml(){return that.templates.header({query:query,isEmpty:!hasSuggestions})}function getFooterHtml(){return that.templates.footer({query:query,isEmpty:!hasSuggestions})}if(this.$el){var hasSuggestions,that=this;this.$el.empty(),hasSuggestions=suggestions&&suggestions.length,!hasSuggestions&&this.templates.empty?this.$el.html(getEmptyHtml()).prepend(that.templates.header?getHeaderHtml():null).append(that.templates.footer?getFooterHtml():null):hasSuggestions&&this.$el.html(getSuggestionsHtml()).prepend(that.templates.header?getHeaderHtml():null).append(that.templates.footer?getFooterHtml():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(query){function render(suggestions){that.canceled||query!==that.query||that._render(query,suggestions)}var that=this;this.query=query,this.canceled=!1,this.source(query,render)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),Dataset}(),Dropdown=function(){function Dropdown(o){var onSuggestionClick,onSuggestionMouseEnter,onSuggestionMouseLeave,that=this;o=o||{},o.menu||$.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=_.map(o.datasets,initializeDataset),onSuggestionClick=_.bind(this._onSuggestionClick,this),onSuggestionMouseEnter=_.bind(this._onSuggestionMouseEnter,this),onSuggestionMouseLeave=_.bind(this._onSuggestionMouseLeave,this),this.$menu=$(o.menu).on("click.tt",".tt-suggestion",onSuggestionClick).on("mouseenter.tt",".tt-suggestion",onSuggestionMouseEnter).on("mouseleave.tt",".tt-suggestion",onSuggestionMouseLeave),_.each(this.datasets,function(dataset){that.$menu.append(dataset.getRoot()),dataset.onSync("rendered",that._onRendered,that)})}function initializeDataset(oDataset){return new Dataset(oDataset)}return _.mixin(Dropdown.prototype,EventEmitter,{_onSuggestionClick:function($e){this.trigger("suggestionClicked",$($e.currentTarget))},_onSuggestionMouseEnter:function($e){this._removeCursor(),this._setCursor($($e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function isDatasetEmpty(dataset){return dataset.isEmpty()}this.isEmpty=_.every(this.datasets,isDatasetEmpty),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function($el,silent){$el.first().addClass("tt-cursor"),!silent&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(increment){var $suggestions,$oldCursor,newCursorIndex,$newCursor;if(this.isOpen){if($oldCursor=this._getCursor(),$suggestions=this._getSuggestions(),this._removeCursor(),newCursorIndex=$suggestions.index($oldCursor)+increment,newCursorIndex=(newCursorIndex+1)%($suggestions.length+1)-1,-1===newCursorIndex)return void this.trigger("cursorRemoved");-1>newCursorIndex&&(newCursorIndex=$suggestions.length-1),this._setCursor($newCursor=$suggestions.eq(newCursorIndex)),this._ensureVisible($newCursor)}},_ensureVisible:function($el){var elTop,elBottom,menuScrollTop,menuHeight;elTop=$el.position().top,elBottom=elTop+$el.outerHeight(!0),menuScrollTop=this.$menu.scrollTop(),menuHeight=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>elTop?this.$menu.scrollTop(menuScrollTop+elTop):elBottom>menuHeight&&this.$menu.scrollTop(menuScrollTop+(elBottom-menuHeight))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(dir){this.$menu.css("ltr"===dir?css.ltr:css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function($el){var datum=null;return $el.length&&(datum={raw:Dataset.extractDatum($el),value:Dataset.extractValue($el),datasetName:Dataset.extractDatasetName($el)}),datum},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(query){function updateDataset(dataset){dataset.update(query)}_.each(this.datasets,updateDataset)},empty:function(){function clearDataset(dataset){dataset.clear()}_.each(this.datasets,clearDataset),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function destroyDataset(dataset){dataset.destroy()}this.$menu.off(".tt"),this.$menu=null,_.each(this.datasets,destroyDataset)}}),Dropdown}(),Typeahead=function(){function Typeahead(o){var $menu,$input,$hint;o=o||{},o.input||$.error("missing input"),this.isActivated=!1,this.autoselect=!!o.autoselect,this.minLength=_.isNumber(o.minLength)?o.minLength:1,this.$node=buildDomStructure(o.input,o.withHint),$menu=this.$node.find(".tt-dropdown-menu"),$input=this.$node.find(".tt-input"),$hint=this.$node.find(".tt-hint"),$input.on("blur.tt",function($e){var active,isActive,hasActive;active=document.activeElement,isActive=$menu.is(active),hasActive=$menu.has(active).length>0,_.isMsie()&&(isActive||hasActive)&&($e.preventDefault(),$e.stopImmediatePropagation(),_.defer(function(){$input.focus()}))}),$menu.on("mousedown.tt",function($e){$e.preventDefault()}),this.eventBus=o.eventBus||new EventBus({el:$input}),this.dropdown=new Dropdown({menu:$menu,datasets:o.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new Input({input:$input,hint:$hint}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function buildDomStructure(input,withHint){var $input,$wrapper,$dropdown,$hint;$input=$(input),$wrapper=$(html.wrapper).css(css.wrapper),$dropdown=$(html.dropdown).css(css.dropdown),$hint=$input.clone().css(css.hint).css(getBackgroundStyles($input)),$hint.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),$input.data(attrsKey,{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")}),$input.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(withHint?css.input:css.inputWithNoHint);try{!$input.attr("dir")&&$input.attr("dir","auto")}catch(e){}return $input.wrap($wrapper).parent().prepend(withHint?$hint:null).append($dropdown)}function getBackgroundStyles($el){return{backgroundAttachment:$el.css("background-attachment"),backgroundClip:$el.css("background-clip"),backgroundColor:$el.css("background-color"),backgroundImage:$el.css("background-image"),backgroundOrigin:$el.css("background-origin"),backgroundPosition:$el.css("background-position"),backgroundRepeat:$el.css("background-repeat"),backgroundSize:$el.css("background-size")}}function destroyDomStructure($node){var $input=$node.find(".tt-input");_.each($input.data(attrsKey),function(val,key){_.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val)}),$input.detach().removeData(attrsKey).removeClass("tt-input").insertAfter($node),$node.remove()}var attrsKey="ttAttrs";return _.mixin(Typeahead.prototype,{_onSuggestionClicked:function(type,$el){var datum;(datum=this.dropdown.getDatumForSuggestion($el))&&this._select(datum)},_onCursorMoved:function(){var datum=this.dropdown.getDatumForCursor();this.input.setInputValue(datum.value,!0),this.eventBus.trigger("cursorchanged",datum.raw,datum.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(type,$e){var cursorDatum,topSuggestionDatum;cursorDatum=this.dropdown.getDatumForCursor(),topSuggestionDatum=this.dropdown.getDatumForTopSuggestion(),cursorDatum?(this._select(cursorDatum),$e.preventDefault()):this.autoselect&&topSuggestionDatum&&(this._select(topSuggestionDatum),$e.preventDefault())},_onTabKeyed:function(type,$e){var datum;(datum=this.dropdown.getDatumForCursor())?(this._select(datum),$e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var query=this.input.getQuery();this.dropdown.isEmpty&&query.length>=this.minLength?this.dropdown.update(query):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var query=this.input.getQuery();this.dropdown.isEmpty&&query.length>=this.minLength?this.dropdown.update(query):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,query){this.input.clearHintIfInvalid(),query.length>=this.minLength?this.dropdown.update(query):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var dir;this.dir!==(dir=this.input.getLanguageDirection())&&(this.dir=dir,this.$node.css("direction",dir),this.dropdown.setLanguageDirection(dir))},_updateHint:function(){var datum,val,query,escapedQuery,frontMatchRegEx,match;datum=this.dropdown.getDatumForTopSuggestion(),datum&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(val=this.input.getInputValue(),query=Input.normalizeQuery(val),escapedQuery=_.escapeRegExChars(query),frontMatchRegEx=new RegExp("^(?:"+escapedQuery+")(.+$)","i"),match=frontMatchRegEx.exec(datum.value),match?this.input.setHint(val+match[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(laxCursor){var hint,query,isCursorAtEnd,datum;hint=this.input.getHint(),query=this.input.getQuery(),isCursorAtEnd=laxCursor||this.input.isCursorAtEnd(),hint&&query!==hint&&isCursorAtEnd&&(datum=this.dropdown.getDatumForTopSuggestion(),datum&&this.input.setInputValue(datum.value),this.eventBus.trigger("autocompleted",datum.raw,datum.datasetName))},_select:function(datum){this.input.setQuery(datum.value),this.input.setInputValue(datum.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",datum.raw,datum.datasetName),this.dropdown.close(),_.defer(_.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(val){this.isActivated?this.input.setInputValue(val):(this.input.setQuery(val),this.input.setInputValue(val,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),destroyDomStructure(this.$node),this.$node=null}}),Typeahead}();!function(){var old,typeaheadKey,methods;old=$.fn.typeahead,typeaheadKey="ttTypeahead",methods={initialize:function(o,datasets){function attach(){var eventBus,typeahead,$input=$(this);_.each(datasets,function(d){d.highlight=!!o.highlight}),typeahead=new Typeahead({input:$input,eventBus:eventBus=new EventBus({el:$input}),withHint:_.isUndefined(o.hint)?!0:!!o.hint,minLength:o.minLength,autoselect:o.autoselect,datasets:datasets}),$input.data(typeaheadKey,typeahead)}return datasets=_.isArray(datasets)?datasets:[].slice.call(arguments,1),o=o||{},this.each(attach)},open:function(){function openTypeahead(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&typeahead.open()}return this.each(openTypeahead)},close:function(){function closeTypeahead(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&typeahead.close()}return this.each(closeTypeahead)},val:function(newVal){function setVal(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&typeahead.setVal(newVal)}function getVal($input){var typeahead,query;return(typeahead=$input.data(typeaheadKey))&&(query=typeahead.getVal()),query}return arguments.length?this.each(setVal):getVal(this.first())},destroy:function(){function unattach(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&(typeahead.destroy(),$input.removeData(typeaheadKey))}return this.each(unattach)}},$.fn.typeahead=function(method){return methods[method]?methods[method].apply(this,[].slice.call(arguments,1)):methods.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this}}()}(window.jQuery),function($){"use strict";var defaults={prefilled:null,CapitalizeFirstLetter:!1,preventSubmitOnEnter:!0,isClearInputOnEsc:!0,externalTagId:!1,AjaxPush:null,AjaxPushAllTags:null,AjaxPushParameters:null,delimiters:[9,13,44],backspace:[8],maxTags:0,hiddenTagListName:null,hiddenTagListId:null,replace:!0,output:null,deleteTagsOnBackspace:!0,tagsContainer:null,tagCloseIcon:"x",tagClass:"",tagTarget:!1,validator:null,onlyTagList:!1,tagList:null,fillInputOnTagRemove:!1,tagPrefixUrl:null,syncOnChange:!1},publicMethods={pushTag:function(tag,ignoreEvents,externalTagId){var alreadyInList,tlisLowerCase,max,tagId,idx,newTagId,newTagRemoveId,escaped,html,$el,lastTagObj,$self=$(this),opts=$self.data("opts"),tlis=$self.data("tlis"),tlid=$self.data("tlid");if(tag=privateMethods.trimTag(tag,opts.delimiterChars),tag&&!(tag.length<=0)){if(opts.onlyTagList&&void 0!==opts.tagList&&opts.tagList){var $tagList=opts.tagList;$.each($tagList,function(index,item){$tagList[index]=item.toLowerCase()});var suggestion=$.inArray(tag.toLowerCase(),$tagList);if(-1===suggestion)return}opts.CapitalizeFirstLetter&&tag.length>1&&(tag=tag.charAt(0).toUpperCase()+tag.slice(1).toLowerCase()),(!opts.validator||opts.validator(tag))&&(opts.maxTags>0&&tlis.length>=opts.maxTags||(alreadyInList=!1,tlisLowerCase=jQuery.map(tlis,function(elem){return elem.toLowerCase()}),idx=$.inArray(tag.toLowerCase(),tlisLowerCase),-1!==idx&&(alreadyInList=!0),alreadyInList?($self.trigger("tm:duplicated",tag),$("#"+$self.data("tm_rndid")+"_"+tlid[idx]).stop().animate({backgroundColor:opts.blinkBGColor_1},100).animate({backgroundColor:opts.blinkBGColor_2},100).animate({backgroundColor:opts.blinkBGColor_1},100).animate({backgroundColor:opts.blinkBGColor_2},100).animate({backgroundColor:opts.blinkBGColor_1},100).animate({backgroundColor:opts.blinkBGColor_2},100)):(opts.externalTagId===!0?(void 0===externalTagId&&$.error("externalTagId is not passed for tag -"+tag),tagId=externalTagId):(max=Math.max.apply(null,tlid),max=max===-(1/0)?0:max,tagId=++max),ignoreEvents||$self.trigger("tm:pushing",[tag,tagId]),tlis.push(tag),tlid.push(tagId),ignoreEvents||null!==opts.AjaxPush&&null==opts.AjaxPushAllTags&&-1===$.inArray(tag,opts.prefilled)&&$.post(opts.AjaxPush,$.extend({tag:tag},opts.AjaxPushParameters)),newTagId=$self.data("tm_rndid")+"_"+tagId,newTagRemoveId=$self.data("tm_rndid")+"_Remover_"+tagId,escaped=$("<span/>").text(tag).html(),opts.tagPrefixUrl&&(escaped="<a "+(opts.tagTarget?'target="'+opts.tagTarget+'"':"")+' href="'+opts.tagPrefixUrl+encodeURIComponent(escaped)+'">'+escaped+"</a>"),html='<span class="'+privateMethods.tagClasses.call($self)+'" id="'+newTagId+'">',html+="<span>"+escaped+"</span>",html+='<a href="#" class="tm-tag-remove" id="'+newTagRemoveId+'" TagIdToRemove="'+tagId+'">',html+=opts.tagCloseIcon+"</a></span> ",$el=$(html),null!==opts.tagsContainer?$(opts.tagsContainer).append($el):tlid.length>1?(lastTagObj=$("#"+$self.data("tm_rndid")+"_"+tlid[tlid.length-2]),lastTagObj.after($el)):$self.before($el),$el.find("#"+newTagRemoveId).on("click",$self,function(e){e.preventDefault();var TagIdToRemove=parseInt($(this).attr("TagIdToRemove"));publicMethods.spliceTag.call($self,TagIdToRemove,e.data),$self.trigger("tm:delete")}),privateMethods.refreshHiddenTagList.call($self),ignoreEvents||$self.trigger("tm:pushed",[tag,tagId]),privateMethods.showOrHide.call($self)),$self.val("")))}},spliceTag:function(tagId){var tagBeingRemoved,$self=this,tlis=$self.data("tlis"),tlid=$self.data("tlid"),idx=$.inArray(""+tagId,tlid);-1===idx&&(idx=$.inArray(tagId,tlid)),-1!==idx&&(tagBeingRemoved=tlis[idx],$self.trigger("tm:splicing",[tagBeingRemoved,tagId]),$("#"+$self.data("tm_rndid")+"_"+tagId).remove(),tlis.splice(idx,1),tlid.splice(idx,1),privateMethods.refreshHiddenTagList.call($self),$self.trigger("tm:spliced",[tagBeingRemoved,tagId])),privateMethods.showOrHide.call($self)},spliceTagSilent:function(tagId){var tagBeingRemoved,$self=this,tlis=$self.data("tlis"),tlid=$self.data("tlid"),idx=$.inArray(""+tagId,tlid);-1===idx&&(idx=$.inArray(tagId,tlid)),-1!==idx&&(tagBeingRemoved=tlis[idx],$("#"+$self.data("tm_rndid")+"_"+tagId).remove(),tlis.splice(idx,1),tlid.splice(idx,1),privateMethods.refreshHiddenTagList.call($self)),privateMethods.showOrHide.call($self)},popTag:function(){var tagId,tagBeingRemoved,$self=$(this),tlis=$self.data("tlis"),tlid=$self.data("tlid");tlid.length>0&&(tagId=tlid.pop(),tagBeingRemoved=tlis[tlis.length-1],$self.trigger("tm:popping",[tagBeingRemoved,tagId]),tlis.pop(),$("#"+$self.data("tm_rndid")+"_"+tagId).remove(),privateMethods.refreshHiddenTagList.call($self),$self.trigger("tm:popped",[tagBeingRemoved,tagId]))},empty:function(){for(var tagId,$self=$(this),tlis=$self.data("tlis"),tlid=$self.data("tlid");tlid.length>0;)tagId=tlid.pop(),tlis.pop(),$("#"+$self.data("tm_rndid")+"_"+tagId).remove(),privateMethods.refreshHiddenTagList.call($self);$self.trigger("tm:emptied",null),privateMethods.showOrHide.call($self)},tags:function(){var $self=this,tlis=$self.data("tlis");return tlis}},privateMethods={showOrHide:function(){var $self=this,opts=$self.data("opts"),tlis=$self.data("tlis");opts.maxTags>0&&tlis.length<opts.maxTags&&($self.show(),$self.trigger("tm:show")),opts.maxTags>0&&tlis.length>=opts.maxTags&&($self.hide(),$self.trigger("tm:hide"))},tagClasses:function(){var cl,$self=$(this),opts=$self.data("opts"),tagBaseClass=opts.tagBaseClass,inputBaseClass=opts.inputBaseClass;return cl=tagBaseClass,$self.attr("class")&&$.each($self.attr("class").split(" "),function(index,value){-1!==value.indexOf(inputBaseClass+"-")&&(cl+=" "+tagBaseClass+value.substring(inputBaseClass.length))}),cl+=opts.tagClass?" "+opts.tagClass:""},trimTag:function(tag,delimiterChars){var i;for(tag=$.trim(tag),i=0;i<tag.length&&-1===$.inArray(tag.charCodeAt(i),delimiterChars);i++);return tag.substring(0,i)},refreshHiddenTagList:function(){var $self=$(this),tlis=$self.data("tlis"),lhiddenTagList=$self.data("lhiddenTagList");lhiddenTagList&&$(lhiddenTagList).val(tlis.join($self.data("opts").baseDelimiter)).change(),$self.trigger("tm:refresh",tlis.join($self.data("opts").baseDelimiter))},killEvent:function(e){e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault()},keyInArray:function(e,ary){return-1!==$.inArray(e.which,ary)},applyDelimiter:function(e){var $self=$(this);publicMethods.pushTag.call($self,$(this).val()),e.preventDefault()},prefill:function(pta){var $self=$(this),lhiddenTagList=$self.data("lhiddenTagList"),onChange=lhiddenTagList.attr("onchange");onChange&&lhiddenTagList.removeAttr("onchange"),$.each(pta,function(key,val){publicMethods.pushTag.call($self,val,!0)}),onChange&&lhiddenTagList.attr("onchange",onChange)},pushAllTags:function(e,tag){var $self=$(this),opts=$self.data("opts"),tlis=$self.data("tlis");opts.AjaxPushAllTags&&("tm:pushed"!==e.type||-1===$.inArray(tag,opts.prefilled))&&$.post(opts.AjaxPush,$.extend({tags:tlis.join(opts.baseDelimiter)},opts.AjaxPushParameters))},synAllTags:function(e){var $this=$(this),$self=$this.data("tmInput"),tlis=($self.data("opts"),$self.data("tlis")),tlid=$self.data("tlid"),lhiddenTagList=$self.data("lhiddenTagList"),hiddentlis=jQuery(lhiddenTagList).val().split(",");jQuery.each(tlis,function(index,val){var idx=hiddentlis.indexOf(val);-1===idx&&($("#"+$self.data("tm_rndid")+"_"+tlid[index]).remove(),tlis.splice(index,1),tlid.splice(index,1))})},init:function(options){var delimiters,keyNums,opts=$.extend({},defaults,options);return opts.hiddenTagListName=null===opts.hiddenTagListName?"hidden-"+this.attr("name"):opts.hiddenTagListName,delimiters=opts.delimeters||opts.delimiters,keyNums=[9,13,17,18,19,37,38,39,40],opts.delimiterChars=[],opts.delimiterKeys=[],$.each(delimiters,function(i,v){-1!==$.inArray(v,keyNums)?opts.delimiterKeys.push(v):opts.delimiterChars.push(v)}),opts.baseDelimiter=String.fromCharCode(opts.delimiterChars[0]||44),opts.tagBaseClass="tm-tag",opts.inputBaseClass="tm-input",$.isFunction(opts.validator)||(opts.validator=null),this.each(function(){var $self=$(this),hiddenObj="",rndid="",albet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";if($self.data("tagManager"))return!1;$self.data("tagManager",!0);for(var i=0;5>i;i++)rndid+=albet.charAt(Math.floor(Math.random()*albet.length));if($self.data("tm_rndid",rndid),$self.data("opts",opts).data("tlis",[]).data("tlid",[]),null===opts.output?(hiddenObj=$("<input/>",{type:"hidden",name:opts.hiddenTagListName}),$self.after(hiddenObj),$self.data("lhiddenTagList",hiddenObj)):$self.data("lhiddenTagList",$(opts.output)),opts.syncOnChange){var lhiddenTagList=$self.data("lhiddenTagList");jQuery(lhiddenTagList).data("tmInput",$self),jQuery(lhiddenTagList).on("tm:sync",privateMethods.synAllTags)}if(opts.AjaxPushAllTags&&($self.on("tm:spliced",privateMethods.pushAllTags),$self.on("tm:popped",privateMethods.pushAllTags),$self.on("tm:pushed",privateMethods.pushAllTags)),$self.on("focus keypress",function(e){$(this).hpopover&&$(this).hpopover("hide")}),opts.isClearInputOnEsc&&$self.on("keyup",function(e){27===e.which&&($(this).val(""),privateMethods.killEvent(e))}),$self.on("keypress",function(e){privateMethods.keyInArray(e,opts.delimiterChars)&&privateMethods.applyDelimiter.call($self,e)}),$self.on("keydown",function(e){13===e.which&&opts.preventSubmitOnEnter||privateMethods.keyInArray(e,opts.delimiterKeys)&&privateMethods.applyDelimiter.call($self,e)}),opts.deleteTagsOnBackspace&&$self.on("keydown",function(e){privateMethods.keyInArray(e,opts.backspace)&&$(this).val().length<=0&&(publicMethods.popTag.call($self),privateMethods.killEvent(e))}),opts.fillInputOnTagRemove&&$self.on("tm:popped",function(e,tag){$(this).val(tag)}),$self.change(function(e){/webkit/.test(navigator.userAgent.toLowerCase())||$self.focus(),privateMethods.killEvent(e)}),null!==opts.prefilled)"object"==typeof opts.prefilled?privateMethods.prefill.call($self,opts.prefilled):"string"==typeof opts.prefilled?privateMethods.prefill.call($self,opts.prefilled.split(opts.baseDelimiter)):"function"==typeof opts.prefilled&&privateMethods.prefill.call($self,opts.prefilled());else if(null!==opts.output){if($(opts.output)&&$(opts.output).val()){$(opts.output)}privateMethods.prefill.call($self,$(opts.output).val().split(opts.baseDelimiter))}}),this}};$.fn.tagsManager=function(method){var $self=$(this);return 0 in this?publicMethods[method]?publicMethods[method].apply($self,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?($.error("Method "+method+" does not exist."),!1):privateMethods.init.apply(this,arguments):this}}(jQuery);var halo_emoticons=[":-)",":o)",":c)",":^)",":-D",":-(",":-9",";-)",":-P",":-p",":-",":-b",":-O",":-/",":-X",":-#",":'(","B-)","8-)",";*(",":-*",":-\\","?-)",": )",": ]","= ]","= )","8 )",": }",": D","8 D","X D","x D","= D",": (",": [",": {","= (","; )","; ]","; D",": P",": p","= P","= p",": b",": ",": O","8 O",": /","= /",": S",": #",": X","B )",": |",": \\","= \\",": *",": &gt;",": &lt;",":)",":]","=]","=)","8)",":}",":D",":(",":[",":{","=(",";)",";]",";D",":P",":p","=P","=p",":b",":",":O",":/","=/",":S",":#",":X","B)",":|",":\\","=\\",":*",":&gt;",":&lt;"];!function($){var mirrored,defaults={className:"autosizejs",append:"",callback:!1,minHeight:0,resizeDelay:10},copy='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',typographyStyles=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],mirror=$(copy).data("autosize",!0)[0];

mirror.style.lineHeight="99px","99px"===$(mirror).css("lineHeight")&&typographyStyles.push("lineHeight"),mirror.style.lineHeight="",$.fn.autosize=function(options){return this.length?(options=$.extend({},defaults,options||{}),mirror.parentNode!==document.body&&$(document.body).append(mirror),this.each(function(){function setWidth(){var width,style=window.getComputedStyle?window.getComputedStyle(ta,null):!1;style?(width=ta.getBoundingClientRect().width,$.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(i,val){width-=parseInt(style[val],10)}),mirror.style.width=width+"px"):mirror.style.width=Math.max($ta.width(),0)+"px"}function initMirror(){var styles={};if(mirrored=ta,mirror.className=options.className,maxHeight=parseInt($ta.css("maxHeight"),10),$.each(typographyStyles,function(i,val){styles[val]=$ta.css(val)}),$(mirror).css(styles),setWidth(),window.chrome){var width=ta.style.width;ta.style.width="0px";{ta.offsetWidth}ta.style.width=width}}function adjust(){var height,original;mirrored!==ta?initMirror():setWidth(),mirror.value=ta.value+options.append,mirror.style.overflowY=ta.style.overflowY,original=parseInt(ta.style.height,10),mirror.scrollTop=0,mirror.scrollTop=9e4,height=mirror.scrollTop,maxHeight&&height>maxHeight?(ta.style.overflowY="scroll",height=maxHeight):(ta.style.overflowY="hidden",minHeight>height&&(height=minHeight)),height+=boxOffset,original!==height&&(ta.style.height=height+"px",callback&&options.callback.call(ta,ta))}function resize(){clearTimeout(timeout),timeout=setTimeout(function(){var newWidth=$ta.width();newWidth!==width&&(width=newWidth,adjust())},parseInt(options.resizeDelay,10))}var maxHeight,minHeight,timeout,ta=this,$ta=$(ta),boxOffset=0,callback=$.isFunction(options.callback),originalStyles={height:ta.style.height,overflow:ta.style.overflow,overflowY:ta.style.overflowY,wordWrap:ta.style.wordWrap,resize:ta.style.resize},width=$ta.width();$ta.data("autosize")||($ta.data("autosize",!0),("border-box"===$ta.css("box-sizing")||"border-box"===$ta.css("-moz-box-sizing")||"border-box"===$ta.css("-webkit-box-sizing"))&&(boxOffset=$ta.outerHeight()-$ta.height()),minHeight=0==options.minHeight?Math.max(parseInt($ta.css("minHeight"),10)-boxOffset||0,$ta.height()):options.minHeight,$ta.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===$ta.css("resize")||"vertical"===$ta.css("resize")?"none":"horizontal"}),"onpropertychange"in ta?"oninput"in ta?$ta.on("input.autosize keyup.autosize",adjust):$ta.on("propertychange.autosize",function(){"value"===event.propertyName&&adjust()}):$ta.on("input.autosize",adjust),options.resizeDelay!==!1&&$(window).on("resize.autosize",resize),$ta.on("autosize.resize",adjust),$ta.on("autosize.resizeIncludeStyle",function(){mirrored=null,adjust()}),$ta.on("autosize.destroy",function(){mirrored=null,clearTimeout(timeout),$(window).off("resize",resize),$ta.off("autosize").off(".autosize").css(originalStyles).removeData("autosize")}),$ta.on("halo.onreset",adjust),adjust())})):this}}(window.jQuery),function($){"use strict";var bind=function(func,context){return func.bind?func.bind(context):function(){func.apply(context,arguments)}},getStyles=function(){var color;return color=$("<div></div>").css(["color"]).color,"undefined"!=typeof color?function($el,properties){return $el.css(properties)}:function($el,properties){var styles;return styles={},$.each(properties,function(i,property){styles[property]=$el.css(property)}),styles}}(),entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},entityRegexe=/[&<>"'\/]/g,escape=function(str){return str.replace(entityRegexe,function(match){return entityMap[match]})},Overlay=function(){function Overlay($textarea,strategies){var $wrapper,position;position=$textarea.css("position"),"static"===position&&(position="relative"),$wrapper=$(html.wrapper).css($.extend({},css.wrapper,getStyles($textarea,textareaToWrapper),{position:position})),this.textareaTop=parseInt($textarea.css("border-top-width")),this.$el=$(html.overlay).css($.extend({},css.overlay,getStyles($textarea,textareaToOverlay),{top:this.textareaTop,right:parseInt($textarea.css("border-right-width")),bottom:parseInt($textarea.css("border-bottom-width")),left:parseInt($textarea.css("border-left-width"))})),this.$textarea=$textarea.css(css.textarea),this.$textarea.wrap($wrapper).before(this.$el),this.$textarea.origVal=$textarea.val,this.$textarea.val=bind(this.val,this),this.$textarea.on("scroll",bind(this.resizeOverlay,this)),this.$textarea.on("resize",bind(this.resizeOverlay,this)),this.strategies=$.isArray(strategies)?strategies:[strategies],this.renderTextOnOverlay()}var html,css,textareaToWrapper,textareaToOverlay;return html={wrapper:'<div class="textoverlay-wrapper"></div>',overlay:'<div class="textoverlay"></div>'},css={wrapper:{margin:0,padding:0,overflow:"hidden"},overlay:{position:"absolute",color:"transparent","white-space":"pre-wrap","word-wrap":"break-word",overflow:"hidden"},textarea:{background:"transparent",position:"relative",outline:0}},textareaToWrapper=["display"],textareaToOverlay=["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","font-family","font-weight","font-size","background-color","line-height"],$.extend(Overlay.prototype,{val:function(value){return null==value?this.$textarea.origVal():this.setVal(value)},setVal:function(value){return this.$textarea.origVal(value),this},onInput:function(e){},renderTextOnOverlay:function(){var text,i,l,strategy,match,style;for(text=escape(this.$textarea.val()),i=0,l=this.strategies.length;l>i;i++)strategy=this.strategies[i],match=strategy.match,$.isArray(match)&&(match=$.map(match,function(str){return str.replace(/(\(|\)|\|)/g,"$1")}),match=new RegExp("("+match.join("|")+")","g")),style="background-color:"+strategy.css["background-color"],text=text.replace(match,function(str){return'<span style="'+style+'">'+str+"</span>"});return this.$el.html(text),this},resizeOverlay:function(){this.$el.css({top:this.textareaTop-this.$textarea.scrollTop()})}}),Overlay}();$.fn.overlay=function(options){return new Overlay(this,options),this}}(window.jQuery),function($){"use strict";var lock=function(func){var free,locked;return free=function(){locked=!1},function(){var args;locked||(locked=!0,args=toArray(arguments),args.unshift(free),func.apply(this,args))}},toArray=function(args){var result;return result=Array.prototype.slice.call(args)},bind=function(func,context){return func.bind?func.bind(context):function(){func.apply(context,arguments)}},getStyles=function(){var color;return color=$("<div></div>").css(["color"]).color,"undefined"!=typeof color?function($el,properties){return $el.css(properties)}:function($el,properties){var styles;return styles={},$.each(properties,function(i,property){styles[property]=$el.css(property)}),styles}}(),identity=function(obj){return obj},memoize=function(func){var memo={};return function(term,callback){memo[term]?callback(memo[term]):func.call(this,term,function(data){memo[term]=(memo[term]||[]).concat(data),callback.apply(null,arguments)})}},include=function(array,value){var i,l;if(array.indexOf)return-1!=array.indexOf(value);for(i=0,l=array.length;l>i;i++)if(array[i]===value)return!0;return!1},Completer=function(){function Completer($el,strategies){var $wrapper,$list,focused;$list=$baseList.clone(),this.el=$el.get(0),this.$el=$el;var rawInputId=$el.data("raw-input");this.rawInput=jQuery("#"+rawInputId);var rawInputVal=this.rawInput.val();if(rawInputVal="undefined"!=typeof rawInputVal?rawInputVal.trim():"",this.tagged_list=[],rawInputVal.length>0){for(var matches,reg=/@\[([0-9]+) (.+?)\]/g,inputVal=rawInputVal;null!==(matches=reg.exec(rawInputVal));){var tagId=matches[1],tagName=matches[2];inputVal=inputVal.replace(matches[0],"@"+tagName),this.tagged_list[tagId]={id:tagId,name:tagName}}$el.val(inputVal)}$wrapper=prepareWrapper(this.$el),focused=this.el===document.activeElement,this.$el.wrap($wrapper).before($list),focused&&this.el.focus(),this.listView=new ListView($list,this),this.strategies=strategies,this.$el.on("keyup",bind(this.onKeyup,this)),this.$el.on("keydown",bind(this.listView.onKeydown,this.listView)),this.$el.on("input",bind(this.onInput,this)),this.$el.on("change",bind(this.onInput,this)),this.lastCaller=0,$(document).on("click",bind(function(e){e.originalEvent&&!e.originalEvent.keepTextCompleteDropdown&&this.listView.deactivate()},this))}var html,css,$baseWrapper,$baseList,tagged_list;html={wrapper:'<div class="textcomplete-wrapper"></div>',list:'<ul class="halo-dropdown-autocomplete"></ul>'},css={wrapper:{position:"relative"},list:{position:"absolute",top:0,left:0,zIndex:"100",display:"none"}},tagged_list=[],$baseWrapper=$(html.wrapper).css(css.wrapper),$baseList=$(html.list).css(css.list),$.extend(Completer.prototype,{renderList:function(data){this.clearAtNext&&(this.listView.clear(),this.clearAtNext=!1),data.length&&(this.listView.shown||(this.listView.setPosition(this.getCaretPosition()).clear().activate(),this.listView.strategy=this.strategy),data=data.slice(0,this.strategy.maxCount),this.listView.render(data)),!this.listView.data.length&&this.listView.shown&&this.listView.deactivate()},searchCallbackFactory:function(free){var self=this;return function(data,keep){self.renderList(data),keep||(free(),self.clearAtNext=!0)}},onKeyup:function(e){var searchQuery,term;this.addCaller();var callNum=this.getCaller();if(searchQuery=this.extractSearchQuery(this.getTextFromHeadToCaret()),searchQuery.length){if(term=searchQuery[1],this.term===term)return;this.term=term;var completer=this;setTimeout(function(){var lastCaller=completer.getCaller();callNum>=lastCaller&&(completer.resetCaller(),completer.search(searchQuery))},500)}else this.term=null,this.listView.deactivate()},onSelect:function(value){var pre,post,newSubStr;pre=this.getTextFromHeadToCaret(),post=this.el.value.substring(this.el.selectionEnd),newSubStr=this.strategy.replace(value),$.isArray(newSubStr)&&(post=newSubStr[1]+post,newSubStr=newSubStr[0]),pre=pre.replace(this.strategy.match,newSubStr);var tagged_list=this.getTaggedList();tagged_list[value.id]=value,this.setTaggedList(tagged_list),this.updateRawContent(pre+post),this.$el.val(pre+post),this.el.focus(),this.el.selectionStart=this.el.selectionEnd=pre.length},onInput:function(e){var text=this.$el.val();this.updateRawContent(text)},getTaggedList:function(){return"undefined"==typeof this.tagged_list&&(this.tagged_list=[]),this.tagged_list},setTaggedList:function(list){this.taggedList=list},addCaller:function(){var curr=this.lastCaller+1;return this.lastCaller=curr,this.lastCaller},getCaller:function(){return this.lastCaller},resetCaller:function(){this.lastCaller=0},updateRawContent:function(content){tagged_list=this.getTaggedList();var rawContent,overlayContent;rawContent=content,overlayContent=content;for(var key in tagged_list){var ele=tagged_list[key],searchStr="@"+ele.name,replaceStr="@["+ele.id+" "+ele.name+"]",replaceOverlay="<b>@"+ele.name+"</b>";if(rawContent.search(searchStr)<0)tagged_list.splice(key,1),this.setTaggedList(tagged_list);else{{new RegExp(searchStr,"g")}rawContent=rawContent.replace(searchStr,replaceStr),overlayContent=overlayContent.replace(searchStr,replaceOverlay)}}this.rawInput.val(rawContent);var overlay=this.$el.prev(".textoverlay");overlay.html(overlayContent)},getCaretPosition:function(){if(0!==this.el.selectionEnd){var properties,css,$div,$span,position,dir;return dir=this.$el.attr("dir")||this.$el.css("direction"),properties=["border-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","text-decoration","text-align","width","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],css=$.extend({position:"absolute",overflow:"auto","white-space":"pre-wrap",top:0,left:-9999,direction:dir},getStyles(this.$el,properties)),$div=$("<div></div>").css(css).text(this.getTextFromHeadToCaret()),$span=$("<span></span>").text(".").appendTo($div),this.$el.before($div),position=$span.position(),position.top+=$span.height()-this.$el.scrollTop(),"rtl"==dir&&(position.left-=this.listView.$el.width()),$div.remove(),position}},getTextFromHeadToCaret:function(){var text,selectionEnd,range;return selectionEnd=this.el.selectionEnd,"number"==typeof selectionEnd?text=this.el.value.substring(0,selectionEnd):document.selection&&(range=this.el.createTextRange(),range.moveStart("character",0),range.moveEnd("textedit"),text=range.text),text},extractSearchQuery:function(text){var i,l,strategy,match;for(i=0,l=this.strategies.length;l>i;i++)if(strategy=this.strategies[i],match=text.match(strategy.match))return[strategy,match[strategy.index]];return[]},search:lock(function(free,searchQuery){var term;this.strategy=searchQuery[0],term=searchQuery[1],this.strategy.search(term,this.searchCallbackFactory(free))})});var prepareWrapper=function($el){return $baseWrapper.clone().css("display",$el.css("display"))};return Completer}(),ListView=function(){function ListView($el,completer){this.data=[],this.$el=$el,this.index=0,this.completer=completer,this.$el.on("click","li.textcomplete-item",bind(this.onClick,this))}return $.extend(ListView.prototype,{shown:!1,render:function(data){var html,i,l,index,val;for(html="",i=0,l=data.length;l>i&&(val=data[i],include(this.data,val)||(index=this.data.length,this.data.push(val),html+='<li class="textcomplete-item" data-index="'+index+'"><a>',html+=this.strategy.template(val),html+="</a></li>",this.data.length!==this.strategy.maxCount));i++);this.$el.append(html),this.data.length?this.activateIndexedItem():this.deactivate()},clear:function(){return this.data=[],this.$el.html(""),this.index=0,this},activateIndexedItem:function(){this.$el.find(".active").removeClass("active"),this.getActiveItem().addClass("active")},getActiveItem:function(){return $(this.$el.children().get(this.index))},activate:function(){return this.shown||(this.$el.show(),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.shown=!1,this.data=this.index=null),this},setPosition:function(position){return this.$el.css(position),this},select:function(index){this.completer.onSelect(this.data[index]),this.deactivate()},onKeydown:function(e){this.shown&&(27===e.keyCode?this.deactivate():38===e.keyCode?(e.preventDefault(),0===this.index?this.index=this.data.length-1:this.index-=1,this.activateIndexedItem()):40===e.keyCode?(e.preventDefault(),this.index===this.data.length-1?this.index=0:this.index+=1,this.activateIndexedItem()):(13===e.keyCode||9===e.keyCode)&&(e.stopImmediatePropagation(),e.preventDefault(),this.select(parseInt(this.getActiveItem().data("index")))))},onClick:function(e){var $e=$(e.target);e.originalEvent.keepTextCompleteDropdown=!0,$e.hasClass("textcomplete-item")||($e=$e.parents("li.textcomplete-item")),this.select(parseInt($e.data("index")))}}),ListView}();$.fn.textcomplete=function(strategies){var i,l,strategy;for(i=0,l=strategies.length;l>i;i++)strategy=strategies[i],strategy.template||(strategy.template=identity),null==strategy.index&&(strategy.index=2),strategy.cache&&(strategy.search=memoize(strategy.search)),strategy.maxCount||(strategy.maxCount=10);return new Completer(this,strategies),this}}(window.jQuery),function(global){"use strict";var emojify=function(){function isWhitespace(s){return" "===s||"	"===s||"\r"===s||"\n"===s||""===s}function insertEmojicon(node,match,emojiName){var emojiImg=document.createElement("img");emojiImg.setAttribute("title",":"+emojiName+":"),emojiImg.setAttribute("alt",":"+emojiName+":"),emojiImg.setAttribute("class","emoji"),emojiImg.setAttribute("src",defaultConfig.img_dir+"/"+emojiName+".png"),emojiImg.setAttribute("align","absmiddle"),node.splitText(match.index),node.nextSibling.nodeValue=node.nextSibling.nodeValue.substr(match[0].length,node.nextSibling.nodeValue.length),emojiImg.appendChild(node.splitText(match.index)),node.parentNode.insertBefore(emojiImg,node.nextSibling)}function getEmojiNameForMatch(match){if(match[1]&&match[2]){var named=match[2];if(namedMatchHash[named])return named}else for(var i=3;i<match.length-1;i++)if(match[i])return emoticonsProcessed[i-2][1]}function defaultReplacer(emoji,name){return"<img title=':"+name+":' alt=':"+name+":' class='emoji' src='"+defaultConfig.img_dir+"/"+name+".png' align='absmiddle' />"}function Validator(){this.lastEmojiTerminatedAt=-1}function emojifyString(htmlString,replacer){if(!htmlString)return htmlString;replacer||(replacer=defaultReplacer);var validator=new Validator;return htmlString.replace(emojiMegaRe,function(){var matches=Array.prototype.slice.call(arguments,0,-2),index=arguments[arguments.length-2],input=arguments[arguments.length-1],emojiName=validator.validate(matches,index,input);return emojiName?replacer(arguments[0],emojiName):arguments[0]})}function run(el){"undefined"==typeof el&&(el=defaultConfig.only_crawl_id?document.getElementById(defaultConfig.only_crawl_id):document.body);for(var node,ignoredTags=defaultConfig.ignored_tags,nodeIterator=document.createTreeWalker(el,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(node){return 1!==node.nodeType?NodeFilter.FILTER_ACCEPT:ignoredTags[node.tagName]||"undefined"!=typeof node.classList&&node.classList.contains("no-emojify")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1),nodeList=[];null!==(node=nodeIterator.nextNode());)nodeList.push(node);nodeList.forEach(function(node){for(var match,matches=[],validator=new Validator;null!==(match=emojiMegaRe.exec(node.data));)validator.validate(match,match.index,match.input)&&matches.push(match);for(var i=matches.length;i-->0;){var emojiName=getEmojiNameForMatch(matches[i]);insertEmojicon(node,matches[i],emojiName)}})}var document=global.window.document,namedEmojiString="+1,-1,100,109,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_nib,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_square,white_square_button,wind_chime,wine_glass,wink,wink2,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",namedEmoji=namedEmojiString.split(/,/),namedMatchHash=namedEmoji.reduce(function(memo,v){return memo[v]=!0,memo},{}),emoticons={named:/:([a-z0-9A-Z_-]+):/,blush:/:-?\)/g,scream:/:-o/gi,smirk:/[:;]-?]/g,smiley:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,disappointed:/:-?\(/g,sob:/:[']-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g},emoticonsProcessed=Object.keys(emoticons).map(function(key){return[emoticons[key],key]}),mega=emoticonsProcessed.map(function(v){var re=v[0],val=re.source||re;return val=val.replace(/(^|[^\[])\^/g,"$1"),"("+val+")"}).join("|"),emojiMegaRe=new RegExp(mega,"gi"),defaultConfig={emojify_tag_type:"div",only_crawl_id:null,img_dir:"images/emoji",ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}};return Validator.prototype={validate:function(match,index,input){function success(){return self.lastEmojiTerminatedAt=length+index,emojiName}var self=this,emojiName=getEmojiNameForMatch(match);if(emojiName){var m=match[0],length=m.length;return m.length>2?success():0===index?success():input.length===m.length+index?success():isWhitespace(input.charAt(index-1))?success():isWhitespace(input.charAt(m.length+index))?success():this.lastEmojiTerminatedAt===index?success():void 0}}},{defaultConfig:defaultConfig,emojiNames:namedEmoji,setConfig:function(newConfig){Object.keys(defaultConfig).forEach(function(f){f in newConfig&&(defaultConfig[f]=newConfig[f])})},replace:emojifyString,run:run}}();return global.emojify=emojify,"function"==typeof define&&define.amd&&define([],function(){return emojify}),emojify}(this),function($,window){var Tour,document;return document=window.document,Tour=function(){function Tour(options){var storage;try{storage=window.localStorage}catch(_error){storage=!1}this._options=$.extend({name:"tour",steps:[],container:"body",keyboard:!0,storage:storage,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='halo-btn-group'> <button class='halo-btn halo-btn-sm halo-btn-default' data-role='prev'>&laquo; Prev</button> <button class='halo-btn halo-btn-sm halo-btn-default' data-role='next'>Next &raquo;</button> <button class='halo-btn halo-btn-sm halo-btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='halo-btn halo-btn-sm halo-btn-default' data-role='end'>End tour</button> </div> </div>",afterSetState:function(key,value){},afterGetState:function(key,value){},afterRemoveState:function(key){},onStart:function(tour){},onEnd:function(tour){},onShow:function(tour){},onShown:function(tour){},onHide:function(tour){},onHidden:function(tour){},onNext:function(tour){},onPrev:function(tour){},onPause:function(tour,duration){},onResume:function(tour,duration){}},options),this._force=!1,this._inited=!1,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return Tour.prototype.addSteps=function(steps){var step,_i,_len;for(_i=0,_len=steps.length;_len>_i;_i++)step=steps[_i],this.addStep(step);return this},Tour.prototype.addStep=function(step){return this._options.steps.push(step),this},Tour.prototype.getStep=function(i){return null!=this._options.steps[i]?$.extend({id:"step-"+i,path:"",placement:"right",title:"",content:"<p></p>",next:i===this._options.steps.length-1?-1:i+1,prev:i-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[i]):void 0},Tour.prototype.init=function(force){return this._force=force,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(_this){return function(){return _this.showStep(_this._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},Tour.prototype.start=function(force){var promise;return null==force&&(force=!1),this._inited||this.init(force),null===this._current&&(promise=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(promise,this.showStep,0)),this},Tour.prototype.next=function(){var promise;return promise=this.hideStep(this._current),this._callOnPromiseDone(promise,this._showNextStep)},Tour.prototype.prev=function(){var promise;return promise=this.hideStep(this._current),this._callOnPromiseDone(promise,this._showPrevStep)},Tour.prototype.goTo=function(i){var promise;return promise=this.hideStep(this._current),this._callOnPromiseDone(promise,this.showStep,i)},Tour.prototype.end=function(){var endHelper,promise;return endHelper=function(_this){return function(e){return $(document).off("click.tour-"+_this._options.name),$(document).off("keyup.tour-"+_this._options.name),
$(window).off("resize.tour-"+_this._options.name),_this._setState("end","yes"),_this._inited=!1,_this._force=!1,_this._clearTimer(),null!=_this._options.onEnd?_this._options.onEnd(_this):void 0}}(this),promise=this.hideStep(this._current),this._callOnPromiseDone(promise,endHelper)},Tour.prototype.ended=function(){return!this._force&&!!this._getState("end")},Tour.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.start()},Tour.prototype.pause=function(){var step;return step=this.getStep(this._current),step&&step.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=step.onPause?step.onPause(this,this._duration):void 0):this},Tour.prototype.resume=function(){var step;return step=this.getStep(this._current),step&&step.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||step.duration,this._timer=window.setTimeout(function(_this){return function(){return _this._isLast()?_this.next():_this.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=step.onResume&&this._duration!==step.duration?step.onResume(this,this._duration):void 0):this},Tour.prototype.hideStep=function(i){var hideStepHelper,promise,step;return(step=this.getStep(i))?(this._clearTimer(),promise=this._makePromise(null!=step.onHide?step.onHide(this,i):void 0),hideStepHelper=function(_this){return function(e){var $element;return $element=$(step.element),$element.data("bs.hpopover")||$element.data("popover")||($element=$("body")),$element.hpopover("destroy").removeClass("tour-"+_this._options.name+"-element tour-"+_this._options.name+"-"+i+"-element"),step.reflex&&$element.css("cursor","").off("click.tour-"+_this._options.name),step.backdrop&&_this._hideBackdrop(),null!=step.onHidden?step.onHidden(_this):void 0}}(this),this._callOnPromiseDone(promise,hideStepHelper),promise):void 0},Tour.prototype.showStep=function(i){var promise,showStepHelper,skipToPrevious,step;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(step=this.getStep(i))?(skipToPrevious=i<this._current,promise=this._makePromise(null!=step.onShow?step.onShow(this,i):void 0),showStepHelper=function(_this){return function(e){var current_path,path;if(_this.setCurrentStep(i),path=function(){switch({}.toString.call(step.path)){case"[object Function]":return step.path();case"[object String]":return this._options.basePath+step.path;default:return step.path}}.call(_this),current_path=[document.location.pathname,document.location.hash].join(""),_this._isRedirect(path,current_path))return void _this._redirect(step,path);if(_this._isOrphan(step)){if(!step.orphan)return _this._debug("Skip the orphan step "+(_this._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),void(skipToPrevious?_this._showPrevStep():_this._showNextStep());_this._debug("Show the orphan step "+(_this._current+1)+". Orphans option is true.")}return step.backdrop&&_this._showBackdrop(_this._isOrphan(step)?void 0:step.element),_this._scrollIntoView(step.element,function(){return _this.getCurrentStep()===i?(null!=step.element&&step.backdrop&&_this._showOverlayElement(step.element),_this._showPopover(step,i),null!=step.onShown&&step.onShown(_this),_this._debug("Step "+(_this._current+1)+" of "+_this._options.steps.length)):void 0}),step.duration?_this.resume():void 0}}(this),this._callOnPromiseDone(promise,showStepHelper),promise):void 0},Tour.prototype.getCurrentStep=function(){return this._current},Tour.prototype.setCurrentStep=function(value){return null!=value?(this._current=value,this._setState("current_step",value)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},Tour.prototype._setState=function(key,value){var e,keyName;if(this._options.storage){keyName=""+this._options.name+"_"+key;try{this._options.storage.setItem(keyName,value)}catch(_error){e=_error,e.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(keyName,value)}return null==this._state&&(this._state={}),this._state[key]=value},Tour.prototype._removeState=function(key){var keyName;return this._options.storage?(keyName=""+this._options.name+"_"+key,this._options.storage.removeItem(keyName),this._options.afterRemoveState(keyName)):null!=this._state?delete this._state[key]:void 0},Tour.prototype._getState=function(key){var keyName,value;return this._options.storage?(keyName=""+this._options.name+"_"+key,value=this._options.storage.getItem(keyName)):null!=this._state&&(value=this._state[key]),(void 0===value||"null"===value)&&(value=null),this._options.afterGetState(key,value),value},Tour.prototype._showNextStep=function(){var promise,showNextStepHelper,step;return step=this.getStep(this._current),showNextStepHelper=function(_this){return function(e){return _this.showStep(step.next)}}(this),promise=this._makePromise(null!=step.onNext?step.onNext(this):void 0),this._callOnPromiseDone(promise,showNextStepHelper)},Tour.prototype._showPrevStep=function(){var promise,showPrevStepHelper,step;return step=this.getStep(this._current),showPrevStepHelper=function(_this){return function(e){return _this.showStep(step.prev)}}(this),promise=this._makePromise(null!=step.onPrev?step.onPrev(this):void 0),this._callOnPromiseDone(promise,showPrevStepHelper)},Tour.prototype._debug=function(text){return this._options.debug?window.console.log("Bootstrap Tour '"+this._options.name+"' | "+text):void 0},Tour.prototype._isRedirect=function(path,currentPath){return null!=path&&""!==path&&("[object RegExp]"==={}.toString.call(path)&&!path.test(currentPath)||"[object String]"==={}.toString.call(path)&&path.replace(/\?.*$/,"").replace(/\/?$/,"")!==currentPath.replace(/\/?$/,""))},Tour.prototype._redirect=function(step,path){return $.isFunction(step.redirect)?step.redirect.call(this,path):step.redirect===!0?(this._debug("Redirect to "+path),document.location.href=path):void 0},Tour.prototype._isOrphan=function(step){return null==step.element||!$(step.element).length||$(step.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==$(step.element)[0].namespaceURI},Tour.prototype._isLast=function(){return this._current<this._options.steps.length-1},Tour.prototype._showPopover=function(step,i){var $element,$navigation,$template,$tip,isOrphan,options;return $(".tour-"+this._options.name).remove(),options=$.extend({},this._options),$template=$($.isFunction(step.template)?step.template(i,step):step.template),$navigation=$template.find(".popover-navigation"),isOrphan=this._isOrphan(step),isOrphan&&(step.element="body",step.placement="top",$template=$template.addClass("orphan")),$element=$(step.element),$template.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+i),$element.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+i+"-element"),step.options&&$.extend(options,step.options),step.reflex&&!isOrphan&&$element.css("cursor","pointer").on("click.tour-"+this._options.name,function(_this){return function(){return _this._isLast()?_this.next():_this.end()}}(this)),step.prev<0&&$navigation.find("[data-role='prev']").addClass("disabled"),step.next<0&&$navigation.find("[data-role='next']").addClass("disabled"),step.duration||$navigation.find("[data-role='pause-resume']").remove(),step.template=$template.clone().wrap("<div>").parent().html(),$element.hpopover({placement:step.placement,trigger:"manual",title:step.title,content:step.content,html:!0,animation:step.animation,container:step.container,template:step.template,selector:step.element}).hpopover("show"),$tip=$element.data("bs.hpopover")?$element.data("bs.hpopover").tip():$element.data("popover").tip(),$tip.attr("id",step.id),this._reposition($tip,step),isOrphan?this._center($tip):void 0},Tour.prototype._reposition=function($tip,step){var offsetBottom,offsetHeight,offsetRight,offsetWidth,originalLeft,originalTop,tipOffset;if(offsetWidth=$tip[0].offsetWidth,offsetHeight=$tip[0].offsetHeight,tipOffset=$tip.offset(),originalLeft=tipOffset.left,originalTop=tipOffset.top,offsetBottom=$(document).outerHeight()-tipOffset.top-$tip.outerHeight(),0>offsetBottom&&(tipOffset.top=tipOffset.top+offsetBottom),offsetRight=$("html").outerWidth()-tipOffset.left-$tip.outerWidth(),0>offsetRight&&(tipOffset.left=tipOffset.left+offsetRight),tipOffset.top<0&&(tipOffset.top=0),tipOffset.left<0&&(tipOffset.left=0),$tip.offset(tipOffset),"bottom"===step.placement||"top"===step.placement){if(originalLeft!==tipOffset.left)return this._replaceArrow($tip,2*(tipOffset.left-originalLeft),offsetWidth,"left")}else if(originalTop!==tipOffset.top)return this._replaceArrow($tip,2*(tipOffset.top-originalTop),offsetHeight,"top")},Tour.prototype._center=function($tip){return $tip.css("top",$(window).outerHeight()/2-$tip.outerHeight()/2)},Tour.prototype._replaceArrow=function($tip,delta,dimension,position){return $tip.find(".arrow").css(position,delta?50*(1-delta/dimension)+"%":"")},Tour.prototype._scrollIntoView=function(element,callback){var $element,$window,counter,offsetTop,scrollTop,windowHeight;return $element=$(element),$element.length?($window=$(window),offsetTop=$element.offset().top,windowHeight=$window.height(),scrollTop=Math.max(0,offsetTop-windowHeight/2),this._debug("Scroll into view. ScrollTop: "+scrollTop+". Element offset: "+offsetTop+". Window height: "+windowHeight+"."),counter=0,$("body,html").stop(!0,!0).animate({scrollTop:Math.ceil(scrollTop)},function(_this){return function(){return 2===++counter?(callback(),_this._debug("Scroll into view. Animation end element offset: "+$element.offset().top+". Window height: "+$window.height()+".")):void 0}}(this))):callback()},Tour.prototype._onResize=function(callback,timeout){return $(window).on("resize.tour-"+this._options.name,function(){return clearTimeout(timeout),timeout=setTimeout(callback,100)})},Tour.prototype._initMouseNavigation=function(){var _this;return _this=this,$(document).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)",function(_this){return function(e){return e.preventDefault(),_this.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)",function(_this){return function(e){return e.preventDefault(),_this.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(_this){return function(e){return e.preventDefault(),_this.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(e){var $this;return e.preventDefault(),$this=$(this),$this.text($this.data(_this._paused?"pause-text":"resume-text")),_this._paused?_this.resume():_this.pause()})},Tour.prototype._initKeyboardNavigation=function(){return this._options.keyboard?$(document).on("keyup.tour-"+this._options.name,function(_this){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),_this._isLast()?_this.next():_this.end();case 37:if(e.preventDefault(),_this._current>0)return _this.prev();break;case 27:return e.preventDefault(),_this.end()}}}(this)):void 0},Tour.prototype._makePromise=function(result){return result&&$.isFunction(result.then)?result:null},Tour.prototype._callOnPromiseDone=function(promise,cb,arg){return promise?promise.then(function(_this){return function(e){return cb.call(_this,arg)}}(this)):cb.call(this,arg)},Tour.prototype._showBackdrop=function(element){return this.backdrop.backgroundShown?void 0:(this.backdrop=$("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,$("body").append(this.backdrop))},Tour.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},Tour.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},Tour.prototype._showOverlayElement=function(element){var $background,$element,offset;return $element=$(element),$element&&0!==$element.length&&!this.backdrop.overlayElementShown?(this.backdrop.overlayElementShown=!0,$background=$("<div/>"),offset=$element.offset(),offset.top=offset.top,offset.left=offset.left,$background.width($element.innerWidth()).height($element.innerHeight()).addClass("tour-step-background").offset(offset),$element.addClass("tour-step-backdrop"),$("body").append($background),this.backdrop.$element=$element,this.backdrop.$background=$background):void 0},Tour.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},Tour.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},Tour}(),window.Tour=Tour}(jQuery,window),function($){"use strict";function icontains(haystack,needle){return haystack.toUpperCase().indexOf(needle.toUpperCase())>-1}function normalizeToBase(text){var rExps=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return $.each(rExps,function(){text=text.replace(this.re,this.ch)}),text}function htmlEscape(html){var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},source="(?:"+Object.keys(escapeMap).join("|")+")",testRegexp=new RegExp(source),replaceRegexp=new RegExp(source,"g"),string=null==html?"":""+html;return testRegexp.test(string)?string.replace(replaceRegexp,function(match){return escapeMap[match]}):string}function Plugin(option,event){var args=arguments,_option=option,option=args[0],event=args[1];[].shift.apply(args),"undefined"==typeof option&&(option=_option);var value,chain=this.each(function(){var $this=$(this);if($this.is("select")){var data=$this.data("selectpicker"),options="object"==typeof option&&option;if(data){if(options)for(var i in options)options.hasOwnProperty(i)&&(data.options[i]=options[i])}else{var config=$.extend({},Selectpicker.DEFAULTS,$.fn.selectpicker.defaults||{},$this.data(),options);$this.data("selectpicker",data=new Selectpicker(this,config,event))}"string"==typeof option&&(value=data[option]instanceof Function?data[option].apply(data,args):data.options[option])}});return"undefined"!=typeof value?value:chain}$.expr[":"].icontains=function(obj,index,meta){return icontains($(obj).text(),meta[3])},$.expr[":"].aicontains=function(obj,index,meta){return icontains($(obj).data("normalizedText")||$(obj).text(),meta[3])};var Selectpicker=function(element,options,e){e&&(e.stopPropagation(),e.preventDefault()),this.$element=$(element),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=options,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=Selectpicker.prototype.val,this.render=Selectpicker.prototype.render,this.refresh=Selectpicker.prototype.refresh,this.setStyle=Selectpicker.prototype.setStyle,this.selectAll=Selectpicker.prototype.selectAll,this.deselectAll=Selectpicker.prototype.deselectAll,this.destroy=Selectpicker.prototype.remove,this.remove=Selectpicker.prototype.remove,this.show=Selectpicker.prototype.show,this.hide=Selectpicker.prototype.hide,this.init()};Selectpicker.VERSION="1.6.3",Selectpicker.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(numSelected,numTotal){return 1==numSelected?"{0} item selected":"{0} items selected"},maxOptionsText:function(numAll,numGroup){var arr=[];return arr[0]=1==numAll?"Limit reached ({n} item max)":"Limit reached ({n} items max)",arr[1]=1==numGroup?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",arr},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"halo-btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"fa",tickIcon:"fa-check",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1},Selectpicker.prototype={constructor:Selectpicker,init:function(){var that=this,id=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .halo-dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof id&&(this.$button.attr("data-id",id),$('label[for="'+id+'"]').click(function(e){e.preventDefault(),that.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var multiple=this.multiple?" show-tick":"",inputGroup=this.$element.parent().hasClass("input-group")?" input-group-btn":"",autofocus=this.autofocus?" autofocus":"",btnSize=this.$element.parents().hasClass("form-group-lg")?" halo-btn-lg":this.$element.parents().hasClass("form-group-sm")?" halo-btn-sm":"",header=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",searchbox=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"",actionsbox=this.options.actionsBox?'<div class="bs-actionsbox"><div class="halo-btn-group halo-btn-block"><button class="actions-btn bs-select-all halo-btn halo-btn-sm halo-btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all halo-btn halo-btn-sm halo-btn-default">'+this.options.deselectAllText+"</button></div></div>":"",drop='<div class="halo-btn-group bootstrap-select'+multiple+inputGroup+'"><button type="button" class="halo-btn halo-dropdown-toggle selectpicker'+btnSize+'" data-htoggle="dropdown"'+autofocus+'><span class="filter-option halo-pull-left"></span>&nbsp;<span class="caret"></span></button><div class="halo-dropdown-menu open">'+header+searchbox+actionsbox+'<ul class="halo-dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return $(drop)},createView:function(){var $drop=this.createDropdown(),$li=this.createLi();return $drop.find("ul").append($li),$drop},reloadLi:function(){this.destroyLi();var $li=this.createLi();this.$menu.find("ul").append($li)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var that=this,_li=[],optID=0,generateLI=function(content,index,classes){return"<li"+("undefined"!=typeof classes?' class="'+classes+'"':"")+("undefined"!=typeof index|null===index?' data-original-index="'+index+'"':"")+">"+content+"</li>"},generateA=function(text,classes,inline,optgroup){var normText=normalizeToBase(htmlEscape(text));return'<a tabindex="0"'+("undefined"!=typeof classes?' class="'+classes+'"':"")+("undefined"!=typeof inline?' style="'+inline+'"':"")+("undefined"!=typeof optgroup?'data-optgroup="'+optgroup+'"':"")+' data-normalized-text="'+normText+'">'+text+'<span class="'+that.options.iconBase+" "+that.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(){var $this=$(this),optionClass=$this.attr("class")||"",inline=$this.attr("style"),text=$this.data("content")?$this.data("content"):$this.html(),subtext="undefined"!=typeof $this.data("subtext")?'<small class="muted text-muted">'+$this.data("subtext")+"</small>":"",icon="undefined"!=typeof $this.data("icon")?'<span class="'+that.options.iconBase+" "+$this.data("icon")+'"></span> ':"",isDisabled=$this.is(":disabled")||$this.parent().is(":disabled"),index=$this[0].index;if(""!==icon&&isDisabled&&(icon="<span>"+icon+"</span>"),$this.data("content")||(text=icon+'<span class="text">'+text+subtext+"</span>"),!that.options.hideDisabled||!isDisabled)if($this.parent().is("optgroup")&&$this.data("divider")!==!0){if(0===$this.index()){optID+=1;var label=$this.parent().attr("label"),labelSubtext="undefined"!=typeof $this.parent().data("subtext")?'<small class="muted text-muted">'+$this.parent().data("subtext")+"</small>":"",labelIcon=$this.parent().data("icon")?'<span class="'+that.options.iconBase+" "+$this.parent().data("icon")+'"></span> ':"";label=labelIcon+'<span class="text">'+label+labelSubtext+"</span>",0!==index&&_li.length>0&&_li.push(generateLI("",null,"divider")),_li.push(generateLI(label,null,"dropdown-header"))}_li.push(generateLI(generateA(text,"opt "+optionClass,inline,optID),index))}else _li.push($this.data("divider")===!0?generateLI("",index,"divider"):$this.data("hidden")===!0?generateLI(generateA(text,optionClass,inline),index,"hide is-hidden"):generateLI(generateA(text,optionClass,inline),index))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),$(_li.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(updateLi){var that=this;updateLi!==!1&&this.$element.find("option").each(function(index){that.setDisabled(index,$(this).is(":disabled")||$(this).parent().is(":disabled")),that.setSelected(index,$(this).is(":selected"))}),this.tabIndex();var notDisabled=this.options.hideDisabled?":not([disabled])":"",selectedItems=this.$element.find("option:selected"+notDisabled).map(function(){var subtext,$this=$(this),icon=$this.data("icon")&&that.options.showIcon?'<i class="'+that.options.iconBase+" "+$this.data("icon")+'"></i> ':"";return subtext=that.options.showSubtext&&$this.attr("data-subtext")&&!that.multiple?' <small class="muted text-muted">'+$this.data("subtext")+"</small>":"",$this.data("content")&&that.options.showContent?$this.data("content"):"undefined"!=typeof $this.attr("title")?$this.attr("title"):icon+$this.html()+subtext}).toArray(),title=this.multiple?selectedItems.join(this.options.multipleSeparator):selectedItems[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var max=this.options.selectedTextFormat.split(">");if(max.length>1&&selectedItems.length>max[1]||1==max.length&&selectedItems.length>=2){notDisabled=this.options.hideDisabled?", [disabled]":"";var totalCount=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+notDisabled).length,tr8nText="function"==typeof this.options.countSelectedText?this.options.countSelectedText(selectedItems.length,totalCount):this.options.countSelectedText;title=tr8nText.replace("{0}",selectedItems.length.toString()).replace("{1}",totalCount.toString())}}this.options.title=this.$element.attr("title"),"static"==this.options.selectedTextFormat&&(title=this.options.title),title||(title="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",htmlEscape(title)),this.$newElement.find(".filter-option").html(title)},setStyle:function(style,status){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var buttonClass=style?style:this.options.style;"add"==status?this.$button.addClass(buttonClass):"remove"==status?this.$button.removeClass(buttonClass):(this.$button.removeClass(this.options.style),this.$button.addClass(buttonClass))},liHeight:function(){if(this.options.size!==!1){var $selectClone=this.$menu.parent().clone().find("> .halo-dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),$menuClone=$selectClone.addClass("open").find("> .halo-dropdown-menu"),liHeight=$menuClone.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),headerHeight=this.options.header?$menuClone.find(".popover-title").outerHeight():0,searchHeight=this.options.liveSearch?$menuClone.find(".bs-searchbox").outerHeight():0,actionsHeight=this.options.actionsBox?$menuClone.find(".bs-actionsbox").outerHeight():0;$selectClone.remove(),this.$newElement.data("liHeight",liHeight).data("headerHeight",headerHeight).data("searchHeight",searchHeight).data("actionsHeight",actionsHeight)}},setSize:function(){this.findLis();var menuHeight,selectOffsetTop,selectOffsetBot,that=this,menu=this.$menu,menuInner=menu.find(".inner"),selectHeight=this.$newElement.outerHeight(),liHeight=this.$newElement.data("liHeight"),headerHeight=this.$newElement.data("headerHeight"),searchHeight=this.$newElement.data("searchHeight"),actionsHeight=this.$newElement.data("actionsHeight"),divHeight=this.$lis.filter(".divider").outerHeight(!0),menuPadding=parseInt(menu.css("padding-top"))+parseInt(menu.css("padding-bottom"))+parseInt(menu.css("border-top-width"))+parseInt(menu.css("border-bottom-width")),notDisabled=this.options.hideDisabled?", .disabled":"",$window=$(window),menuExtras=menuPadding+parseInt(menu.css("margin-top"))+parseInt(menu.css("margin-bottom"))+2,posVert=function(){selectOffsetTop=that.$newElement.offset().top-$window.scrollTop(),selectOffsetBot=$window.height()-selectOffsetTop-selectHeight};if(posVert(),this.options.header&&menu.css("padding-top",0),"auto"==this.options.size){var getSize=function(){var minHeight,lisVis=that.$lis.not(".hide");posVert(),menuHeight=selectOffsetBot-menuExtras,that.options.dropupAuto&&that.$newElement.toggleClass("dropup",selectOffsetTop>selectOffsetBot&&menuHeight-menuExtras<menu.height()),that.$newElement.hasClass("dropup")&&(menuHeight=selectOffsetTop-menuExtras),minHeight=lisVis.length+lisVis.filter(".dropdown-header").length>3?3*liHeight+menuExtras-2:0,menu.css({"max-height":menuHeight+"px",overflow:"hidden","min-height":minHeight+headerHeight+searchHeight+actionsHeight+"px"}),menuInner.css({"max-height":menuHeight-headerHeight-searchHeight-actionsHeight-menuPadding+"px","overflow-y":"auto","min-height":Math.max(minHeight-menuPadding,0)+"px"})};getSize(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",getSize),$(window).off("resize.getSize").on("resize.getSize",getSize),$(window).off("scroll.getSize").on("scroll.getSize",getSize)}else if(this.options.size&&"auto"!=this.options.size&&menu.find("li"+notDisabled).length>this.options.size){var optIndex=this.$lis.not(".divider"+notDisabled).find(" > *").slice(0,this.options.size).last().parent().index(),divLength=this.$lis.slice(0,optIndex+1).filter(".divider").length;menuHeight=liHeight*this.options.size+divLength*divHeight+menuPadding,that.options.dropupAuto&&this.$newElement.toggleClass("dropup",selectOffsetTop>selectOffsetBot&&menuHeight<menu.height()),menu.css({"max-height":menuHeight+headerHeight+searchHeight+actionsHeight+"px",overflow:"hidden"}),menuInner.css({"max-height":menuHeight-menuPadding+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var selectClone=this.$newElement.clone().appendTo("body"),ulWidth=selectClone.find("> .halo-dropdown-menu").css("width"),btnWidth=selectClone.css("width","auto").find("> button").css("width");selectClone.remove(),this.$newElement.css("width",Math.max(parseInt(ulWidth),parseInt(btnWidth))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var pos,actualHeight,that=this,drop="<div />",$drop=$(drop),getPlacement=function($element){$drop.addClass($element.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",$element.hasClass("dropup")),pos=$element.offset(),actualHeight=$element.hasClass("dropup")?0:$element[0].offsetHeight,$drop.css({top:pos.top+actualHeight,left:pos.left,width:$element[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){that.isDisabled()||(getPlacement($(this)),$drop.appendTo(that.options.container),$drop.toggleClass("open",!$(this).hasClass("open")),$drop.append(that.$menu))}),$(window).resize(function(){getPlacement(that.$newElement)}),$(window).on("scroll",function(){getPlacement(that.$newElement)}),$("html").on("click",function(e){$(e.target).closest(that.$newElement).length<1&&$drop.removeClass("open")})},setSelected:function(index,selected){this.findLis(),this.$lis.filter('[data-original-index="'+index+'"]').toggleClass("selected",selected)},setDisabled:function(index,disabled){this.findLis(),disabled?this.$lis.filter('[data-original-index="'+index+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+index+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var that=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!that.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var that=this;this.$newElement.on("touchstart.dropdown",".halo-dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click",function(){that.setSize(),that.options.liveSearch||that.multiple||setTimeout(function(){that.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(e){var $this=$(this),clickedIndex=$this.parent().data("originalIndex"),prevValue=that.$element.val(),prevIndex=that.$element.prop("selectedIndex");if(that.multiple&&e.stopPropagation(),e.preventDefault(),!that.isDisabled()&&!$this.parent().hasClass("disabled")){var $options=that.$element.find("option"),$option=$options.eq(clickedIndex),state=$option.prop("selected"),$optgroup=$option.parent("optgroup"),maxOptions=that.options.maxOptions,maxOptionsGrp=$optgroup.data("maxOptions")||!1;if(that.multiple){if($option.prop("selected",!state),that.setSelected(clickedIndex,!state),$this.blur(),maxOptions!==!1||maxOptionsGrp!==!1){var maxReached=maxOptions<$options.filter(":selected").length,maxReachedGrp=maxOptionsGrp<$optgroup.find("option:selected").length;if(maxOptions&&maxReached||maxOptionsGrp&&maxReachedGrp)if(maxOptions&&1==maxOptions)$options.prop("selected",!1),$option.prop("selected",!0),
that.$menu.find(".selected").removeClass("selected"),that.setSelected(clickedIndex,!0);else if(maxOptionsGrp&&1==maxOptionsGrp){$optgroup.find("option:selected").prop("selected",!1),$option.prop("selected",!0);var optgroupID=$this.data("optgroup");that.$menu.find(".selected").has('a[data-optgroup="'+optgroupID+'"]').removeClass("selected"),that.setSelected(clickedIndex,!0)}else{var maxOptionsArr="function"==typeof that.options.maxOptionsText?that.options.maxOptionsText(maxOptions,maxOptionsGrp):that.options.maxOptionsText,maxTxt=maxOptionsArr[0].replace("{n}",maxOptions),maxTxtGrp=maxOptionsArr[1].replace("{n}",maxOptionsGrp),$notify=$('<div class="notify"></div>');maxOptionsArr[2]&&(maxTxt=maxTxt.replace("{var}",maxOptionsArr[2][maxOptions>1?0:1]),maxTxtGrp=maxTxtGrp.replace("{var}",maxOptionsArr[2][maxOptionsGrp>1?0:1])),$option.prop("selected",!1),that.$menu.append($notify),maxOptions&&maxReached&&($notify.append($("<div>"+maxTxt+"</div>")),that.$element.trigger("maxReached.bs.select")),maxOptionsGrp&&maxReachedGrp&&($notify.append($("<div>"+maxTxtGrp+"</div>")),that.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){that.setSelected(clickedIndex,!1)},10),$notify.delay(750).fadeOut(300,function(){$(this).remove()})}}}else $options.prop("selected",!1),$option.prop("selected",!0),that.$menu.find(".selected").removeClass("selected"),that.setSelected(clickedIndex,!0);that.multiple?that.options.liveSearch&&that.$searchbox.focus():that.$button.focus(),(prevValue!=that.$element.val()&&that.multiple||prevIndex!=that.$element.prop("selectedIndex")&&!that.multiple)&&that.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){e.target==this&&(e.preventDefault(),e.stopPropagation(),that.options.liveSearch?that.$searchbox.focus():that.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),that.options.liveSearch?that.$searchbox.focus():that.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){that.$button.focus()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){that.options.liveSearch?that.$searchbox.focus():that.$button.focus(),e.preventDefault(),e.stopPropagation(),$(this).is(".bs-select-all")?that.selectAll():that.deselectAll(),that.$element.change()}),this.$element.change(function(){that.render(!1)})},liveSearchListener:function(){var that=this,no_results=$('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){that.$menu.find(".active").removeClass("active"),that.$searchbox.val()&&(that.$searchbox.val(""),that.$lis.not(".is-hidden").removeClass("hide"),no_results.parent().length&&no_results.remove()),that.multiple||that.$menu.find(".selected").addClass("active"),setTimeout(function(){that.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){that.$searchbox.val()?(that.options.searchAccentInsensitive?that.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+normalizeToBase(that.$searchbox.val())+")").parent().addClass("hide"):that.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+that.$searchbox.val()+")").parent().addClass("hide"),that.$menu.find("li").filter(":visible:not(.no-results)").length?no_results.parent().length&&no_results.remove():(no_results.parent().length&&no_results.remove(),no_results.html(that.options.noneResultsText+' "'+htmlEscape(that.$searchbox.val())+'"').show(),that.$menu.find("li").last().after(no_results))):(that.$lis.not(".is-hidden").removeClass("hide"),no_results.parent().length&&no_results.remove()),that.$menu.find("li.active").removeClass("active"),that.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),$(this).focus()})},val:function(value){return"undefined"!=typeof value?(this.$element.val(value),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(e){var $items,index,next,first,last,prev,nextPrev,prevIndex,isActive,$this=$(this),$parent=$this.is("input")?$this.parent().parent():$this.parent(),that=$parent.data("this"),keyCodeMap={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(that.options.liveSearch&&($parent=$this.parent().parent()),that.options.container&&($parent=that.$menu),$items=$("[role=menu] li a",$parent),isActive=that.$menu.parent().hasClass("open"),!isActive&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(that.options.container?that.$newElement.trigger("click"):(that.setSize(),that.$menu.parent().addClass("open"),isActive=!0),that.$searchbox.focus()),that.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&isActive&&0===that.$menu.find(".active").length&&(e.preventDefault(),that.$menu.parent().removeClass("open"),that.$button.focus()),$items=$("[role=menu] li:not(.divider):not(.dropdown-header):visible",$parent),$this.val()||/(38|40)/.test(e.keyCode.toString(10))||0===$items.filter(".active").length&&($items=that.$newElement.find("li").filter(that.options.searchAccentInsensitive?":aicontains("+normalizeToBase(keyCodeMap[e.keyCode])+")":":icontains("+keyCodeMap[e.keyCode]+")"))),$items.length){if(/(38|40)/.test(e.keyCode.toString(10)))index=$items.index($items.filter(":focus")),first=$items.parent(":not(.disabled):visible").first().index(),last=$items.parent(":not(.disabled):visible").last().index(),next=$items.eq(index).parent().nextAll(":not(.disabled):visible").eq(0).index(),prev=$items.eq(index).parent().prevAll(":not(.disabled):visible").eq(0).index(),nextPrev=$items.eq(next).parent().prevAll(":not(.disabled):visible").eq(0).index(),that.options.liveSearch&&($items.each(function(i){$(this).is(":not(.disabled)")&&$(this).data("index",i)}),index=$items.index($items.filter(".active")),first=$items.filter(":not(.disabled):visible").first().data("index"),last=$items.filter(":not(.disabled):visible").last().data("index"),next=$items.eq(index).nextAll(":not(.disabled):visible").eq(0).data("index"),prev=$items.eq(index).prevAll(":not(.disabled):visible").eq(0).data("index"),nextPrev=$items.eq(next).prevAll(":not(.disabled):visible").eq(0).data("index")),prevIndex=$this.data("prevIndex"),38==e.keyCode&&(that.options.liveSearch&&(index-=1),index!=nextPrev&&index>prev&&(index=prev),first>index&&(index=first),index==prevIndex&&(index=last)),40==e.keyCode&&(that.options.liveSearch&&(index+=1),-1==index&&(index=0),index!=nextPrev&&next>index&&(index=next),index>last&&(index=last),index==prevIndex&&(index=first)),$this.data("prevIndex",index),that.options.liveSearch?(e.preventDefault(),$this.is(".halo-dropdown-toggle")||($items.removeClass("active"),$items.eq(index).addClass("active").find("a").focus(),$this.focus())):$items.eq(index).focus();else if(!$this.is("input")){var count,prevKey,keyIndex=[];$items.each(function(){$(this).parent().is(":not(.disabled)")&&$.trim($(this).text().toLowerCase()).substring(0,1)==keyCodeMap[e.keyCode]&&keyIndex.push($(this).parent().index())}),count=$(document).data("keycount"),count++,$(document).data("keycount",count),prevKey=$.trim($(":focus").text().toLowerCase()).substring(0,1),prevKey!=keyCodeMap[e.keyCode]?(count=1,$(document).data("keycount",count)):count>=keyIndex.length&&($(document).data("keycount",0),count>keyIndex.length&&(count=1)),$items.eq(keyIndex[count-1]).focus()}(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&that.options.selectOnTab)&&isActive&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),that.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(that.$menu.find(".active a").click(),$this.focus()):$(":focus").click(),$(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode.toString(10))&&isActive&&(that.multiple||that.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!isActive)&&(that.$menu.parent().removeClass("open"),that.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var old=$.fn.selectpicker;$.fn.selectpicker=Plugin,$.fn.selectpicker.Constructor=Selectpicker,$.fn.selectpicker.noConflict=function(){return $.fn.selectpicker=old,this},$(document).data("keycount",0).on("keydown",".bootstrap-select [data-htoggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",Selectpicker.prototype.keydown).on("focusin.modal",".bootstrap-select [data-htoggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(e){e.stopPropagation()}),$(window).on("load.bs.select.data-api",function(){$(".selectpicker").each(function(){var $selectpicker=$(this);Plugin.call($selectpicker,$selectpicker.data())})})}(jQuery),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"undefined"!=typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){"use strict";var Slick=window.Slick||{};Slick=function(){function Slick(element,settings){var dataSettings,responsiveSettings,breakpoint,_=this;if(_.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:$(element),appendDots:$(element),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(slider,i){return'<button type="button" data-role="none">'+(i+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},_.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},$.extend(_,_.initials),_.activeBreakpoint=null,_.animType=null,_.animProp=null,_.breakpoints=[],_.breakpointSettings=[],_.cssTransitions=!1,_.hidden="hidden",_.paused=!1,_.positionProp=null,_.respondTo=null,_.shouldClick=!0,_.$slider=$(element),_.$slidesCache=null,_.transformType=null,_.transitionType=null,_.visibilityChange="visibilitychange",_.windowWidth=0,_.windowTimer=null,dataSettings=$(element).data("slick")||{},_.options=$.extend({},_.defaults,dataSettings,settings),_.currentSlide=_.options.initialSlide,_.originalSettings=_.options,responsiveSettings=_.options.responsive||null,responsiveSettings&&responsiveSettings.length>-1){_.respondTo=_.options.respondTo||"window";for(breakpoint in responsiveSettings)responsiveSettings.hasOwnProperty(breakpoint)&&(_.breakpoints.push(responsiveSettings[breakpoint].breakpoint),_.breakpointSettings[responsiveSettings[breakpoint].breakpoint]=responsiveSettings[breakpoint].settings);_.breakpoints.sort(function(a,b){return _.options.mobileFirst===!0?a-b:b-a})}"undefined"!=typeof document.mozHidden?(_.hidden="mozHidden",_.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(_.hidden="msHidden",_.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(_.hidden="webkitHidden",_.visibilityChange="webkitvisibilitychange"),_.autoPlay=$.proxy(_.autoPlay,_),_.autoPlayClear=$.proxy(_.autoPlayClear,_),_.changeSlide=$.proxy(_.changeSlide,_),_.clickHandler=$.proxy(_.clickHandler,_),_.selectHandler=$.proxy(_.selectHandler,_),_.setPosition=$.proxy(_.setPosition,_),_.swipeHandler=$.proxy(_.swipeHandler,_),_.dragHandler=$.proxy(_.dragHandler,_),_.keyHandler=$.proxy(_.keyHandler,_),_.autoPlayIterator=$.proxy(_.autoPlayIterator,_),_.instanceUid=instanceUid++,_.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,_.init(),_.checkResponsive(!0)}var instanceUid=0;return Slick}(),Slick.prototype.addSlide=Slick.prototype.slickAdd=function(markup,index,addBefore){var _=this;if("boolean"==typeof index)addBefore=index,index=null;else if(0>index||index>=_.slideCount)return!1;_.unload(),"number"==typeof index?0===index&&0===_.$slides.length?$(markup).appendTo(_.$slideTrack):addBefore?$(markup).insertBefore(_.$slides.eq(index)):$(markup).insertAfter(_.$slides.eq(index)):addBefore===!0?$(markup).prependTo(_.$slideTrack):$(markup).appendTo(_.$slideTrack),_.$slides=_.$slideTrack.children(this.options.slide),_.$slideTrack.children(this.options.slide).detach(),_.$slideTrack.append(_.$slides),_.$slides.each(function(index,element){$(element).attr("data-slick-index",index)}),_.$slidesCache=_.$slides,_.reinit()},Slick.prototype.animateHeight=function(){var _=this;if(1===_.options.slidesToShow&&_.options.adaptiveHeight===!0&&_.options.vertical===!1){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(!0);_.$list.animate({height:targetHeight},_.options.speed)}},Slick.prototype.animateSlide=function(targetLeft,callback){var animProps={},_=this;_.animateHeight(),_.options.rtl===!0&&_.options.vertical===!1&&(targetLeft=-targetLeft),_.transformsEnabled===!1?_.options.vertical===!1?_.$slideTrack.animate({left:targetLeft},_.options.speed,_.options.easing,callback):_.$slideTrack.animate({top:targetLeft},_.options.speed,_.options.easing,callback):_.cssTransitions===!1?(_.options.rtl===!0&&(_.currentLeft=-_.currentLeft),$({animStart:_.currentLeft}).animate({animStart:targetLeft},{duration:_.options.speed,easing:_.options.easing,step:function(now){now=Math.ceil(now),_.options.vertical===!1?(animProps[_.animType]="translate("+now+"px, 0px)",_.$slideTrack.css(animProps)):(animProps[_.animType]="translate(0px,"+now+"px)",_.$slideTrack.css(animProps))},complete:function(){callback&&callback.call()}})):(_.applyTransition(),targetLeft=Math.ceil(targetLeft),_.options.vertical===!1?animProps[_.animType]="translate3d("+targetLeft+"px, 0px, 0px)":animProps[_.animType]="translate3d(0px,"+targetLeft+"px, 0px)",_.$slideTrack.css(animProps),callback&&setTimeout(function(){_.disableTransition(),callback.call()},_.options.speed))},Slick.prototype.asNavFor=function(index){var _=this,asNavFor=null!==_.options.asNavFor?$(_.options.asNavFor).slick("getSlick"):null;null!==asNavFor&&asNavFor.slideHandler(index,!0)},Slick.prototype.applyTransition=function(slide){var _=this,transition={};_.options.fade===!1?transition[_.transitionType]=_.transformType+" "+_.options.speed+"ms "+_.options.cssEase:transition[_.transitionType]="opacity "+_.options.speed+"ms "+_.options.cssEase,_.options.fade===!1?_.$slideTrack.css(transition):_.$slides.eq(slide).css(transition)},Slick.prototype.autoPlay=function(){var _=this;_.autoPlayTimer&&clearInterval(_.autoPlayTimer),_.slideCount>_.options.slidesToShow&&_.paused!==!0&&(_.autoPlayTimer=setInterval(_.autoPlayIterator,_.options.autoplaySpeed))},Slick.prototype.autoPlayClear=function(){var _=this;_.autoPlayTimer&&clearInterval(_.autoPlayTimer)},Slick.prototype.autoPlayIterator=function(){var _=this;_.options.infinite===!1?1===_.direction?(_.currentSlide+1===_.slideCount-1&&(_.direction=0),_.slideHandler(_.currentSlide+_.options.slidesToScroll)):(_.currentSlide-1===0&&(_.direction=1),_.slideHandler(_.currentSlide-_.options.slidesToScroll)):_.slideHandler(_.currentSlide+_.options.slidesToScroll)},Slick.prototype.buildArrows=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow=$(_.options.prevArrow),_.$nextArrow=$(_.options.nextArrow),_.htmlExpr.test(_.options.prevArrow)&&_.$prevArrow.appendTo(_.options.appendArrows),_.htmlExpr.test(_.options.nextArrow)&&_.$nextArrow.appendTo(_.options.appendArrows),_.options.infinite!==!0&&_.$prevArrow.addClass("slick-disabled"))},Slick.prototype.buildDots=function(){var i,dotString,_=this;if(_.options.dots===!0&&_.slideCount>_.options.slidesToShow){for(dotString='<ul class="'+_.options.dotsClass+'">',i=0;i<=_.getDotCount();i+=1)dotString+="<li>"+_.options.customPaging.call(this,_,i)+"</li>";dotString+="</ul>",_.$dots=$(dotString).appendTo(_.options.appendDots),_.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},Slick.prototype.buildOut=function(){var _=this;_.$slides=_.$slider.children(_.options.slide+":not(.slick-cloned)").addClass("slick-slide"),_.slideCount=_.$slides.length,_.$slides.each(function(index,element){$(element).attr("data-slick-index",index)}),_.$slidesCache=_.$slides,_.$slider.addClass("slick-slider"),_.$slideTrack=0===_.slideCount?$('<div class="slick-track"/>').appendTo(_.$slider):_.$slides.wrapAll('<div class="slick-track"/>').parent(),_.$list=_.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),_.$slideTrack.css("opacity",0),(_.options.centerMode===!0||_.options.swipeToSlide===!0)&&(_.options.slidesToScroll=1),$("img[data-lazy]",_.$slider).not("[src]").addClass("slick-loading"),_.setupInfinite(),_.buildArrows(),_.buildDots(),_.updateDots(),_.options.accessibility===!0&&_.$list.prop("tabIndex",0),_.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),_.options.draggable===!0&&_.$list.addClass("draggable")},Slick.prototype.checkResponsive=function(initial){var breakpoint,targetBreakpoint,respondToWidth,_=this,sliderWidth=_.$slider.width(),windowWidth=window.innerWidth||$(window).width();if("window"===_.respondTo?respondToWidth=windowWidth:"slider"===_.respondTo?respondToWidth=sliderWidth:"min"===_.respondTo&&(respondToWidth=Math.min(windowWidth,sliderWidth)),_.originalSettings.responsive&&_.originalSettings.responsive.length>-1&&null!==_.originalSettings.responsive){targetBreakpoint=null;for(breakpoint in _.breakpoints)_.breakpoints.hasOwnProperty(breakpoint)&&(_.originalSettings.mobileFirst===!1?respondToWidth<_.breakpoints[breakpoint]&&(targetBreakpoint=_.breakpoints[breakpoint]):respondToWidth>_.breakpoints[breakpoint]&&(targetBreakpoint=_.breakpoints[breakpoint]));null!==targetBreakpoint?null!==_.activeBreakpoint?targetBreakpoint!==_.activeBreakpoint&&(_.activeBreakpoint=targetBreakpoint,"unslick"===_.breakpointSettings[targetBreakpoint]?_.unslick():(_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]),initial===!0&&(_.currentSlide=_.options.initialSlide),_.refresh())):(_.activeBreakpoint=targetBreakpoint,"unslick"===_.breakpointSettings[targetBreakpoint]?_.unslick():(_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]),initial===!0&&(_.currentSlide=_.options.initialSlide),_.refresh())):null!==_.activeBreakpoint&&(_.activeBreakpoint=null,_.options=_.originalSettings,initial===!0&&(_.currentSlide=_.options.initialSlide),_.refresh())}},Slick.prototype.changeSlide=function(event,dontAnimate){var indexOffset,slideOffset,unevenOffset,_=this,$target=$(event.target);switch($target.is("a")&&event.preventDefault(),unevenOffset=_.slideCount%_.options.slidesToScroll!==0,indexOffset=unevenOffset?0:(_.slideCount-_.currentSlide)%_.options.slidesToScroll,event.data.message){case"previous":slideOffset=0===indexOffset?_.options.slidesToScroll:_.options.slidesToShow-indexOffset,_.slideCount>_.options.slidesToShow&&_.slideHandler(_.currentSlide-slideOffset,!1,dontAnimate);break;case"next":slideOffset=0===indexOffset?_.options.slidesToScroll:indexOffset,_.slideCount>_.options.slidesToShow&&_.slideHandler(_.currentSlide+slideOffset,!1,dontAnimate);break;case"index":var index=0===event.data.index?0:event.data.index||$(event.target).parent().index()*_.options.slidesToScroll;_.slideHandler(_.checkNavigable(index),!1,dontAnimate);break;default:return}},Slick.prototype.checkNavigable=function(index){var navigables,prevNavigable,_=this;if(navigables=_.getNavigableIndexes(),prevNavigable=0,index>navigables[navigables.length-1])index=navigables[navigables.length-1];else for(var n in navigables){if(index<navigables[n]){index=prevNavigable;break}prevNavigable=navigables[n]}return index},Slick.prototype.clickHandler=function(event){var _=this;_.shouldClick===!1&&(event.stopImmediatePropagation(),event.stopPropagation(),event.preventDefault())},Slick.prototype.destroy=function(){var _=this;_.autoPlayClear(),_.touchObject={},$(".slick-cloned",_.$slider).remove(),_.$dots&&_.$dots.remove(),_.$prevArrow&&"object"!=typeof _.options.prevArrow&&_.$prevArrow.remove(),_.$nextArrow&&"object"!=typeof _.options.nextArrow&&_.$nextArrow.remove(),_.$slides.removeClass("slick-slide slick-active slick-center slick-visible").attr("aria-hidden","true").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),_.$slider.removeClass("slick-slider"),_.$slider.removeClass("slick-initialized"),_.$list.off(".slick"),$(window).off(".slick-"+_.instanceUid),$(document).off(".slick-"+_.instanceUid),_.$slider.html(_.$slides)},Slick.prototype.disableTransition=function(slide){var _=this,transition={};transition[_.transitionType]="",_.options.fade===!1?_.$slideTrack.css(transition):_.$slides.eq(slide).css(transition)},Slick.prototype.fadeSlide=function(slideIndex,callback){var _=this;_.cssTransitions===!1?(_.$slides.eq(slideIndex).css({zIndex:1e3}),_.$slides.eq(slideIndex).animate({opacity:1},_.options.speed,_.options.easing,callback)):(_.applyTransition(slideIndex),_.$slides.eq(slideIndex).css({opacity:1,zIndex:1e3}),callback&&setTimeout(function(){_.disableTransition(slideIndex),callback.call()},_.options.speed))},Slick.prototype.filterSlides=Slick.prototype.slickFilter=function(filter){var _=this;null!==filter&&(_.unload(),_.$slideTrack.children(this.options.slide).detach(),_.$slidesCache.filter(filter).appendTo(_.$slideTrack),_.reinit())},Slick.prototype.getCurrent=Slick.prototype.slickCurrentSlide=function(){var _=this;return _.currentSlide},Slick.prototype.getDotCount=function(){var _=this,breakPoint=0,counter=0,pagerQty=0;if(_.options.infinite===!0)pagerQty=Math.ceil(_.slideCount/_.options.slidesToScroll);else if(_.options.centerMode===!0)pagerQty=_.slideCount;else for(;breakPoint<_.slideCount;)++pagerQty,breakPoint=counter+_.options.slidesToShow,counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;return pagerQty-1},Slick.prototype.getLeft=function(slideIndex){var targetLeft,verticalHeight,targetSlide,_=this,verticalOffset=0;return _.slideOffset=0,verticalHeight=_.$slides.first().outerHeight(),_.options.infinite===!0?(_.slideCount>_.options.slidesToShow&&(_.slideOffset=_.slideWidth*_.options.slidesToShow*-1,verticalOffset=verticalHeight*_.options.slidesToShow*-1),_.slideCount%_.options.slidesToScroll!==0&&slideIndex+_.options.slidesToScroll>_.slideCount&&_.slideCount>_.options.slidesToShow&&(slideIndex>_.slideCount?(_.slideOffset=(_.options.slidesToShow-(slideIndex-_.slideCount))*_.slideWidth*-1,verticalOffset=(_.options.slidesToShow-(slideIndex-_.slideCount))*verticalHeight*-1):(_.slideOffset=_.slideCount%_.options.slidesToScroll*_.slideWidth*-1,verticalOffset=_.slideCount%_.options.slidesToScroll*verticalHeight*-1))):slideIndex+_.options.slidesToShow>_.slideCount&&(_.slideOffset=(slideIndex+_.options.slidesToShow-_.slideCount)*_.slideWidth,verticalOffset=(slideIndex+_.options.slidesToShow-_.slideCount)*verticalHeight),_.slideCount<=_.options.slidesToShow&&(_.slideOffset=0,verticalOffset=0),_.options.centerMode===!0&&_.options.infinite===!0?_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)-_.slideWidth:_.options.centerMode===!0&&(_.slideOffset=0,_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)),targetLeft=_.options.vertical===!1?slideIndex*_.slideWidth*-1+_.slideOffset:slideIndex*verticalHeight*-1+verticalOffset,_.options.variableWidth===!0&&(targetSlide=_.$slideTrack.children(".slick-slide").eq(_.slideCount<=_.options.slidesToShow||_.options.infinite===!1?slideIndex:slideIndex+_.options.slidesToShow),targetLeft=targetSlide[0]?-1*targetSlide[0].offsetLeft:0,_.options.centerMode===!0&&(targetSlide=_.$slideTrack.children(".slick-slide").eq(_.options.infinite===!1?slideIndex:slideIndex+_.options.slidesToShow+1),targetLeft=targetSlide[0]?-1*targetSlide[0].offsetLeft:0,targetLeft+=(_.$list.width()-targetSlide.outerWidth())/2)),targetLeft},Slick.prototype.getOption=Slick.prototype.slickGetOption=function(option){var _=this;return _.options[option]},Slick.prototype.getNavigableIndexes=function(){var max,_=this,breakPoint=0,counter=0,indexes=[];for(_.options.infinite===!1?(max=_.slideCount-_.options.slidesToShow+1,_.options.centerMode===!0&&(max=_.slideCount)):(breakPoint=-1*_.slideCount,counter=-1*_.slideCount,max=2*_.slideCount);max>breakPoint;)indexes.push(breakPoint),breakPoint=counter+_.options.slidesToScroll,counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;return indexes},Slick.prototype.getSlick=function(){return this},Slick.prototype.getSlideCount=function(){var slidesTraversed,swipedSlide,centerOffset,_=this;return centerOffset=_.options.centerMode===!0?_.slideWidth*Math.floor(_.options.slidesToShow/2):0,_.options.swipeToSlide===!0?(_.$slideTrack.find(".slick-slide").each(function(index,slide){return slide.offsetLeft-centerOffset+$(slide).outerWidth()/2>-1*_.swipeLeft?(swipedSlide=slide,!1):void 0}),slidesTraversed=Math.abs($(swipedSlide).attr("data-slick-index")-_.currentSlide)||1):_.options.slidesToScroll},Slick.prototype.goTo=Slick.prototype.slickGoTo=function(slide,dontAnimate){var _=this;_.changeSlide({data:{message:"index",index:parseInt(slide)}},dontAnimate)},Slick.prototype.init=function(){var _=this;$(_.$slider).hasClass("slick-initialized")||($(_.$slider).addClass("slick-initialized"),_.buildOut(),_.setProps(),_.startLoad(),_.loadSlider(),_.initializeEvents(),_.updateArrows(),_.updateDots()),_.$slider.trigger("init",[_])},Slick.prototype.initArrowEvents=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.on("click.slick",{message:"previous"},_.changeSlide),_.$nextArrow.on("click.slick",{message:"next"},_.changeSlide))},Slick.prototype.initDotEvents=function(){var _=this;_.options.dots===!0&&_.slideCount>_.options.slidesToShow&&$("li",_.$dots).on("click.slick",{message:"index"},_.changeSlide),_.options.dots===!0&&_.options.pauseOnDotsHover===!0&&_.options.autoplay===!0&&$("li",_.$dots).on("mouseenter.slick",function(){_.paused=!0,_.autoPlayClear()}).on("mouseleave.slick",function(){_.paused=!1,_.autoPlay()})},Slick.prototype.initializeEvents=function(){var _=this;_.initArrowEvents(),_.initDotEvents(),_.$list.on("touchstart.slick mousedown.slick",{action:"start"},_.swipeHandler),_.$list.on("touchmove.slick mousemove.slick",{action:"move"},_.swipeHandler),_.$list.on("touchend.slick mouseup.slick",{action:"end"},_.swipeHandler),_.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},_.swipeHandler),_.$list.on("click.slick",_.clickHandler),_.options.autoplay===!0&&($(document).on(_.visibilityChange,function(){_.visibility()}),_.options.pauseOnHover===!0&&(_.$list.on("mouseenter.slick",function(){_.paused=!0,_.autoPlayClear()}),_.$list.on("mouseleave.slick",function(){_.paused=!1,_.autoPlay()}))),_.options.accessibility===!0&&_.$list.on("keydown.slick",_.keyHandler),_.options.focusOnSelect===!0&&$(_.$slideTrack).children().on("click.slick",_.selectHandler),$(window).on("orientationchange.slick.slick-"+_.instanceUid,function(){_.checkResponsive(),_.setPosition()}),$(window).on("resize.slick.slick-"+_.instanceUid,function(){$(window).width()!==_.windowWidth&&(clearTimeout(_.windowDelay),_.windowDelay=window.setTimeout(function(){_.windowWidth=$(window).width(),_.checkResponsive(),_.setPosition()},50))}),$("*[draggable!=true]",_.$slideTrack).on("dragstart",function(e){e.preventDefault()}),$(window).on("load.slick.slick-"+_.instanceUid,_.setPosition),$(document).on("ready.slick.slick-"+_.instanceUid,_.setPosition)},Slick.prototype.initUI=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.show(),_.$nextArrow.show()),_.options.dots===!0&&_.slideCount>_.options.slidesToShow&&_.$dots.show(),_.options.autoplay===!0&&_.autoPlay()},Slick.prototype.keyHandler=function(event){var _=this;37===event.keyCode&&_.options.accessibility===!0?_.changeSlide({data:{message:"previous"}}):39===event.keyCode&&_.options.accessibility===!0&&_.changeSlide({data:{message:"next"}})},Slick.prototype.lazyLoad=function(){function loadImages(imagesScope){$("img[data-lazy]",imagesScope).each(function(){var image=$(this),imageSource=$(this).attr("data-lazy");image.load(function(){image.animate({opacity:1},200)}).css({opacity:0}).attr("src",imageSource).removeAttr("data-lazy").removeClass("slick-loading")})}var loadRange,cloneRange,rangeStart,rangeEnd,_=this;_.options.centerMode===!0?_.options.infinite===!0?(rangeStart=_.currentSlide+(_.options.slidesToShow/2+1),rangeEnd=rangeStart+_.options.slidesToShow+2):(rangeStart=Math.max(0,_.currentSlide-(_.options.slidesToShow/2+1)),rangeEnd=2+(_.options.slidesToShow/2+1)+_.currentSlide):(rangeStart=_.options.infinite?_.options.slidesToShow+_.currentSlide:_.currentSlide,rangeEnd=rangeStart+_.options.slidesToShow,_.options.fade===!0&&(rangeStart>0&&rangeStart--,rangeEnd<=_.slideCount&&rangeEnd++)),loadRange=_.$slider.find(".slick-slide").slice(rangeStart,rangeEnd),loadImages(loadRange),_.slideCount<=_.options.slidesToShow?(cloneRange=_.$slider.find(".slick-slide"),loadImages(cloneRange)):_.currentSlide>=_.slideCount-_.options.slidesToShow?(cloneRange=_.$slider.find(".slick-cloned").slice(0,_.options.slidesToShow),loadImages(cloneRange)):0===_.currentSlide&&(cloneRange=_.$slider.find(".slick-cloned").slice(-1*_.options.slidesToShow),loadImages(cloneRange))},Slick.prototype.loadSlider=function(){var _=this;_.setPosition(),_.$slideTrack.css({opacity:1}),_.$slider.removeClass("slick-loading"),_.initUI(),"progressive"===_.options.lazyLoad&&_.progressiveLazyLoad()},Slick.prototype.next=Slick.prototype.slickNext=function(){var _=this;_.changeSlide({data:{message:"next"}})},Slick.prototype.pause=Slick.prototype.slickPause=function(){var _=this;_.autoPlayClear(),_.paused=!0},Slick.prototype.play=Slick.prototype.slickPlay=function(){var _=this;_.paused=!1,_.autoPlay()},Slick.prototype.postSlide=function(index){var _=this;_.$slider.trigger("afterChange",[_,index]),_.animating=!1,_.setPosition(),_.swipeLeft=null,_.options.autoplay===!0&&_.paused===!1&&_.autoPlay()},Slick.prototype.prev=Slick.prototype.slickPrev=function(){var _=this;_.changeSlide({data:{message:"previous"}})},Slick.prototype.progressiveLazyLoad=function(){var imgCount,targetImage,_=this;imgCount=$("img[data-lazy]",_.$slider).length,imgCount>0&&(targetImage=$("img[data-lazy]",_.$slider).first(),targetImage.attr("src",targetImage.attr("data-lazy")).removeClass("slick-loading").load(function(){
targetImage.removeAttr("data-lazy"),_.progressiveLazyLoad(),_.options.adaptiveHeight===!0&&_.setPosition()}).error(function(){targetImage.removeAttr("data-lazy"),_.progressiveLazyLoad()}))},Slick.prototype.refresh=function(){var _=this,currentSlide=_.currentSlide;_.destroy(),$.extend(_,_.initials),_.init(),_.changeSlide({data:{message:"index",index:currentSlide}},!0)},Slick.prototype.reinit=function(){var _=this;_.$slides=_.$slideTrack.children(_.options.slide).addClass("slick-slide"),_.slideCount=_.$slides.length,_.currentSlide>=_.slideCount&&0!==_.currentSlide&&(_.currentSlide=_.currentSlide-_.options.slidesToScroll),_.slideCount<=_.options.slidesToShow&&(_.currentSlide=0),_.setProps(),_.setupInfinite(),_.buildArrows(),_.updateArrows(),_.initArrowEvents(),_.buildDots(),_.updateDots(),_.initDotEvents(),_.options.focusOnSelect===!0&&$(_.$slideTrack).children().on("click.slick",_.selectHandler),_.setSlideClasses(0),_.setPosition(),_.$slider.trigger("reInit",[_])},Slick.prototype.removeSlide=Slick.prototype.slickRemove=function(index,removeBefore,removeAll){var _=this;return"boolean"==typeof index?(removeBefore=index,index=removeBefore===!0?0:_.slideCount-1):index=removeBefore===!0?--index:index,_.slideCount<1||0>index||index>_.slideCount-1?!1:(_.unload(),removeAll===!0?_.$slideTrack.children().remove():_.$slideTrack.children(this.options.slide).eq(index).remove(),_.$slides=_.$slideTrack.children(this.options.slide),_.$slideTrack.children(this.options.slide).detach(),_.$slideTrack.append(_.$slides),_.$slidesCache=_.$slides,void _.reinit())},Slick.prototype.setCSS=function(position){var x,y,_=this,positionProps={};_.options.rtl===!0&&(position=-position),x="left"==_.positionProp?Math.ceil(position)+"px":"0px",y="top"==_.positionProp?Math.ceil(position)+"px":"0px",positionProps[_.positionProp]=position,_.transformsEnabled===!1?_.$slideTrack.css(positionProps):(positionProps={},_.cssTransitions===!1?(positionProps[_.animType]="translate("+x+", "+y+")",_.$slideTrack.css(positionProps)):(positionProps[_.animType]="translate3d("+x+", "+y+", 0px)",_.$slideTrack.css(positionProps)))},Slick.prototype.setDimensions=function(){var _=this;if(_.options.vertical===!1?_.options.centerMode===!0&&_.$list.css({padding:"0px "+_.options.centerPadding}):(_.$list.height(_.$slides.first().outerHeight(!0)*_.options.slidesToShow),_.options.centerMode===!0&&_.$list.css({padding:_.options.centerPadding+" 0px"})),_.listWidth=_.$list.width(),_.listHeight=_.$list.height(),_.options.vertical===!1&&_.options.variableWidth===!1)_.slideWidth=Math.ceil(_.listWidth/_.options.slidesToShow),_.$slideTrack.width(Math.ceil(_.slideWidth*_.$slideTrack.children(".slick-slide").length));else if(_.options.variableWidth===!0){var trackWidth=0;_.slideWidth=Math.ceil(_.listWidth/_.options.slidesToShow),_.$slideTrack.children(".slick-slide").each(function(){trackWidth+=_.listWidth}),_.$slideTrack.width(Math.ceil(trackWidth)+1)}else _.slideWidth=Math.ceil(_.listWidth),_.$slideTrack.height(Math.ceil(_.$slides.first().outerHeight(!0)*_.$slideTrack.children(".slick-slide").length));var offset=_.$slides.first().outerWidth(!0)-_.$slides.first().width();_.options.variableWidth===!1&&_.$slideTrack.children(".slick-slide").width(_.slideWidth-offset)},Slick.prototype.setFade=function(){var targetLeft,_=this;_.$slides.each(function(index,element){targetLeft=_.slideWidth*index*-1,$(element).css(_.options.rtl===!0?{position:"relative",right:targetLeft,top:0,zIndex:800,opacity:0}:{position:"relative",left:targetLeft,top:0,zIndex:800,opacity:0})}),_.$slides.eq(_.currentSlide).css({zIndex:900,opacity:1})},Slick.prototype.setHeight=function(){var _=this;if(1===_.options.slidesToShow&&_.options.adaptiveHeight===!0&&_.options.vertical===!1){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(!0);_.$list.css("height",targetHeight)}},Slick.prototype.setOption=Slick.prototype.slickSetOption=function(option,value,refresh){var _=this;_.options[option]=value,refresh===!0&&(_.unload(),_.reinit())},Slick.prototype.setPosition=function(){var _=this;_.setDimensions(),_.setHeight(),_.options.fade===!1?_.setCSS(_.getLeft(_.currentSlide)):_.setFade(),_.$slider.trigger("setPosition",[_])},Slick.prototype.setProps=function(){var _=this,bodyStyle=document.body.style;_.positionProp=_.options.vertical===!0?"top":"left","top"===_.positionProp?_.$slider.addClass("slick-vertical"):_.$slider.removeClass("slick-vertical"),(void 0!==bodyStyle.WebkitTransition||void 0!==bodyStyle.MozTransition||void 0!==bodyStyle.msTransition)&&_.options.useCSS===!0&&(_.cssTransitions=!0),void 0!==bodyStyle.OTransform&&(_.animType="OTransform",_.transformType="-o-transform",_.transitionType="OTransition",void 0===bodyStyle.perspectiveProperty&&void 0===bodyStyle.webkitPerspective&&(_.animType=!1)),void 0!==bodyStyle.MozTransform&&(_.animType="MozTransform",_.transformType="-moz-transform",_.transitionType="MozTransition",void 0===bodyStyle.perspectiveProperty&&void 0===bodyStyle.MozPerspective&&(_.animType=!1)),void 0!==bodyStyle.webkitTransform&&(_.animType="webkitTransform",_.transformType="-webkit-transform",_.transitionType="webkitTransition",void 0===bodyStyle.perspectiveProperty&&void 0===bodyStyle.webkitPerspective&&(_.animType=!1)),void 0!==bodyStyle.msTransform&&(_.animType="msTransform",_.transformType="-ms-transform",_.transitionType="msTransition",void 0===bodyStyle.msTransform&&(_.animType=!1)),void 0!==bodyStyle.transform&&_.animType!==!1&&(_.animType="transform",_.transformType="transform",_.transitionType="transition"),_.transformsEnabled=null!==_.animType&&_.animType!==!1},Slick.prototype.setSlideClasses=function(index){var centerOffset,allSlides,indexOffset,remainder,_=this;_.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),allSlides=_.$slider.find(".slick-slide"),_.options.centerMode===!0?(centerOffset=Math.floor(_.options.slidesToShow/2),_.options.infinite===!0&&(index>=centerOffset&&index<=_.slideCount-1-centerOffset?_.$slides.slice(index-centerOffset,index+centerOffset+1).addClass("slick-active").attr("aria-hidden","false"):(indexOffset=_.options.slidesToShow+index,allSlides.slice(indexOffset-centerOffset+1,indexOffset+centerOffset+2).addClass("slick-active").attr("aria-hidden","false")),0===index?allSlides.eq(allSlides.length-1-_.options.slidesToShow).addClass("slick-center"):index===_.slideCount-1&&allSlides.eq(_.options.slidesToShow).addClass("slick-center")),_.$slides.eq(index).addClass("slick-center")):index>=0&&index<=_.slideCount-_.options.slidesToShow?_.$slides.slice(index,index+_.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):allSlides.length<=_.options.slidesToShow?allSlides.addClass("slick-active").attr("aria-hidden","false"):(remainder=_.slideCount%_.options.slidesToShow,indexOffset=_.options.infinite===!0?_.options.slidesToShow+index:index,_.options.slidesToShow==_.options.slidesToScroll&&_.slideCount-index<_.options.slidesToShow?allSlides.slice(indexOffset-(_.options.slidesToShow-remainder),indexOffset+remainder).addClass("slick-active").attr("aria-hidden","false"):allSlides.slice(indexOffset,indexOffset+_.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===_.options.lazyLoad&&_.lazyLoad()},Slick.prototype.setupInfinite=function(){var i,slideIndex,infiniteCount,_=this;if(_.options.fade===!0&&(_.options.centerMode=!1),_.options.infinite===!0&&_.options.fade===!1&&(slideIndex=null,_.slideCount>_.options.slidesToShow)){for(infiniteCount=_.options.centerMode===!0?_.options.slidesToShow+1:_.options.slidesToShow,i=_.slideCount;i>_.slideCount-infiniteCount;i-=1)slideIndex=i-1,$(_.$slides[slideIndex]).clone(!0).attr("id","").attr("data-slick-index",slideIndex-_.slideCount).prependTo(_.$slideTrack).addClass("slick-cloned");for(i=0;infiniteCount>i;i+=1)slideIndex=i,$(_.$slides[slideIndex]).clone(!0).attr("id","").attr("data-slick-index",slideIndex+_.slideCount).appendTo(_.$slideTrack).addClass("slick-cloned");_.$slideTrack.find(".slick-cloned").find("[id]").each(function(){$(this).attr("id","")})}},Slick.prototype.selectHandler=function(event){var _=this,index=parseInt($(event.target).parents(".slick-slide").attr("data-slick-index"));return index||(index=0),_.slideCount<=_.options.slidesToShow?(_.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),_.$slides.eq(index).addClass("slick-active").attr("aria-hidden","false"),_.options.centerMode===!0&&(_.$slider.find(".slick-slide").removeClass("slick-center"),_.$slides.eq(index).addClass("slick-center")),void _.asNavFor(index)):void _.slideHandler(index)},Slick.prototype.slideHandler=function(index,sync,dontAnimate){var targetSlide,animSlide,oldSlide,slideLeft,targetLeft=null,_=this;return sync=sync||!1,_.animating===!0&&_.options.waitForAnimate===!0||_.options.fade===!0&&_.currentSlide===index||_.slideCount<=_.options.slidesToShow?void 0:(sync===!1&&_.asNavFor(index),targetSlide=index,targetLeft=_.getLeft(targetSlide),slideLeft=_.getLeft(_.currentSlide),_.currentLeft=null===_.swipeLeft?slideLeft:_.swipeLeft,_.options.infinite===!1&&_.options.centerMode===!1&&(0>index||index>_.getDotCount()*_.options.slidesToScroll)?void(_.options.fade===!1&&(targetSlide=_.currentSlide,dontAnimate!==!0?_.animateSlide(slideLeft,function(){_.postSlide(targetSlide)}):_.postSlide(targetSlide))):_.options.infinite===!1&&_.options.centerMode===!0&&(0>index||index>_.slideCount-_.options.slidesToScroll)?void(_.options.fade===!1&&(targetSlide=_.currentSlide,dontAnimate!==!0?_.animateSlide(slideLeft,function(){_.postSlide(targetSlide)}):_.postSlide(targetSlide))):(_.options.autoplay===!0&&clearInterval(_.autoPlayTimer),animSlide=0>targetSlide?_.slideCount%_.options.slidesToScroll!==0?_.slideCount-_.slideCount%_.options.slidesToScroll:_.slideCount+targetSlide:targetSlide>=_.slideCount?_.slideCount%_.options.slidesToScroll!==0?0:targetSlide-_.slideCount:targetSlide,_.animating=!0,_.$slider.trigger("beforeChange",[_,_.currentSlide,animSlide]),oldSlide=_.currentSlide,_.currentSlide=animSlide,_.setSlideClasses(_.currentSlide),_.updateDots(),_.updateArrows(),_.options.fade===!0?(dontAnimate!==!0?_.fadeSlide(animSlide,function(){_.postSlide(animSlide)}):_.postSlide(animSlide),void _.animateHeight()):void(dontAnimate!==!0?_.animateSlide(targetLeft,function(){_.postSlide(animSlide)}):_.postSlide(animSlide))))},Slick.prototype.startLoad=function(){var _=this;_.options.arrows===!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.hide(),_.$nextArrow.hide()),_.options.dots===!0&&_.slideCount>_.options.slidesToShow&&_.$dots.hide(),_.$slider.addClass("slick-loading")},Slick.prototype.swipeDirection=function(){var xDist,yDist,r,swipeAngle,_=this;return xDist=_.touchObject.startX-_.touchObject.curX,yDist=_.touchObject.startY-_.touchObject.curY,r=Math.atan2(yDist,xDist),swipeAngle=Math.round(180*r/Math.PI),0>swipeAngle&&(swipeAngle=360-Math.abs(swipeAngle)),45>=swipeAngle&&swipeAngle>=0?_.options.rtl===!1?"left":"right":360>=swipeAngle&&swipeAngle>=315?_.options.rtl===!1?"left":"right":swipeAngle>=135&&225>=swipeAngle?_.options.rtl===!1?"right":"left":"vertical"},Slick.prototype.swipeEnd=function(event){var slideCount,_=this;if(_.dragging=!1,_.shouldClick=_.touchObject.swipeLength>10?!1:!0,void 0===_.touchObject.curX)return!1;if(_.touchObject.edgeHit===!0&&_.$slider.trigger("edge",[_,_.swipeDirection()]),_.touchObject.swipeLength>=_.touchObject.minSwipe)switch(_.swipeDirection()){case"left":slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide+_.getSlideCount()):_.currentSlide+_.getSlideCount(),_.slideHandler(slideCount),_.currentDirection=0,_.touchObject={},_.$slider.trigger("swipe",[_,"left"]);break;case"right":slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide-_.getSlideCount()):_.currentSlide-_.getSlideCount(),_.slideHandler(slideCount),_.currentDirection=1,_.touchObject={},_.$slider.trigger("swipe",[_,"right"])}else _.touchObject.startX!==_.touchObject.curX&&(_.slideHandler(_.currentSlide),_.touchObject={})},Slick.prototype.swipeHandler=function(event){var _=this;if(!(_.options.swipe===!1||"ontouchend"in document&&_.options.swipe===!1||_.options.draggable===!1&&-1!==event.type.indexOf("mouse")))switch(_.touchObject.fingerCount=event.originalEvent&&void 0!==event.originalEvent.touches?event.originalEvent.touches.length:1,_.touchObject.minSwipe=_.listWidth/_.options.touchThreshold,event.data.action){case"start":_.swipeStart(event);break;case"move":_.swipeMove(event);break;case"end":_.swipeEnd(event)}},Slick.prototype.swipeMove=function(event){var curLeft,swipeDirection,swipeLength,positionOffset,touches,_=this;return touches=void 0!==event.originalEvent?event.originalEvent.touches:null,!_.dragging||touches&&1!==touches.length?!1:(curLeft=_.getLeft(_.currentSlide),_.touchObject.curX=void 0!==touches?touches[0].pageX:event.clientX,_.touchObject.curY=void 0!==touches?touches[0].pageY:event.clientY,_.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curX-_.touchObject.startX,2))),swipeDirection=_.swipeDirection(),"vertical"!==swipeDirection?(void 0!==event.originalEvent&&_.touchObject.swipeLength>4&&event.preventDefault(),positionOffset=(_.options.rtl===!1?1:-1)*(_.touchObject.curX>_.touchObject.startX?1:-1),swipeLength=_.touchObject.swipeLength,_.touchObject.edgeHit=!1,_.options.infinite===!1&&(0===_.currentSlide&&"right"===swipeDirection||_.currentSlide>=_.getDotCount()&&"left"===swipeDirection)&&(swipeLength=_.touchObject.swipeLength*_.options.edgeFriction,_.touchObject.edgeHit=!0),_.options.vertical===!1?_.swipeLeft=curLeft+swipeLength*positionOffset:_.swipeLeft=curLeft+swipeLength*(_.$list.height()/_.listWidth)*positionOffset,_.options.fade===!0||_.options.touchMove===!1?!1:_.animating===!0?(_.swipeLeft=null,!1):void _.setCSS(_.swipeLeft)):void 0)},Slick.prototype.swipeStart=function(event){var touches,_=this;return 1!==_.touchObject.fingerCount||_.slideCount<=_.options.slidesToShow?(_.touchObject={},!1):(void 0!==event.originalEvent&&void 0!==event.originalEvent.touches&&(touches=event.originalEvent.touches[0]),_.touchObject.startX=_.touchObject.curX=void 0!==touches?touches.pageX:event.clientX,_.touchObject.startY=_.touchObject.curY=void 0!==touches?touches.pageY:event.clientY,void(_.dragging=!0))},Slick.prototype.unfilterSlides=Slick.prototype.slickUnfilter=function(){var _=this;null!==_.$slidesCache&&(_.unload(),_.$slideTrack.children(this.options.slide).detach(),_.$slidesCache.appendTo(_.$slideTrack),_.reinit())},Slick.prototype.unload=function(){var _=this;$(".slick-cloned",_.$slider).remove(),_.$dots&&_.$dots.remove(),_.$prevArrow&&"object"!=typeof _.options.prevArrow&&_.$prevArrow.remove(),_.$nextArrow&&"object"!=typeof _.options.nextArrow&&_.$nextArrow.remove(),_.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},Slick.prototype.unslick=function(){var _=this;_.destroy()},Slick.prototype.updateArrows=function(){var centerOffset,_=this;centerOffset=Math.floor(_.options.slidesToShow/2),_.options.arrows===!0&&_.options.infinite!==!0&&_.slideCount>_.options.slidesToShow&&(_.$prevArrow.removeClass("slick-disabled"),_.$nextArrow.removeClass("slick-disabled"),0===_.currentSlide?(_.$prevArrow.addClass("slick-disabled"),_.$nextArrow.removeClass("slick-disabled")):_.currentSlide>=_.slideCount-_.options.slidesToShow&&_.options.centerMode===!1?(_.$nextArrow.addClass("slick-disabled"),_.$prevArrow.removeClass("slick-disabled")):_.currentSlide>=_.slideCount-1&&_.options.centerMode===!0&&(_.$nextArrow.addClass("slick-disabled"),_.$prevArrow.removeClass("slick-disabled")))},Slick.prototype.updateDots=function(){var _=this;null!==_.$dots&&(_.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),_.$dots.find("li").eq(Math.floor(_.currentSlide/_.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},Slick.prototype.visibility=function(){var _=this;document[_.hidden]?(_.paused=!0,_.autoPlayClear()):(_.paused=!1,_.autoPlay())},$.fn.slick=function(){var ret,_=this,opt=arguments[0],args=Array.prototype.slice.call(arguments,1),l=_.length,i=0;for(i;l>i;i++)if("object"==typeof opt||"undefined"==typeof opt?_[i].slick=new Slick(_[i],opt):ret=_[i].slick[opt].apply(_[i].slick,args),"undefined"!=typeof ret)return ret;return _},$(function(){$("[data-slick]").slick()})});